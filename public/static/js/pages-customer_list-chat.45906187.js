(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-customer_list-chat"],{"02e8":function(t,n,e){"use strict";var o=e("5a3f"),i=e.n(o);i.a},"286e":function(t,n,e){var o=e("24fb");n=o(!1),n.push([t.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""]),t.exports=n},"4efc":function(t,n,e){"use strict";e.r(n);var o=e("d9a0"),i=e("f400");for(var a in i)"default"!==a&&function(t){e.d(n,t,(function(){return i[t]}))}(a);e("803f"),e("a413"),e("02e8");var r,s=e("f0c5"),d=Object(s["a"])(i["default"],o["b"],o["c"],!1,null,"2e52b2e4",null,!1,o["a"],r);n["default"]=d.exports},"5a3f":function(t,n,e){var o=e("868b");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var i=e("4f06").default;i("9fc48ac2",o,!0,{sourceMap:!1,shadowMode:!1})},"5dc5":function(t,n,e){var o=e("24fb");n=o(!1),n.push([t.i,".Loads[data-v-60697522]{height:%?80?%;font-size:%?25?%;color:#000}.Loads .iconfont[data-v-60697522]{font-size:%?30?%;margin-right:%?10?%;height:%?32?%;line-height:%?32?%}\n/*加载动画*/@-webkit-keyframes load-data-v-60697522{from{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes load-data-v-60697522{from{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.loadingpic[data-v-60697522]{-webkit-animation:load-data-v-60697522 3s linear 1s infinite;animation:load-data-v-60697522 3s linear 1s infinite}.loading[data-v-60697522]{-webkit-animation:load-data-v-60697522 linear 1s infinite;animation:load-data-v-60697522 linear 1s infinite}",""]),t.exports=n},"61f7":function(t,n,e){"use strict";var o=e("8082"),i=e.n(o);i.a},6301:function(t,n,e){"use strict";var o=e("4ea4");Object.defineProperty(n,"__esModule",{value:!0}),n.getProductDetail=a,n.getProductCode=r,n.collectAdd=s,n.collectDel=d,n.postCartAdd=c,n.getCategoryList=u,n.getProductslist=l,n.getProductHot=f,n.collectAll=p,n.getGroomList=h,n.getCollectUserList=m,n.getReplyList=v,n.getReplyConfig=g,n.getSearchKeyword=b,n.storeListApi=_;var i=o(e("8d0b"));function a(t){return i.default.get("product/detail/"+t,{},{noAuth:!0})}function r(t){return i.default.get("product/code/"+t,{})}function s(t,n){return i.default.post("collect/add",{id:t,product:void 0===n?"product":n})}function d(t,n){return i.default.post("collect/del",{id:t,category:void 0===n?"product":n})}function c(t){return i.default.post("cart/add",t)}function u(){return i.default.get("category",{},{noAuth:!0})}function l(t){return i.default.get("products",t,{noAuth:!0})}function f(t,n){return i.default.get("product/hot",{page:void 0===t?1:t,limit:void 0===n?4:n},{noAuth:!0})}function p(t,n){return i.default.post("collect/all",{id:t,category:void 0===n?"product":n})}function h(t,n){return i.default.get("groom/list/"+t,n,{noAuth:!0})}function m(t){return i.default.get("collect/user",t)}function v(t,n){return i.default.get("reply/list/"+t,n)}function g(t){return i.default.get("reply/config/"+t)}function b(){return i.default.get("search/keyword",{},{noAuth:!0})}function _(t){return i.default.get("store_list",t)}},6525:function(t,n,e){"use strict";var o=e("4ea4");Object.defineProperty(n,"__esModule",{value:!0}),n.getCartCounts=a,n.getCartList=r,n.getResetCart=s,n.changeCartNum=d,n.cartDel=c,n.getOrderList=u,n.orderProduct=l,n.orderComment=f,n.orderPay=p,n.orderData=h,n.orderCancel=m,n.orderDel=v,n.getOrderDetail=g,n.orderAgain=b,n.orderTake=_,n.express=x,n.ordeRefundReason=w,n.orderRefundVerify=y,n.orderConfirm=k,n.getCouponsOrderPrice=I,n.orderCreate=C,n.postOrderComputed=$,n.orderCoupon=L,n.offlineCheckPrice=T,n.offlineCreate=z,n.orderOfflinePayType=O,n.orderInvoiceList=S,n.orderInvoiceDetail=P,n.aliPay=j;var i=o(e("8d0b"));function a(t){return i.default.get("cart/count",{numType:void 0===t?0:t})}function r(t){return i.default.get("cart/list",t)}function s(t){return i.default.post("v2/reset_cart",t)}function d(t,n){return i.default.post("cart/num",{id:t,number:n})}function c(t){return"object"===typeof t&&(t=t.join(",")),i.default.post("cart/del",{ids:t})}function u(t){return i.default.get("order/list",t)}function l(t){return i.default.post("order/product",{unique:t})}function f(t){return i.default.post("order/comment",t)}function p(t){return i.default.post("order/pay",t)}function h(){return i.default.get("order/data")}function m(t){return i.default.post("order/cancel",{id:t})}function v(t){return i.default.post("order/del",{uni:t})}function g(t){return i.default.get("order/detail/"+t)}function b(t){return i.default.post("order/again",{uni:t})}function _(t){return i.default.post("order/take",{uni:t})}function x(t){return i.default.get("order/express/"+t)}function w(){return i.default.get("order/refund/reason")}function y(t){return i.default.post("order/refund/verify",t)}function k(t,n){return i.default.post("order/confirm",{cartId:t,new:n})}function I(t,n){return i.default.get("coupons/order/"+t,n)}function C(t,n){return i.default.post("order/create/"+t,n)}function $(t,n){return i.default.post("order/computed/"+t,n)}function L(t){return i.default.post("v2/order/product_coupon/"+t)}function T(t){return i.default.post("order/offline/check/price",t)}function z(t){return i.default.post("order/offline/create",t)}function O(){return i.default.get("order/offline/pay/type")}function S(t){return i.default.get("v2/order/invoice_list",t)}function P(t){return i.default.get("v2/order/invoice_detail/".concat(t))}function j(t,n){return i.default.get("ali_pay",{key:t,quitUrl:n},{noAuth:!0})}},"803f":function(t,n,e){"use strict";var o=e("bd02"),i=e.n(o);i.a},8082:function(t,n,e){var o=e("5dc5");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var i=e("4f06").default;i("1d9699f2",o,!0,{sourceMap:!1,shadowMode:!1})},"868b":function(t,n,e){var o=e("24fb");n=o(!1),n.push([t.i,".em[data-v-2e52b2e4]{display:inline-block;width:%?50?%;height:%?50?%;margin:%?40?% 0 0 %?50?%}.emoji-outer[data-v-2e52b2e4]{position:absolute;right:%?50?%;bottom:%?30?%;width:%?50?%;height:%?50?%}",""]),t.exports=n},"90ad":function(t,n,e){var o=e("24fb");n=o(!1),n.push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.chat-box[data-v-2e52b2e4]{display:flex;flex-direction:column;height:100%;background:#f0f1f2;height:100vh}.chat-box .head-box[data-v-2e52b2e4]{height:%?86?%;background:linear-gradient(85deg,#3875ea,#1890fc)}.chat-box .head-box .title-hd[data-v-2e52b2e4]{display:flex;align-items:center;justify-content:center;position:relative;height:43px;padding:0 %?30?%;color:#fff}.chat-box .head-box .title-hd .icon-fanhui[data-v-2e52b2e4]{position:absolute;left:%?30?%;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.chat-box .scroll-box[data-v-2e52b2e4]{flex:1}.chat-box .footer-box[data-v-2e52b2e4]{display:flex;align-items:center;height:%?100?%;padding:0 %?30?%;color:rgba(0,0,0,.8);background:#f7f7f7;height:calc(100rpx+ constant(safe-area-inset-bottom));height:calc(%?100?% + env(safe-area-inset-bottom))}.chat-box .footer-box .words .icon-tupian[data-v-2e52b2e4]{font-size:%?50?%}.chat-box .footer-box .input-box[data-v-2e52b2e4]{display:flex;align-items:center;flex:1;height:%?64?%;padding-right:%?5?%;margin-left:%?18?%;background-color:#fff;border-radius:%?32?%}.chat-box .footer-box .input-box uni-input[data-v-2e52b2e4]{flex:1;padding-left:%?20?%;height:100%;font-size:%?28?%;font-weight:400}.chat-box .footer-box .input-box .icon-fasong[data-v-2e52b2e4]{font-size:%?50?%;color:#ccc;font-weight:400}.chat-box .footer-box .input-box .isSend[data-v-2e52b2e4]{color:#3875ea}.chat-box .footer-box .emoji .icon-biaoqing[data-v-2e52b2e4]{margin-left:%?18?%;font-size:%?50?%}.chat-box .footer-box .more .icon-gengduozhankai[data-v-2e52b2e4]{margin-left:%?18?%;font-size:%?50?%}.tool-wrapper[data-v-2e52b2e4]{display:flex;justify-content:space-between;padding:%?45?% %?60?%;background:#fff;font-size:%?24?%}.tool-wrapper .tool-item[data-v-2e52b2e4]{text-align:center}.tool-wrapper .tool-item uni-image[data-v-2e52b2e4]{width:%?104?%;height:%?104?%}.slider-banner[data-v-2e52b2e4]{background:#fff}.words-mask[data-v-2e52b2e4]{z-index:50;position:fixed;left:0;top:0;right:0;bottom:0;background:rgba(0,0,0,.5)}.words-mask .content[data-v-2e52b2e4]{position:absolute;left:0;right:0;top:%?114?%;bottom:0;display:flex;flex-direction:column;padding:0 %?30?%;background:#fff;border-radius:%?6?% %?6?% 0 0}.words-mask .content .title-box[data-v-2e52b2e4]{position:relative;height:%?125?%;line-height:%?125?%;text-align:center;font-size:%?32?%}.words-mask .content .title-box .icon-cha1[data-v-2e52b2e4]{position:absolute;right:0;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.words-mask .content .scroll-box[data-v-2e52b2e4]{flex:1;overflow:hidden}.words-mask .content .scroll-box .msg-item[data-v-2e52b2e4]{padding:%?25?% 0;border-bottom:1px solid #eceff8}.chat-scroll-box[data-v-2e52b2e4]{flex:1;padding:%?30?% %?30?% 0;overflow:hidden}.chat-scroll-box .chat-item[data-v-2e52b2e4]{display:flex;margin-bottom:%?36?%}.chat-scroll-box .chat-item .avatar[data-v-2e52b2e4]{width:%?80?%;height:%?80?%;border-radius:50%}.chat-scroll-box .chat-item .msg-box[data-v-2e52b2e4]{display:flex;align-items:center;max-width:%?452?%;margin-left:%?22?%;padding:%?10?% %?24?%;background:#fff;border-radius:%?14?%;word-break:break-all}.chat-scroll-box .chat-item .img-box[data-v-2e52b2e4]{width:%?270?%;margin-left:%?22?%}.chat-scroll-box .chat-item .img-box uni-image[data-v-2e52b2e4]{width:%?270?%}.chat-scroll-box .chat-item .product-box[data-v-2e52b2e4]{width:%?452?%;margin-left:%?22?%;background-color:#fff;border-radius:%?14?%;overflow:hidden}.chat-scroll-box .chat-item .product-box uni-image[data-v-2e52b2e4]{width:%?452?%}.chat-scroll-box .chat-item .product-box .info[data-v-2e52b2e4]{padding:%?16?% %?26?%}.chat-scroll-box .chat-item .product-box .info .price[data-v-2e52b2e4]{font-size:%?36?%;color:#f74c31}.chat-scroll-box .chat-item .product-box .info .price uni-text[data-v-2e52b2e4]{font-size:%?28?%}.chat-scroll-box .chat-item .order-box[data-v-2e52b2e4]{width:%?452?%;margin-left:%?22?%;background-color:#fff;border-radius:%?14?%}.chat-scroll-box .chat-item .order-box .title[data-v-2e52b2e4]{padding:%?15?% %?20?%;font-size:%?26?%;color:#282828;border-bottom:1px solid #eceff8}.chat-scroll-box .chat-item .order-box .info[data-v-2e52b2e4]{display:flex;padding:%?20?%}.chat-scroll-box .chat-item .order-box .info uni-image[data-v-2e52b2e4]{width:%?124?%;height:%?124?%;border-radius:%?6?%}.chat-scroll-box .chat-item .order-box .info .product-info[data-v-2e52b2e4]{flex:1;display:flex;flex-direction:column;justify-content:space-between;margin-left:%?16?%}.chat-scroll-box .chat-item .order-box .info .product-info .name[data-v-2e52b2e4]{font-size:%?26?%}.chat-scroll-box .chat-item .order-box .info .product-info .price[data-v-2e52b2e4]{font-size:%?30?%;color:#f74c31}.chat-scroll-box .chat-item.right-box[data-v-2e52b2e4]{flex-direction:row-reverse}.chat-scroll-box .chat-item.right-box .msg-box[data-v-2e52b2e4]{margin-left:0;margin-right:%?22?%;background-color:#9cec60}.chat-scroll-box .chat-item.right-box .img-box[data-v-2e52b2e4]{margin-left:0;margin-right:%?22?%}.chat-scroll-box .chat-item.right-box .product-box[data-v-2e52b2e4]{margin-left:0;margin-right:%?22?%}.chat-scroll-box .chat-item.right-box .order-box[data-v-2e52b2e4]{margin-left:0;margin-right:%?22?%}.chat-scroll-box .chat-item .em[data-v-2e52b2e4]{margin:0}.broadcast-details_box[data-v-2e52b2e4]{display:flex;background:#fff;border-radius:6px;padding:%?24?%}.broadcast_details_img[data-v-2e52b2e4]{width:%?140?%;height:%?140?%;border-radius:8px;overflow:hidden;position:relative}.broadcast_details_img uni-image[data-v-2e52b2e4]{width:100%;height:100%}.broadcast_details_picBox[data-v-2e52b2e4]{width:75%;margin-left:%?24?%}.broadcast_details_tit[data-v-2e52b2e4]{font-size:%?28?%;color:#333;font-weight:800;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;text-align:left!important}.broadcast_details_pic[data-v-2e52b2e4]{font-size:%?36?%;color:#e93323;text-align:left}.broadcast_details_pic_num[data-v-2e52b2e4]{text-decoration:line-through;font-size:%?28?%;color:rgba(0,0,0,.5);margin-left:.1rem}.broadcast_details_btn[data-v-2e52b2e4]{width:%?130?%;height:%?50?%;background:#e83323;opacity:1;border-radius:%?125?%;color:#fff;font-size:%?24?%;text-align:center;line-height:%?50?%}.broadcast-details_num[data-v-2e52b2e4]{width:100%;height:%?80?%;line-height:%?80?%;color:#000;font-size:%?26?%;display:flex;justify-content:space-between;background:#fff;border-bottom:1px dashed rgba(0,0,0,.2);padding:0 %?24?%}.day-box[data-v-2e52b2e4]{font-size:%?24?%;color:#999;text-align:center;margin-bottom:%?36?%}',""]),t.exports=n},"9ceb":function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o={name:"Loading",props:{loaded:{type:Boolean,default:!1},loading:{type:Boolean,default:!1}}};n.default=o},"9d96":function(t,n,e){"use strict";var o;e.d(n,"b",(function(){return i})),e.d(n,"c",(function(){return a})),e.d(n,"a",(function(){return o}));var i=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("v-uni-view",[t.loading&&!t.loaded?e("v-uni-view",{staticClass:"Loads acea-row row-center-wrapper",staticStyle:{"margin-top":".2rem"}},[t.loading?e("v-uni-view",[e("v-uni-view",{staticClass:"iconfont icon-jiazai loading acea-row row-center-wrapper"}),t._v("正在加载中")],1):e("v-uni-view",[t._v("上拉加载更多")])],1):t._e()],1)},a=[]},a413:function(t,n,e){"use strict";var o=e("fd5e"),i=e.n(o);i.a},b1b2:function(t,n,e){"use strict";(function(t){var o=e("4ea4");e("99af"),e("4160"),e("baa5"),e("d81d"),e("acd8"),e("e25e"),e("ac1f"),e("5319"),e("159b"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=o(e("2909")),a=e("dfa2"),r=e("6301"),s=e("6525"),d=(o(e("b02d")),o(e("c991"))),c=o(e("b750")),u=getApp(),l=uni.getSystemInfoSync().statusBarHeight+"px",f=function(t,n){n=1*n||1;var e=[];return t.forEach((function(t,o){o%n===0&&e.push([]),e[e.length-1].push(t)})),e},p={name:"adminChat_index",data:function(){return{status:!1,loading:!1,sysHead:l,isTool:!1,isSwiper:!1,isWords:!1,autoplay:!1,circular:!0,interval:3e3,duration:500,emojiGroup:f(d.default,21),wordsList:[],con:"",toUid:0,limit:15,upperId:0,chatList:[],kefuInfo:{},scrollTop:0,active:!0,isScroll:!0,oldHeight:0,myUid:0,productId:0,productInfo:{},orderId:0,page:1,orderInfo:{},uidTo:0,titleName:"",chatStatus:!1}},components:{Loading:c.default},computed:{isSend:function(){return 0!=this.con.length},records:function(){var t=this;return this.chatList.map((function(n,e){return e?n.add_time-t.chatList[e-1].add_time>=300?n.show=!0:n.show=!1:n.show=!0,n}))}},onLoad:function(t){uni.showLoading({title:"客服连接中..."}),this.myUid=this.$store.state.app.uid,this.toUid=t.uid,this.productId=parseInt(t.productId)||0,this.orderId=t.orderId||0,this.getproductInfo(),this.getOrderInfo(),u.globalData.isWsOpen||this.$socket.onStart()},onUnload:function(){this.$socket.onClose()},onReady:function(){var t=this,n=document.querySelector(".chat-box");n.style.height=window.innerHeight+"px",u.globalData.isWsOpen&&(this.$socket.send({data:{token:this.$store.state.app.token,form_type:this.$wechat.isWeixin()?1:3},type:"login"}),this.getChatList()),uni.$once("socketOpen",(function(){t.$socket.send({data:t.$store.state.app.token,form_type:t.$wechat.isWeixin()?1:3,type:"login"}),t.getChatList()})),uni.$on("to_transfer",(function(n){t.toUid=n.toUid,t.$socket.send({data:{id:t.toUid},type:"to_chat"})})),uni.$once("success",(function(){t.$socket.init()})),uni.$on(["reply","chat"],(function(n){1==n.msn_type&&(n.msn=t.replace_em(n.msn)),n._add_time=n._add_time.substring(0,n._add_time.length-3),t.chatList.push(n),t.$nextTick((function(){t.height()}))})),uni.$on("socket_error",(function(){t.$util.Tips({title:"连接失败"})})),uni.$on("online",(function(t){0==t.online&&uni.showModal({title:"提示",content:"客服已下线，是否需要反馈？",success:function(t){t.confirm?uni.redirectTo({url:"/pages/columnGoods/HotNewGoods/feedback"}):t.cancel}})})),this.$nextTick((function(){t.height()}))},methods:{previewImage:function(t){uni.previewImage({urls:[t]})},goBack:function(){uni.navigateBack()},getproductInfo:function(){var t=this;this.productId&&(0,r.getProductDetail)(this.productId).then((function(n){t.productInfo=n.data.storeInfo}))},goProduct:function(t){uni.navigateTo({url:"/pages/goods_details/index?id=".concat(t.msn)})},goOrder:function(t){uni.navigateTo({url:"/pages/users/order_details/index?order_id=".concat(t.msn)})},getOrderInfo:function(){var t=this;this.orderId&&(0,s.getOrderDetail)(this.orderId).then((function(n){t.orderInfo=n.data,t.orderInfo.add_time_h&&(t.orderInfo.add_time_h=t.orderInfo.add_time_h.substring(0,t.orderInfo.add_time_h.lastIndexOf(":"))),t.orderInfo.cartInfo.length&&(t.cartInfo=t.orderInfo.cartInfo[0])}))},addEmoji:function(t){var n="[".concat(t,"]");this.con+=n},replace_em:function(t){return t=t.replace(/\[em-([a-z_]*)\]/g,"<span class='em em-$1'/></span>"),t},getChatList:function(){var t=this;(0,a.getChatRecord)({limit:this.limit,uidTo:this.uidTo,toUid:this.toUid}).then((function(n){var e="";n.data.serviceList.length&&(e=0==t.uidTo?"#msg-".concat(n.data.serviceList[n.data.serviceList.length-1].id):"#msg-".concat(t.chatList[0].id));uni.hideLoading(),uni.setNavigationBarTitle({title:n.data.nickname}),t.titleName=n.data.nickname,t.toUid=n.data.uid,n.data.serviceList.forEach((function(n){n._add_time=n._add_time.substring(0,n._add_time.length-3),1!=n.msn_type&&2!=n.msn_type||(n.msn=t.replace_em(n.msn))})),t.loading=!1,t.chatList=[].concat((0,i.default)(n.data.serviceList),(0,i.default)(t.chatList)),t.$nextTick((function(){t.setPageScrollTo(e),t.isScroll=n.data.serviceList.length>=t.limit})),t.$socket.send({data:{id:t.toUid},type:"to_chat"})})).catch((function(n){uni.hideLoading(),t.$util.Tips({title:n}),t.loading=!1,t.isScroll=!1,uni.redirectTo({url:"/pages/columnGoods/HotNewGoods/feedback"})}))},setPageScrollTo:function(t){var n=this,e=uni.createSelectorQuery().in(this).select(t);e.boundingClientRect((function(t){n.scrollTop=parseFloat(t.top)-60})).exec()},sendText:function(){if(!this.isSend)return this.$util.Tips({title:"请输入内容"});this.sendMsg(this.con,1),this.con=""},sendMsg:function(t,n){this.$socket.send({data:{msn:t,type:n,to_uid:this.toUid},form_type:this.$wechat.isWeixin()?1:3,type:"chat"})},uploadImg:function(){var t=this;t.$util.uploadImageOne("upload/image",(function(n){200==n.status&&t.sendMsg(n.data.url,3)}))},sendProduct:function(){this.sendMsg(this.productId,5),this.productId=0,this.productInfo={}},sendOrder:function(){this.sendMsg(this.orderId,6),this.orderId=0,this.orderInfo={}},height:function(){var t=this,n=0,e=uni.createSelectorQuery().select(".chat");setTimeout((function(o){e.boundingClientRect((function(e){e.height,n=e.height,t.active?t.scrollTop=parseInt(n)+500:t.scrollTop=parseInt(n)+100})).exec()}),1e3)},scrollToTop:function(){var t=this;this.isScroll&&(this.loading=!0,this.uidTo=this.chatList[0].id,this.isScroll=!1,setTimeout((function(n){t.getChatList()}),800))}}};n.default=p}).call(this,e("5a52")["default"])},b750:function(t,n,e){"use strict";e.r(n);var o=e("9d96"),i=e("e3dd");for(var a in i)"default"!==a&&function(t){e.d(n,t,(function(){return i[t]}))}(a);e("61f7");var r,s=e("f0c5"),d=Object(s["a"])(i["default"],o["b"],o["c"],!1,null,"60697522",null,!1,o["a"],r);n["default"]=d.exports},baa5:function(t,n,e){var o=e("23e7"),i=e("e58c");o({target:"Array",proto:!0,forced:i!==[].lastIndexOf},{lastIndexOf:i})},bd02:function(t,n,e){var o=e("286e");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var i=e("4f06").default;i("d29df3c6",o,!0,{sourceMap:!1,shadowMode:!1})},c991:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=["em-smile","em-laughing","em-blush","em-smiley","em-relaxed","em-smirk","em-heart_eyes","em-kissing_heart","em-kissing_closed_eyes","em-flushed","em-relieved","em-satisfied","em-grin","em-wink","em-stuck_out_tongue_winking_eye","em-stuck_out_tongue_closed_eyes","em-grinning","em-kissing","em-kissing_smiling_eyes","em-stuck_out_tongue","em-sleeping","em-worried","em-frowning","em-anguished","em-open_mouth","em-grimacing","em-confused","em-hushed","em-expressionless","em-unamused","em-sweat_smile","em-sweat","em-disappointed_relieved","em-weary","em-pensive","em-disappointed","em-confounded","em-fearful","em-cold_sweat","em-persevere","em-cry","em-sob","em-joy","em-astonished","em-scream","em-tired_face","em-angry","em-rage","em-triumph","em-sleepy","em-yum","em-mask","em-sunglasses","em-dizzy_face","em-imp","em-smiling_imp","em-neutral_face","em-no_mouth","em-innocent","em-alien"];n.default=o},d9a0:function(t,n,e){"use strict";var o;e.d(n,"b",(function(){return i})),e.d(n,"c",(function(){return a})),e.d(n,"a",(function(){return o}));var i=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("v-uni-view",{staticClass:"chat-box"},[e("v-uni-view",{staticClass:"broadcast-details_order"},[t.productId&&t.productInfo.id?e("v-uni-view",{staticClass:"broadcast-details_box"},[e("v-uni-view",{staticClass:"broadcast_details_img"},[e("v-uni-image",{attrs:{src:t.productInfo.image}})],1),e("v-uni-view",{staticClass:"broadcast_details_picBox"},[e("v-uni-view",{staticClass:"broadcast_details_tit",domProps:{textContent:t._s(t.productInfo.store_name)}}),e("v-uni-view",{staticClass:"acea-row row-between"},[e("v-uni-view",{staticClass:"broadcast_details_pic"},[t._v("￥"+t._s(t.productInfo.price)),e("v-uni-text",{staticClass:"broadcast_details_pic_num"},[t._v("￥"+t._s(t.productInfo.ot_price))])],1),e("v-uni-view",{staticClass:"broadcast_details_btn",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.sendProduct.apply(void 0,arguments)}}},[t._v("发送客服")])],1)],1)],1):t._e(),t.orderId&&t.orderInfo.id?e("v-uni-view",{staticClass:"broadcast_box"},[e("v-uni-view",{staticClass:"broadcast-details_num broadcast_num"},[e("v-uni-text",[t._v("订单号："+t._s(t.orderInfo.order_id))]),e("v-uni-text",[t._v(t._s(t.orderInfo.add_time_y)+" "+t._s(t.orderInfo.add_time_h))])],1),e("v-uni-view",{staticClass:"broadcast-details_box"},[e("v-uni-view",{staticClass:"broadcast_details_img"},[e("v-uni-image",{attrs:{src:t.orderInfo.cartInfo[0].productInfo.image}}),e("v-uni-view",{staticClass:"broadcast_details_model"},[t._v(t._s(t.orderInfo.cartInfo?t.orderInfo.cartInfo.length:0)+"件商品")])],1),e("v-uni-view",{staticClass:"broadcast_details_picBox"},[e("v-uni-view",{staticClass:"broadcast_details_tit"},[t._v(t._s(t.orderInfo.cartInfo[0].productInfo.store_name))]),e("v-uni-view",{staticClass:"acea-row row-between"},[e("v-uni-view",{staticClass:"broadcast_details_pic"},[t._v("￥"+t._s(t.orderInfo.cartInfo[0].productInfo.price)),e("v-uni-text",{staticClass:"broadcast_details_pic_num"},[t._v("￥"+t._s(t.orderInfo.cartInfo[0].productInfo.ot_price))])],1),e("v-uni-view",{staticClass:"broadcast_details_btn",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.sendOrder.apply(void 0,arguments)}}},[t._v("发送客服")])],1)],1)],1)],1):t._e()],1),e("v-uni-view",{staticClass:"chat-scroll-box"},[e("v-uni-scroll-view",{staticStyle:{height:"100%"},attrs:{"scroll-y":"true","scroll-top":t.scrollTop},on:{scrolltoupper:function(n){arguments[0]=n=t.$handleEvent(n),t.scrollToTop.apply(void 0,arguments)}}},[e("Loading",{attrs:{loaded:t.status,loading:t.loading}}),e("v-uni-view",{ref:"chat",staticClass:"chat",attrs:{id:"box"}},t._l(t.records,(function(n,o){return e("v-uni-view",{key:o,attrs:{id:"msg-"+n.id}},[n.show?e("v-uni-view",{staticClass:"day-box"},[t._v(t._s(n._add_time))]):t._e(),e("v-uni-view",{staticClass:"chat-item",class:{"right-box":n.uid==t.myUid}},[e("v-uni-image",{staticClass:"avatar",attrs:{src:n.avatar,mode:""}}),n.msn_type<=2?e("v-uni-view",{staticClass:"msg-box",domProps:{innerHTML:t._s(n.msn)}}):t._e(),3==n.msn_type?e("v-uni-view",{staticClass:"img-box"},[e("v-uni-image",{attrs:{src:n.msn,mode:"widthFix"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.previewImage(n.msn)}}})],1):t._e(),5==n.msn_type?e("v-uni-view",{staticClass:"product-box",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goProduct(n)}}},[e("v-uni-image",{attrs:{src:n.productInfo.image,mode:"widthFix"}}),e("v-uni-view",{staticClass:"info"},[e("v-uni-view",{staticClass:"price"},[e("v-uni-text",[t._v("￥")]),t._v(t._s(n.productInfo.price))],1),e("v-uni-view",{staticClass:"name line2"},[t._v(t._s(n.productInfo.store_name))])],1)],1):t._e(),6==n.msn_type?e("v-uni-view",{staticClass:"order-box",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goOrder(n)}}},[e("v-uni-view",{staticClass:"title"},[t._v("订单ID: "+t._s(n.orderInfo.order_id))]),e("v-uni-view",{staticClass:"info"},[e("v-uni-image",{attrs:{src:n.orderInfo.cartInfo[0].productInfo.image}}),e("v-uni-view",{staticClass:"product-info"},[e("v-uni-view",{staticClass:"name line2"},[t._v(t._s(n.orderInfo.cartInfo[0].productInfo.store_name))]),e("v-uni-view",{staticClass:"price"},[t._v("¥"+t._s(n.orderInfo.cartInfo[0].productInfo.price))])],1)],1)],1):t._e()],1)],1)})),1)],1)],1),e("v-uni-view",{staticClass:"footer-box"},[e("v-uni-view",{staticClass:"words",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.uploadImg.apply(void 0,arguments)}}},[e("v-uni-text",{staticClass:"iconfont icon-tupian"})],1),e("v-uni-view",{staticClass:"input-box"},[e("v-uni-input",{attrs:{type:"text",placeholder:"请输入内容","confirm-type":"go"},on:{confirm:function(n){arguments[0]=n=t.$handleEvent(n),t.sendText.apply(void 0,arguments)}},model:{value:t.con,callback:function(n){t.con=n},expression:"con"}}),e("v-uni-text",{staticClass:"iconfont icon-fasong",class:{isSend:t.isSend},on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.sendText.apply(void 0,arguments)}}})],1),e("v-uni-view",{staticClass:"emoji",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.isSwiper=!t.isSwiper}}},[e("span",{staticClass:"iconfont icon-biaoqing"})])],1),t.isSwiper?e("v-uni-view",{staticClass:"banner slider-banner"},[t.emojiGroup.length>0?e("v-uni-swiper",{staticClass:"swiper-wrapper",attrs:{autoplay:t.autoplay,circular:t.circular,interval:t.interval,duration:t.duration}},[t._l(t.emojiGroup,(function(n,o){return[e("v-uni-swiper-item",t._l(n,(function(n){return e("i",{key:n,staticClass:"em",class:n,on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.addEmoji(n)}}})})),0)]}))],2):t._e()],1):t._e()],1)},a=[]},e3dd:function(t,n,e){"use strict";e.r(n);var o=e("9ceb"),i=e.n(o);for(var a in o)"default"!==a&&function(t){e.d(n,t,(function(){return o[t]}))}(a);n["default"]=i.a},f400:function(t,n,e){"use strict";e.r(n);var o=e("b1b2"),i=e.n(o);for(var a in o)"default"!==a&&function(t){e.d(n,t,(function(){return o[t]}))}(a);n["default"]=i.a},fd5e:function(t,n,e){var o=e("90ad");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var i=e("4f06").default;i("0422805c",o,!0,{sourceMap:!1,shadowMode:!1})}}]);