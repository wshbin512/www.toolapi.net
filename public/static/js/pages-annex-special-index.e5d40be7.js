(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-annex-special-index"],{"04d1":function(t,n,e){"use strict";e.r(n);var a=e("1a41"),o=e("52d8");for(var i in o)"default"!==i&&function(t){e.d(n,t,(function(){return o[t]}))}(i);var u,r=e("f0c5"),c=Object(r["a"])(o["default"],a["b"],a["c"],!1,null,"3618ab98",null,!1,a["a"],u);n["default"]=c.exports},"1a41":function(t,n,e){"use strict";var a;e.d(n,"b",(function(){return o})),e.d(n,"c",(function(){return i})),e.d(n,"a",(function(){return a}));var o=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("v-uni-view",[t._l(t.styleConfig,(function(n,a){return e("v-uni-view",{key:a},[e(n.name,{tag:"component",attrs:{index:a,dataConfig:n,tempArr:t.tempArr,iSshowH:t.iSshowH},on:{changeBarg:function(n){arguments[0]=n=t.$handleEvent(n),t.changeBarg.apply(void 0,arguments)},changeTab:function(n){arguments[0]=n=t.$handleEvent(n),t.changeTab.apply(void 0,arguments)},detail:function(n){arguments[0]=n=t.$handleEvent(n),t.goDetail.apply(void 0,arguments)}}})],1)})),t.tempArr.length&&"promotionList"==t.styleConfig[t.styleConfig.length-1].name?e("v-uni-view",{staticClass:"loadingicon acea-row row-center-wrapper"},[e("v-uni-text",{staticClass:"loading iconfont icon-jiazai",attrs:{hidden:0==t.loading}}),t._v(t._s(t.loadTitle))],1):t._e()],2)},i=[]},"2ea6":function(t,n,e){"use strict";var a=e("4ea4");e("99af"),e("4160"),e("d81d"),e("fb6a"),e("4e82"),e("a434"),e("b64b"),e("4d63"),e("ac1f"),e("25f0"),e("466d"),e("841c"),e("159b"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o,i=a(e("ade3")),u=a(e("5530")),r=a(e("10af")),c=e("8573"),s=e("ebfc"),d=a(e("6706")),l=e("26cb"),g=e("6301"),f=e("f30d"),h=e("5f0a"),p=a(e("1356")),v=(getApp(),o={computed:(0,l.mapGetters)(["isLogin","uid"]),components:(0,u.default)({pageFooter:p.default,couponWindow:r.default},d.default)},(0,i.default)(o,"computed",(0,l.mapGetters)(["isLogin"])),(0,i.default)(o,"data",(function(){return{styleConfig:[],tempArr:[],goodType:3,loading:!1,loadend:!1,loadTitle:"下拉加载更多",page:1,limit:this.$config.LIMIT,iSshowH:!1,numConfig:0,code:"",isCouponShow:!1,couponObj:{},couponObjs:{},shareInfo:{},footConfig:{},pageId:""}})),(0,i.default)(o,"onLoad",(function(t){var n=this;t.state,t.scope;this.pageId=t.id,uni.getLocation({type:"wgs84",success:function(t){try{uni.setStorageSync("user_latitude",t.latitude),uni.setStorageSync("user_longitude",t.longitude)}catch(n){}}}),this.diyData(),this.getIndexData(),this.setOpenShare(),(0,s.getShare)().then((function(t){n.shareInfo=t.data}))})),(0,i.default)(o,"watch",{isLogin:{deep:!0,handler:function(t,n){var e=(new Date).toLocaleDateString();if(t){try{var a=uni.getStorageSync("oldDate")||""}catch(o){}a!=e&&this.getCoupon()}}}}),(0,i.default)(o,"onShow",(function(){var t=(new Date).toLocaleDateString();if(this.isLogin){try{var n=uni.getStorageSync("oldDate")||""}catch(a){}n!=t&&this.getCoupon();var e=uni.getStorageSync("oldUser")||0;e||this.getCouponOnce()}})),(0,i.default)(o,"mounted",(function(){})),(0,i.default)(o,"methods",{getCouponOnce:function(){var t=this;(0,c.getCouponNewUser)().then((function(n){t.couponObjs=n.data}))},couponCloses:function(){this.couponObjs.show=!1;try{uni.setStorageSync("oldUser",1)}catch(t){}},getCoupon:function(){var t=this;(0,c.getCouponV2)().then((function(n){t.couponObj=n.data,n.data.list.length>0&&(t.isCouponShow=!0)}))},couponClose:function(){this.isCouponShow=!1;try{uni.setStorageSync("oldDate",(new Date).toLocaleDateString())}catch(t){}},onLoadFun:function(){},getQueryString:function(t){var n=new RegExp("(^|&)"+t+"=([^&]*)(&|$)","i"),e=new RegExp("(^|/)"+t+"/([^/]*)(/|$)","i"),a=window.location.search.substr(1).match(n),o=window.location.pathname.substr(1).match(e);return null!=a?unescape(a[2]):null!=o?unescape(o[2]):null},objToArr:function(t){var n=Object.keys(t);n.sort((function(t,n){return t-n}));var e=n.map((function(n){return t[n]}));return e},diyData:function(){var t=this,n=this;(0,c.getDiy)(this.pageId).then((function(e){if(0==e.data.length)return t.$util.Tips({title:"暂无数据"},{tab:3});uni.setNavigationBarTitle({title:e.data.title});var a=[],o=n.objToArr(e.data.value);o.forEach((function(t,e,o){"pageFoot"==t.name&&(uni.setStorageSync("pageFoot",t),n.$store.commit("FOOT_UPLOAD",t),o.splice(e,1)),"promotionList"==t.name&&(n.numConfig=t.numConfig.val,n.getGroomList()),a=o})),n.styleConfig=a}))},getIndexData:function(){},changeBarg:function(t){this.isLogin?uni.navigateTo({url:"/pages/activity/goods_bargain_details/index?id=".concat(t.id,"&bargain=").concat(this.uid)}):(0,h.toLogin)()},changeTab:function(t){this.goodType=t,this.tempArr=[],this.page=1,this.loadend=!1;var n=!0;this.getGroomList(n)},getGroomList:function(t){var n=this,e=this,a=e.goodType;return!e.loadend&&(!e.loading&&(t&&e.$set(e,"iSshowH",!0),void(0,g.getGroomList)(a,{page:e.page,limit:e.limit}).then((function(t){var a=t.data;e.$set(e,"iSshowH",!1);var o=Math.ceil(n.numConfig/n.limit),i=a.list,u=i.length<e.limit||e.page>=o,r=e.$util.SplitArray(i,e.tempArr);e.$set(e,"tempArr",r.slice(0,n.numConfig)),e.loadend=u,e.loadTitle=u?"我也是有底线的":"下拉加载更多",e.page=e.page+1,e.loading=!1})).catch((function(t){e.loading=!1,e.loadTitle="下拉加载更多"}))))},goDetail:function(t){(0,f.goShopDetail)(t,this.uid).then((function(n){uni.navigateTo({url:"/pages/goods_details/index?id=".concat(t.id)})}))},setOpenShare:function(){var t=this;t.$wechat.isWeixin()&&(0,s.getShare)().then((function(n){var e=n.data.data,a={desc:e.synopsis,title:e.title,link:location.href,imgUrl:e.img};t.$wechat.wechatEvevt(["updateAppMessageShareData","updateTimelineShareData"],a)}))}}),(0,i.default)(o,"onReachBottom",(function(){this.getGroomList()})),o);n.default=v},"52d8":function(t,n,e){"use strict";e.r(n);var a=e("2ea6"),o=e.n(a);for(var i in a)"default"!==i&&function(t){e.d(n,t,(function(){return a[t]}))}(i);n["default"]=o.a}}]);