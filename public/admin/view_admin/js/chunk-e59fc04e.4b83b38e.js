(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e59fc04e"],{"0363":function(e,t,a){"use strict";var i=a("cdf7"),r=a.n(i);r.a},"4aa7":function(e,t,a){},"61f7":function(e,t,a){"use strict";function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function r(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(a,!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function n(e,t){/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));var a={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds()};for(var i in a)if(new RegExp("(".concat(i,")")).test(t)){var r=a[i]+"";t=t.replace(RegExp.$1,1===RegExp.$1.length?r:s(r))}return t}function s(e){return("00"+e).substr(e.length)}a.d(t,"a",(function(){return n})),a.d(t,"c",(function(){return d})),a.d(t,"b",(function(){return m}));var l={min:"%s最小长度为:min",max:"%s最大长度为:max",length:"%s长度必须为:length",range:"%s长度为:range",pattern:"$s格式错误"};var c=function(e,t){e.message=function(e){return t.replace("%s",e||"")}};function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r({required:!0,message:e,type:"string"},t)}function m(e){return u.pattern(/(^[1-9]([0-9]+)?(\.[0-9]{1,2})?$)|(^(0){1}$)|(^[0-9]\.[0-9]([0-9])?$)/,e)}c(d,"请输入%s"),c(m,"%s格式不正确");var u=Object.keys(l).reduce((function(e,t){return e[t]=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n="range"===t?{min:e[0],max:e[1]}:o({},t,e);return r({message:a.replace(":".concat(t),"range"===t?"".concat(e[0],"-").concat(e[1]):e),type:"string"},n,{},i)},c(e[t],l[t]),e}),{})},"6c17":function(e,t,a){"use strict";var i=a("4aa7"),r=a.n(i);r.a},"6fd3":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Modal",{attrs:{scrollable:"",title:"添加商品规格",width:"950"},on:{"on-cancel":e.onCancel},model:{value:e.modal,callback:function(t){e.modal=t},expression:"modal"}},[a("Form",{ref:"formDynamic",staticClass:"attrFrom",attrs:{model:e.formDynamic,rules:e.rules,"label-width":e.labelWidth,"label-position":e.labelPosition},nativeOn:{submit:function(e){e.preventDefault()}}},[a("Row",{attrs:{gutter:24}},[a("Col",{attrs:{span:"24"}},[a("Col",{staticClass:"mb15",attrs:{span:"8"}},[a("FormItem",{attrs:{label:"规格模板名称：",prop:"rule_name"}},[a("Input",{attrs:{placeholder:"请输入标题名称",maxlength:20},model:{value:e.formDynamic.rule_name,callback:function(t){e.$set(e.formDynamic,"rule_name",t)},expression:"formDynamic.rule_name"}})],1)],1)],1),e._l(e.formDynamic.spec,(function(t,i){return a("Col",{key:i,staticClass:"noForm",attrs:{span:"23"}},[a("FormItem",[a("div",{staticClass:"acea-row row-middle"},[a("span",{staticClass:"mr5"},[e._v(e._s(t.value))]),a("Icon",{attrs:{type:"ios-close-circle"},on:{click:function(t){return e.handleRemove(i)}}})],1),a("div",{staticClass:"rulesBox"},[e._l(t.detail,(function(i,r){return a("Tag",{key:r,staticClass:"mb5",attrs:{type:"dot",closable:"",color:"primary",name:i},on:{"on-close":function(a){return e.handleRemove2(t.detail,r)}}},[e._v(e._s(i))])})),a("Input",{staticStyle:{width:"150px"},attrs:{search:"","enter-button":"添加",placeholder:"请输入属性名称"},on:{"on-search":function(a){return e.createAttr(t.detail.attrsVal,i)}},model:{value:t.detail.attrsVal,callback:function(a){e.$set(t.detail,"attrsVal",a)},expression:"item.detail.attrsVal"}})],2)])],1)})),e.isBtn?a("Col",{staticClass:"mt10",attrs:{span:"24"}},[a("Col",{staticClass:"mr15",attrs:{span:"8"}},[a("FormItem",{attrs:{label:"规格名称："}},[a("Input",{attrs:{placeholder:"请输入规格"},model:{value:e.attrsName,callback:function(t){e.attrsName=t},expression:"attrsName"}})],1)],1),a("Col",{staticClass:"mr20",attrs:{span:"8"}},[a("FormItem",{attrs:{label:"规格值："}},[a("Input",{attrs:{placeholder:"请输入规格值"},model:{value:e.attrsVal,callback:function(t){e.attrsVal=t},expression:"attrsVal"}})],1)],1),a("Col",{attrs:{span:"2"}},[a("Button",{attrs:{type:"primary"},on:{click:e.createAttrName}},[e._v("确定")])],1),a("Col",{attrs:{span:"2"}},[a("Button",{on:{click:e.offAttrName}},[e._v("取消")])],1)],1):e._e(),e.spinShow?a("Spin",{attrs:{size:"large",fix:""}}):e._e()],2),e.isBtn?e._e():a("Button",{staticClass:"ml95 mt10",attrs:{type:"primary",icon:"md-add"},on:{click:e.addBtn}},[e._v("添加新规格")])],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary",loading:e.modal_loading},on:{click:function(t){return e.handleSubmit("formDynamic")}}},[e._v("确定")])],1)],1)},r=[],o=a("2f62"),n=a("c4c8");function s(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?s(a,!0).forEach((function(t){c(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):s(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var d={name:"addAttr",data:function(){return{spinShow:!1,modal_loading:!1,grid:{xl:3,lg:3,md:12,sm:24,xs:24},modal:!1,index:1,rules:{rule_name:[{required:!0,message:"请输入规格名称",trigger:"blur"}]},formDynamic:{rule_name:"",spec:[]},attrsName:"",attrsVal:"",formDynamicNameData:[],isBtn:!1,formDynamicName:[],results:[],result:[],ids:0}},computed:l({},Object(o["e"])("admin/layout",["isMobile"]),{labelWidth:function(){return this.isMobile?void 0:95},labelPosition:function(){return this.isMobile?"top":"right"}}),methods:{onCancel:function(){this.clear()},addBtn:function(){this.isBtn=!0},getIofo:function(e){var t=this;this.spinShow=!0,this.ids=e.id,Object(n["A"])(e.id).then((function(e){t.formDynamic=e.data.info,t.spinShow=!1})).catch((function(e){t.spinShow=!1,t.$Message.error(e.msg)}))},handleSubmit:function(e){var t=this;this.$refs[e].validate((function(e){return!!e&&(0===t.formDynamic.spec.length?t.$Message.warning("请至少添加一条商品规格！"):(t.modal_loading=!0,void setTimeout((function(){Object(n["z"])(t.formDynamic,t.ids).then((function(e){t.$Message.success(e.msg),setTimeout((function(){t.modal=!1,t.modal_loading=!1}),500),setTimeout((function(){t.$emit("getList"),t.clear()}),600)})).catch((function(e){t.modal_loading=!1,t.$Message.error(e.msg)}))}),1200)))}))},clear:function(){this.$refs["formDynamic"].resetFields(),this.formDynamic.spec=[],this.isBtn=!1,this.attrsName="",this.attrsVal=""},offAttrName:function(){this.isBtn=!1},handleRemove:function(e){this.formDynamic.spec.splice(e,1)},handleRemove2:function(e,t){e.splice(t,1)},createAttrName:function(){if(this.attrsName&&this.attrsVal){var e={value:this.attrsName,detail:[this.attrsVal]};this.formDynamic.spec.push(e);var t={};this.formDynamic.spec=this.formDynamic.spec.reduce((function(e,a){return!t[a.value]&&(t[a.value]=e.push(a)),e}),[]),this.attrsName="",this.attrsVal="",this.isBtn=!1}else this.$Message.warning("请添加规格名称或规格值")},createAttr:function(e,t){if(e){this.formDynamic.spec[t].detail.push(e);var a={};this.formDynamic.spec[t].detail=this.formDynamic.spec[t].detail.reduce((function(e,t){return!a[t]&&(a[t]=e.push(t)),e}),[])}else this.$Message.warning("请添加属性")}}},m=d,u=(a("0363"),a("2877")),p=Object(u["a"])(m,i,r,!1,null,"ac4f1888",null);t["a"]=p.exports},"774e":function(e,t,a){"use strict";var i=a("8c9d"),r=a.n(i);r.a},"8c9d":function(e,t,a){},c7e8:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"article-manager video-icon",attrs:{id:"shopp-manager"}},[a("div",{staticClass:"i-layout-page-header"},[a("PageHeader",{staticClass:"product_tabs",attrs:{"hidden-breadcrumb":""}},[a("div",{attrs:{slot:"title"},slot:"title"},[a("router-link",{attrs:{to:{path:"/admin/product/product_list"}}},[a("Button",{staticClass:"mr20",attrs:{icon:"ios-arrow-back",size:"small"}},[e._v("返回")])],1),a("span",{staticClass:"mr20",domProps:{textContent:e._s(e.$route.params.id?"编辑商品":"添加商品")}})],1)])],1),a("Card",{staticClass:"ivu-mt",attrs:{bordered:!1,"dis-hover":""}},[a("Tabs",{on:{"on-click":e.onhangeTab},model:{value:e.currentTab,callback:function(t){e.currentTab=t},expression:"currentTab"}},[a("TabPane",{attrs:{label:"商品信息",name:"1"}}),a("TabPane",{attrs:{label:"商品详情",name:"2"}}),a("TabPane",{attrs:{label:"其他设置",name:"3"}})],1),a("Form",{ref:"formValidate",staticClass:"formValidate mt20",attrs:{rules:e.ruleValidate,model:e.formValidate,"label-width":e.labelWidth,"label-position":e.labelPosition},nativeOn:{submit:function(e){e.preventDefault()}}},[a("Row",{directives:[{name:"show",rawName:"v-show",value:"1"===e.currentTab,expression:"currentTab === '1'"}],attrs:{gutter:24,type:"flex"}},[a("Col",e._b({},"Col",e.grid3,!1),[a("FormItem",{attrs:{label:"归属门店："}},[e.storesName.length?a("div",{staticClass:"mb20"},e._l(e.storesName,(function(t,i){return a("Tag",{key:i,attrs:{closable:""},on:{"on-close":function(a){return e.handleStoreClose(t)}}},[e._v(e._s(t.name))])})),1):e._e(),a("Button",{attrs:{type:"primary"},on:{click:e.addStores}},[e._v("选择门店")])],1)],1),a("Col",{attrs:{span:"24"}},[a("FormItem",{attrs:{label:"商品名称：",prop:"store_name"}},[a("Input",{directives:[{name:"width",rawName:"v-width",value:"50%",expression:"'50%'"}],attrs:{placeholder:"请输入商品名称"},model:{value:e.formValidate.store_name,callback:function(t){e.$set(e.formValidate,"store_name",t)},expression:"formValidate.store_name"}})],1)],1),a("Col",{attrs:{span:"24"}},[a("FormItem",{attrs:{label:"商品分类：",prop:"cate_id"}},[a("Select",{directives:[{name:"width",rawName:"v-width",value:"50%",expression:"'50%'"}],attrs:{multiple:""},model:{value:e.formValidate.cate_id,callback:function(t){e.$set(e.formValidate,"cate_id",t)},expression:"formValidate.cate_id"}},e._l(e.treeSelect,(function(t){return a("Option",{key:t.id,attrs:{disabled:0===t.pid,value:t.id}},[e._v(e._s(t.html+t.cate_name))])})),1)],1)],1),a("Col",{attrs:{span:"24"}},[a("FormItem",{attrs:{label:"商品关键字：",prop:""}},[a("Input",{directives:[{name:"width",rawName:"v-width",value:"50%",expression:"'50%'"}],attrs:{placeholder:"请输入商品关键字"},model:{value:e.formValidate.keyword,callback:function(t){e.$set(e.formValidate,"keyword",t)},expression:"formValidate.keyword"}})],1)],1),a("Col",{attrs:{span:"24"}},[a("FormItem",{attrs:{label:"单位：",prop:"unit_name"}},[a("Input",{directives:[{name:"width",rawName:"v-width",value:"50%",expression:"'50%'"}],attrs:{placeholder:"请输入单位"},model:{value:e.formValidate.unit_name,callback:function(t){e.$set(e.formValidate,"unit_name",t)},expression:"formValidate.unit_name"}})],1)],1),a("Col",{attrs:{span:"24"}},[a("FormItem",{attrs:{label:"商品简介：",prop:""}},[a("Input",{directives:[{name:"width",rawName:"v-width",value:"50%",expression:"'50%'"}],attrs:{type:"textarea",rows:3,placeholder:"请输入商品简介"},model:{value:e.formValidate.store_info,callback:function(t){e.$set(e.formValidate,"store_info",t)},expression:"formValidate.store_info"}})],1)],1),a("Col",{attrs:{span:"24"}},[a("FormItem",{attrs:{label:"商品封面图：",prop:"image"}},[a("div",{staticClass:"pictrueBox",on:{click:function(t){return e.modalPicTap("dan","danFrom")}}},[e.formValidate.image?a("div",{staticClass:"pictrue"},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.formValidate.image,expression:"formValidate.image"}]}),a("Input",{staticStyle:{display:"none"},model:{value:e.formValidate.image,callback:function(t){e.$set(e.formValidate,"image",t)},expression:"formValidate.image"}})],1):a("div",{staticClass:"upLoad acea-row row-center-wrapper"},[a("Input",{staticStyle:{display:"none"},model:{value:e.formValidate.image,callback:function(t){e.$set(e.formValidate,"image",t)},expression:"formValidate.image"}}),a("Icon",{attrs:{type:"ios-camera-outline",size:"26"}})],1)]),a("div",{staticClass:"tips"},[e._v("(345*345)")])])],1),a("Col",{attrs:{span:"24"}},[a("FormItem",{attrs:{label:"商品推荐图："}},[a("div",{staticClass:"pictrueBox",on:{click:function(t){return e.modalPicTap("dan","recommend_image")}}},[e.formValidate.recommend_image?a("div",{staticClass:"pictrue"},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.formValidate.recommend_image,expression:"formValidate.recommend_image"}]}),a("Input",{staticStyle:{display:"none"},model:{value:e.formValidate.recommend_image,callback:function(t){e.$set(e.formValidate,"recommend_image",t)},expression:"formValidate.recommend_image"}})],1):a("div",{staticClass:"upLoad acea-row row-center-wrapper"},[a("Input",{staticStyle:{display:"none"},model:{value:e.formValidate.recommend_image,callback:function(t){e.$set(e.formValidate,"recommend_image",t)},expression:"formValidate.recommend_image"}}),a("Icon",{attrs:{type:"ios-camera-outline",size:"26"}})],1)])])],1),a("Col",{attrs:{span:"24"}},[a("FormItem",{attrs:{label:"商品轮播图：",prop:"slider_image"}},[a("div",{staticClass:"acea-row"},[e._l(e.formValidate.slider_image,(function(t,i){return a("div",{key:i,staticClass:"pictrue",attrs:{draggable:"true"},on:{dragstart:function(a){return e.handleDragStart(a,t)},dragover:function(a){return a.preventDefault(),e.handleDragOver(a,t)},dragenter:function(a){return e.handleDragEnter(a,t)},dragend:function(a){return e.handleDragEnd(a,t)}}},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t,expression:"item"}]}),a("Button",{staticClass:"btndel",attrs:{shape:"circle",icon:"md-close"},nativeOn:{click:function(t){return e.handleRemove(i)}}})],1)})),e.formValidate.slider_image.length<10?a("div",{staticClass:"upLoad acea-row row-center-wrapper",on:{click:function(t){return e.modalPicTap("duo")}}},[a("Icon",{attrs:{type:"ios-camera-outline",size:"26"}})],1):e._e(),a("Input",{staticStyle:{display:"none"},model:{value:e.formValidate.slider_image[0],callback:function(t){e.$set(e.formValidate.slider_image,0,t)},expression:"formValidate.slider_image[0]"}})],2),a("div",{staticClass:"tips"},[e._v("(最多10张"),a("br"),e._v("750*750)")])])],1),a("Col",{attrs:{span:"24"}},[a("FormItem",{attrs:{label:"主图视频：",prop:"video_link"}},[a("Input",{directives:[{name:"width",rawName:"v-width",value:"50%",expression:"'50%'"}],attrs:{placeholder:"请输入视频链接"},model:{value:e.videoLink,callback:function(t){e.videoLink=t},expression:"videoLink"}}),a("input",{ref:"refid",staticStyle:{display:"none"},attrs:{type:"file"},on:{change:e.zh_uploadFile_change}}),a("Button",{staticClass:"uploadVideo",attrs:{type:"primary",icon:"ios-cloud-upload-outline"},on:{click:e.zh_uploadFile}},[e._v(e._s(e.videoLink?"确认添加":"上传视频"))]),e.upload.videoIng?a("Progress",{attrs:{percent:e.progress,"stroke-width":5}}):e._e(),e.formValidate.video_link?a("div",{staticClass:"iview-video-style"},[a("video",{staticStyle:{width:"100%",height:"100% !important","border-radius":"10px"},attrs:{src:e.formValidate.video_link,controls:"controls"}},[e._v("\n                  您的浏览器不支持 video 标签。\n                ")]),a("div",{staticClass:"mark"}),a("Icon",{staticClass:"iconv",attrs:{type:"ios-trash-outline"},on:{click:e.delVideo}})],1):e._e()],1)],1),a("Col",{attrs:{span:"24"}},[a("FormItem",{attrs:{label:"商品规格：",props:"spec_type"}},[a("RadioGroup",{on:{"on-change":e.changeSpec},model:{value:e.formValidate.spec_type,callback:function(t){e.$set(e.formValidate,"spec_type",t)},expression:"formValidate.spec_type"}},[a("Radio",{staticClass:"radio",attrs:{label:0}},[e._v("单规格")]),a("Radio",{attrs:{label:1}},[e._v("多规格")])],1)],1)],1),1===e.formValidate.spec_type?a("Col",{staticClass:"noForm",attrs:{span:"24"}},[a("Col",{attrs:{span:"24"}},[a("FormItem",{attrs:{label:"选择规格：",prop:""}},[a("div",{staticClass:"acea-row row-middle"},[a("Select",{staticStyle:{width:"23%"},model:{value:e.formValidate.selectRule,callback:function(t){e.$set(e.formValidate,"selectRule",t)},expression:"formValidate.selectRule"}},e._l(e.ruleList,(function(t,i){return a("Option",{key:i,attrs:{value:t.rule_name}},[e._v(e._s(t.rule_name))])})),1),a("Button",{staticClass:"mr20",attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确认")]),a("Button",{on:{click:e.addRule}},[e._v("添加规格模板")])],1)])],1),a("Col",{attrs:{span:"24"}},[0!==e.attrs.length?a("FormItem",[a("draggable",{staticClass:"dragArea list-group",attrs:{list:e.attrs,group:"peoples",handle:".move-icon",move:e.checkMove},on:{end:e.end}},e._l(e.attrs,(function(t,i){return a("div",{key:i,staticClass:"acea-row row-middle mb10"},[a("div",{staticClass:"move-icon"},[a("span",{staticClass:"iconfont icondrag2"})]),a("div",{class:e.moveIndex===i?"borderStyle":"",staticStyle:{width:"90%"}},[a("div",{staticClass:"acea-row row-middle"},[a("span",{staticClass:"mr5"},[e._v(e._s(t.value))]),a("Icon",{staticClass:"curs",attrs:{type:"ios-close-circle",size:"14"},on:{click:function(t){return e.handleRemoveRole(i)}}})],1),a("div",{staticClass:"rulesBox"},[a("draggable",{attrs:{list:t.detail,handle:".drag"}},e._l(t.detail,(function(i,r){return a("Tag",{key:r,staticClass:"mr20 drag",attrs:{type:"dot",closable:"",color:"primary",name:i},on:{"on-close":function(a){return e.handleRemove2(t.detail,r)}}},[e._v(e._s(i))])})),1),a("Input",{staticStyle:{width:"150px"},attrs:{search:"","enter-button":"添加",placeholder:"请输入属性名称"},on:{"on-search":function(a){return e.createAttr(t.detail.attrsVal,i)}},model:{value:t.detail.attrsVal,callback:function(a){e.$set(t.detail,"attrsVal",a)},expression:"item.detail.attrsVal"}})],1)])])})),0)],1):e._e()],1),e.createBnt?a("Col",{attrs:{span:"24"}},[a("FormItem",[a("Button",{staticClass:"mr15",attrs:{type:"primary",icon:"md-add"},on:{click:e.addBtn}},[e._v("添加新规格")]),a("Button",{attrs:{type:"success"},on:{click:function(t){return e.generate(1)}}},[e._v("立即生成")])],1)],1):e._e(),e.showIput?a("Col",{attrs:{span:"24"}},[a("Col",{attrs:{xl:6,lg:9,md:10,sm:24,xs:24}},[a("FormItem",{attrs:{label:"规格："}},[a("Input",{attrs:{placeholder:"请输入规格"},model:{value:e.formDynamic.attrsName,callback:function(t){e.$set(e.formDynamic,"attrsName",t)},expression:"formDynamic.attrsName"}})],1)],1),a("Col",{attrs:{xl:6,lg:9,md:10,sm:24,xs:24}},[a("FormItem",{attrs:{label:"规格值："}},[a("Input",{attrs:{placeholder:"请输入规格值"},model:{value:e.formDynamic.attrsVal,callback:function(t){e.$set(e.formDynamic,"attrsVal",t)},expression:"formDynamic.attrsVal"}})],1)],1),a("Col",{attrs:{xl:6,lg:5,md:10,sm:24,xs:24}},[a("FormItem",[a("Button",{staticClass:"mr15",attrs:{type:"primary"},on:{click:e.createAttrName}},[e._v("确定")]),a("Button",{on:{click:e.offAttrName}},[e._v("取消")])],1)],1)],1):e._e(),e.manyFormValidate.length&&0!==e.formValidate.header.length&&0!==e.attrs.length?a("Col",{attrs:{xl:24,lg:24,md:24,sm:24,xs:24}},[a("Col",{attrs:{span:"24"}},[a("FormItem",{staticClass:"labeltop",attrs:{label:"批量设置："}},[a("Table",{attrs:{data:e.oneFormBatch,columns:e.columns2,border:""},scopedSlots:e._u([{key:"pic",fn:function(t){t.row;var i=t.index;return[a("div",{staticClass:"acea-row row-middle row-center-wrapper",on:{click:function(t){return e.modalPicTap("dan","duopi",i)}}},[e.oneFormBatch[0].pic?a("div",{staticClass:"pictrue pictrueTab"},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.oneFormBatch[0].pic,expression:"oneFormBatch[0].pic"}]})]):a("div",{staticClass:"upLoad pictrueTab acea-row row-center-wrapper"},[a("Icon",{staticClass:"iconfont",attrs:{type:"ios-camera-outline",size:"21"}})],1)])]}},{key:"price",fn:function(t){t.row,t.index;return[a("InputNumber",{staticClass:"priceBox",attrs:{min:0},model:{value:e.oneFormBatch[0].price,callback:function(t){e.$set(e.oneFormBatch[0],"price",t)},expression:"oneFormBatch[0].price"}})]}},{key:"cost",fn:function(t){t.row,t.index;return[a("InputNumber",{staticClass:"priceBox",attrs:{min:0},model:{value:e.oneFormBatch[0].cost,callback:function(t){e.$set(e.oneFormBatch[0],"cost",t)},expression:"oneFormBatch[0].cost"}})]}},{key:"ot_price",fn:function(t){t.row,t.index;return[a("InputNumber",{staticClass:"priceBox",attrs:{min:0},model:{value:e.oneFormBatch[0].ot_price,callback:function(t){e.$set(e.oneFormBatch[0],"ot_price",t)},expression:"oneFormBatch[0].ot_price"}})]}},{key:"stock",fn:function(t){t.row,t.index;return[a("InputNumber",{staticClass:"priceBox",attrs:{min:0},model:{value:e.oneFormBatch[0].stock,callback:function(t){e.$set(e.oneFormBatch[0],"stock",t)},expression:"oneFormBatch[0].stock"}})]}},{key:"bar_code",fn:function(t){t.row,t.index;return[a("Input",{model:{value:e.oneFormBatch[0].bar_code,callback:function(t){e.$set(e.oneFormBatch[0],"bar_code",t)},expression:"oneFormBatch[0].bar_code"}})]}},{key:"weight",fn:function(t){t.row,t.index;return[a("InputNumber",{staticClass:"priceBox",attrs:{step:.1,min:0},model:{value:e.oneFormBatch[0].weight,callback:function(t){e.$set(e.oneFormBatch[0],"weight",t)},expression:"oneFormBatch[0].weight"}})]}},{key:"volume",fn:function(t){t.row,t.index;return[a("InputNumber",{staticClass:"priceBox",attrs:{step:.1,min:0},model:{value:e.oneFormBatch[0].volume,callback:function(t){e.$set(e.oneFormBatch[0],"volume",t)},expression:"oneFormBatch[0].volume"}})]}},{key:"action",fn:function(t){t.row,t.index;return[a("a",{on:{click:e.batchAdd}},[e._v("批量添加")]),a("Divider",{attrs:{type:"vertical"}}),a("a",{on:{click:e.batchDel}},[e._v("清空")])]}}],null,!1,3704724412)})],1)],1),a("Col",{attrs:{span:"24"}},[a("FormItem",{staticClass:"labeltop",attrs:{label:"商品属性："}},[a("Table",{attrs:{data:e.manyFormValidate,columns:e.formValidate.header,border:""},scopedSlots:e._u([{key:"pic",fn:function(t){t.row;var i=t.index;return[a("div",{staticClass:"acea-row row-middle row-center-wrapper",on:{click:function(t){return e.modalPicTap("dan","duoTable",i)}}},[e.manyFormValidate[i].pic?a("div",{staticClass:"pictrue pictrueTab"},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.manyFormValidate[i].pic,expression:"manyFormValidate[index].pic"}]})]):a("div",{staticClass:"upLoad pictrueTab acea-row row-center-wrapper"},[a("Icon",{staticClass:"iconfont",attrs:{type:"ios-camera-outline",size:"21"}})],1)])]}},{key:"price",fn:function(t){t.row;var i=t.index;return[a("InputNumber",{staticClass:"priceBox",attrs:{min:0},model:{value:e.manyFormValidate[i].price,callback:function(t){e.$set(e.manyFormValidate[i],"price",t)},expression:"manyFormValidate[index].price"}})]}},{key:"cost",fn:function(t){t.row;var i=t.index;return[a("InputNumber",{staticClass:"priceBox",attrs:{min:0},model:{value:e.manyFormValidate[i].cost,callback:function(t){e.$set(e.manyFormValidate[i],"cost",t)},expression:"manyFormValidate[index].cost"}})]}},{key:"ot_price",fn:function(t){t.row;var i=t.index;return[a("InputNumber",{staticClass:"priceBox",attrs:{min:0},model:{value:e.manyFormValidate[i].ot_price,callback:function(t){e.$set(e.manyFormValidate[i],"ot_price",t)},expression:"manyFormValidate[index].ot_price"}})]}},{key:"stock",fn:function(t){t.row;var i=t.index;return[a("InputNumber",{staticClass:"priceBox",attrs:{min:0,precision:0},model:{value:e.manyFormValidate[i].stock,callback:function(t){e.$set(e.manyFormValidate[i],"stock",t)},expression:"manyFormValidate[index].stock"}})]}},{key:"bar_code",fn:function(t){t.row;var i=t.index;return[a("Input",{model:{value:e.manyFormValidate[i].bar_code,callback:function(t){e.$set(e.manyFormValidate[i],"bar_code",t)},expression:"manyFormValidate[index].bar_code"}})]}},{key:"weight",fn:function(t){t.row;var i=t.index;return[a("InputNumber",{staticClass:"priceBox",attrs:{min:0},model:{value:e.manyFormValidate[i].weight,callback:function(t){e.$set(e.manyFormValidate[i],"weight",t)},expression:"manyFormValidate[index].weight"}})]}},{key:"volume",fn:function(t){t.row;var i=t.index;return[a("InputNumber",{staticClass:"priceBox",attrs:{min:0},model:{value:e.manyFormValidate[i].volume,callback:function(t){e.$set(e.manyFormValidate[i],"volume",t)},expression:"manyFormValidate[index].volume"}})]}},{key:"action",fn:function(t){t.row;var i=t.index;return[a("a",{on:{click:function(t){return e.delAttrTable(i)}}},[e._v("删除")])]}}],null,!1,3313981262)})],1)],1)],1):e._e()],1):e._e(),0===e.formValidate.spec_type?a("Col",{attrs:{xl:23,lg:24,md:24,sm:24,xs:24}},[a("FormItem",[a("Table",{attrs:{data:e.oneFormValidate,columns:e.columns,border:""},scopedSlots:e._u([{key:"pic",fn:function(t){t.row;var i=t.index;return[a("div",{staticClass:"acea-row row-middle row-center-wrapper",on:{click:function(t){return e.modalPicTap("dan","danTable",i)}}},[e.oneFormValidate[0].pic?a("div",{staticClass:"pictrue pictrueTab"},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.oneFormValidate[0].pic,expression:"oneFormValidate[0].pic"}]})]):a("div",{staticClass:"upLoad pictrueTab acea-row row-center-wrapper"},[a("Icon",{attrs:{type:"ios-camera-outline",size:"21"}})],1)])]}},{key:"price",fn:function(t){t.row,t.index;return[a("InputNumber",{staticClass:"priceBox",attrs:{min:0},model:{value:e.oneFormValidate[0].price,callback:function(t){e.$set(e.oneFormValidate[0],"price",t)},expression:"oneFormValidate[0].price"}})]}},{key:"cost",fn:function(t){t.row,t.index;return[a("InputNumber",{staticClass:"priceBox",attrs:{min:0},model:{value:e.oneFormValidate[0].cost,callback:function(t){e.$set(e.oneFormValidate[0],"cost",t)},expression:"oneFormValidate[0].cost"}})]}},{key:"ot_price",fn:function(t){t.row,t.index;return[a("InputNumber",{staticClass:"priceBox",attrs:{min:0},model:{value:e.oneFormValidate[0].ot_price,callback:function(t){e.$set(e.oneFormValidate[0],"ot_price",t)},expression:"oneFormValidate[0].ot_price"}})]}},{key:"stock",fn:function(t){t.row,t.index;return[a("InputNumber",{staticClass:"priceBox",attrs:{min:0,precision:0},model:{value:e.oneFormValidate[0].stock,callback:function(t){e.$set(e.oneFormValidate[0],"stock",t)},expression:"oneFormValidate[0].stock"}})]}},{key:"bar_code",fn:function(t){t.row,t.index;return[a("Input",{model:{value:e.oneFormValidate[0].bar_code,callback:function(t){e.$set(e.oneFormValidate[0],"bar_code",t)},expression:"oneFormValidate[0].bar_code"}})]}},{key:"weight",fn:function(t){t.row,t.index;return[a("InputNumber",{staticClass:"priceBox",attrs:{min:0},model:{value:e.oneFormValidate[0].weight,callback:function(t){e.$set(e.oneFormValidate[0],"weight",t)},expression:"oneFormValidate[0].weight"}})]}},{key:"volume",fn:function(t){t.row,t.index;return[a("InputNumber",{staticClass:"priceBox",attrs:{min:0},model:{value:e.oneFormValidate[0].volume,callback:function(t){e.$set(e.oneFormValidate[0],"volume",t)},expression:"oneFormValidate[0].volume"}})]}}],null,!1,1032511986)})],1)],1):e._e(),a("Col",{attrs:{span:"24"}},[a("FormItem",{attrs:{label:"运费模板：",prop:"temp_id"}},[a("div",{staticClass:"acea-row"},[a("Select",{directives:[{name:"width",rawName:"v-width",value:"50%",expression:"'50%'"}],staticClass:"mr20",attrs:{clearable:""},model:{value:e.formValidate.temp_id,callback:function(t){e.$set(e.formValidate,"temp_id",t)},expression:"formValidate.temp_id"}},e._l(e.templateList,(function(t,i){return a("Option",{key:i,attrs:{value:t.id}},[e._v(e._s(t.name))])})),1),a("Button",{on:{click:e.addTemp}},[e._v("添加运费模板")])],1)])],1),a("Col",{attrs:{span:"24"}},[a("FormItem",{attrs:{label:"关联用户标签：",prop:"label_id"}},[a("Select",{staticClass:"perW50",attrs:{multiple:""},model:{value:e.formValidate.label_id,callback:function(t){e.$set(e.formValidate,"label_id",t)},expression:"formValidate.label_id"}},e._l(e.labelSelect,(function(t){return a("Option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.label_name))])})),1)],1)],1)],1),a("Row",{directives:[{name:"show",rawName:"v-show",value:"2"===e.currentTab,expression:"currentTab === '2'"}]},[a("Col",{attrs:{span:"24"}},[a("FormItem",{attrs:{label:"商品详情："}},[a("vue-ueditor-wrap",{staticStyle:{width:"90%"},attrs:{config:e.myConfig},on:{beforeInit:e.addCustomDialog},model:{value:e.formValidate.description,callback:function(t){e.$set(e.formValidate,"description",t)},expression:"formValidate.description"}})],1)],1)],1),a("Row",{directives:[{name:"show",rawName:"v-show",value:"3"===e.currentTab,expression:"currentTab === '3'"}],attrs:{type:"flex",justify:"space-between"}},[a("Col",e._b({},"Col",e.grid,!1),[a("FormItem",{attrs:{label:"福利红包："}},[a("InputNumber",{directives:[{name:"width",rawName:"v-width",value:"90%",expression:"'90%'"}],attrs:{min:0,placeholder:"请输入福利红包"},model:{value:e.formValidate.welfare_price,callback:function(t){e.$set(e.formValidate,"welfare_price",t)},expression:"formValidate.welfare_price"}})],1)],1),a("Col",e._b({},"Col",e.grid,!1),[a("FormItem",{attrs:{label:"虚拟销量："}},[a("InputNumber",{directives:[{name:"width",rawName:"v-width",value:"90%",expression:"'90%'"}],attrs:{min:0,placeholder:"请输入虚拟销量"},model:{value:e.formValidate.ficti,callback:function(t){e.$set(e.formValidate,"ficti",t)},expression:"formValidate.ficti"}})],1)],1),a("Col",e._b({},"Col",e.grid,!1),[a("FormItem",{attrs:{label:"积分：",prop:"give_integral"}},[a("InputNumber",{directives:[{name:"width",rawName:"v-width",value:"90%",expression:"'90%'"}],attrs:{min:0,placeholder:"请输入积分"},model:{value:e.formValidate.give_integral,callback:function(t){e.$set(e.formValidate,"give_integral",t)},expression:"formValidate.give_integral"}})],1)],1),a("Col",e._b({},"Col",e.grid,!1),[a("FormItem",{attrs:{label:"排序："}},[a("InputNumber",{directives:[{name:"width",rawName:"v-width",value:"90%",expression:"'90%'"}],attrs:{min:0,placeholder:"请输入排序"},model:{value:e.formValidate.sort,callback:function(t){e.$set(e.formValidate,"sort",t)},expression:"formValidate.sort"}})],1)],1),a("Col",{attrs:{span:"24"}},[a("FormItem",{attrs:{label:"单独设置："}},[a("CheckboxGroup",{on:{"on-change":e.checkAllGroupChange},model:{value:e.formValidate.is_sub,callback:function(t){e.$set(e.formValidate,"is_sub",t)},expression:"formValidate.is_sub"}},[a("Checkbox",{attrs:{label:1}},[e._v("佣金设置（数字即返佣金额）")]),a("Checkbox",{attrs:{label:0}},[e._v("付费会员价")])],1)],1)],1),e.formValidate.is_sub.length?a("Col",{attrs:{span:"24"}},[0===e.formValidate.spec_type?a("FormItem",{attrs:{label:"商品属性："}},[a("Table",{attrs:{data:e.oneFormValidate,columns:e.columnsInstall,border:""},scopedSlots:e._u([{key:"pic",fn:function(t){t.row,t.index;return[a("div",{staticClass:"pictrue pictrueTab"},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.oneFormValidate[0].pic,expression:"oneFormValidate[0].pic"}]})])]}},{key:"price",fn:function(t){t.row,t.index;return[e._v(e._s(e.oneFormValidate[0].price))]}},{key:"cost",fn:function(t){t.row,t.index;return[e._v(e._s(e.oneFormValidate[0].cost))]}},{key:"ot_price",fn:function(t){t.row,t.index;return[e._v(e._s(e.oneFormValidate[0].ot_price))]}},{key:"stock",fn:function(t){t.row,t.index;return[e._v(e._s(e.oneFormValidate[0].stock))]}},{key:"bar_code",fn:function(t){t.row,t.index;return[e._v(e._s(e.oneFormValidate[0].bar_code))]}},{key:"weight",fn:function(t){t.row,t.index;return[e._v(e._s(e.oneFormValidate[0].weight))]}},{key:"volume",fn:function(t){t.row,t.index;return[e._v(e._s(e.oneFormValidate[0].volume))]}},{key:"brokerage",fn:function(t){t.row,t.index;return[a("InputNumber",{staticClass:"priceBox",attrs:{min:0},model:{value:e.oneFormValidate[0].brokerage,callback:function(t){e.$set(e.oneFormValidate[0],"brokerage",t)},expression:"oneFormValidate[0].brokerage"}})]}},{key:"brokerage_two",fn:function(t){t.row,t.index;return[a("InputNumber",{staticClass:"priceBox",attrs:{min:0},model:{value:e.oneFormValidate[0].brokerage_two,callback:function(t){e.$set(e.oneFormValidate[0],"brokerage_two",t)},expression:"oneFormValidate[0].brokerage_two"}})]}},{key:"vip_price",fn:function(t){t.row,t.index;return[a("InputNumber",{staticClass:"priceBox",attrs:{min:0},model:{value:e.oneFormValidate[0].vip_price,callback:function(t){e.$set(e.oneFormValidate[0],"vip_price",t)},expression:"oneFormValidate[0].vip_price"}})]}}],null,!1,1293483162)})],1):e._e(),1===e.formValidate.spec_type?a("FormItem",{attrs:{label:"批量设置："}},[e.formValidate.is_sub.indexOf(1)>-1?a("span",[e._v("\n                一级返佣："),a("InputNumber",{staticClass:"columnsBox perW20",attrs:{placeholder:"请输入一级返佣",min:0},model:{value:e.manyBrokerage,callback:function(t){e.manyBrokerage=t},expression:"manyBrokerage"}}),e._v("\n                二级返佣："),a("InputNumber",{staticClass:"columnsBox perW20",attrs:{placeholder:"请输入二级返佣",min:0},model:{value:e.manyBrokerageTwo,callback:function(t){e.manyBrokerageTwo=t},expression:"manyBrokerageTwo"}})],1):e._e(),e.formValidate.is_sub.indexOf(0)>-1?a("span",[e._v("\n                会员价："),a("InputNumber",{staticClass:"columnsBox perW20",attrs:{placeholder:"请输入会员价",min:0},model:{value:e.manyVipPrice,callback:function(t){e.manyVipPrice=t},expression:"manyVipPrice"}})],1):e._e(),a("Button",{attrs:{type:"primary"},on:{click:e.brokerageSetUp}},[e._v("批量设置")])],1):e._e(),1===e.formValidate.spec_type&&e.manyFormValidate.length?a("FormItem",{attrs:{label:"商品属性："}},[e.formValidate.is_sub?a("Table",{attrs:{data:e.manyFormValidate,columns:e.columnsInstal2,border:""},scopedSlots:e._u([{key:"pic",fn:function(t){t.row;var i=t.index;return[a("div",{staticClass:"pictrue pictrueTab"},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.manyFormValidate[i].pic,expression:"manyFormValidate[index].pic"}]})])]}},{key:"price",fn:function(t){t.row;var a=t.index;return[e._v(e._s(e.manyFormValidate[a].price))]}},{key:"cost",fn:function(t){t.row;var a=t.index;return[e._v(e._s(e.manyFormValidate[a].cost))]}},{key:"ot_price",fn:function(t){t.row;var a=t.index;return[e._v(e._s(e.manyFormValidate[a].ot_price))]}},{key:"stock",fn:function(t){t.row;var a=t.index;return[e._v(e._s(e.manyFormValidate[a].stock))]}},{key:"bar_code",fn:function(t){t.row;var a=t.index;return[e._v(e._s(e.manyFormValidate[a].bar_code))]}},{key:"weight",fn:function(t){t.row;var a=t.index;return[e._v(e._s(e.manyFormValidate[a].weight))]}},{key:"volume",fn:function(t){t.row;var a=t.index;return[e._v(e._s(e.manyFormValidate[a].volume))]}},{key:"brokerage",fn:function(t){t.row;var i=t.index;return[a("InputNumber",{staticClass:"priceBox",attrs:{min:0},model:{value:e.manyFormValidate[i].brokerage,callback:function(t){e.$set(e.manyFormValidate[i],"brokerage",t)},expression:"manyFormValidate[index].brokerage"}})]}},{key:"brokerage_two",fn:function(t){t.row;var i=t.index;return[a("InputNumber",{staticClass:"priceBox",attrs:{min:0},model:{value:e.manyFormValidate[i].brokerage_two,callback:function(t){e.$set(e.manyFormValidate[i],"brokerage_two",t)},expression:"manyFormValidate[index].brokerage_two"}})]}},{key:"vip_price",fn:function(t){t.row;var i=t.index;return[a("InputNumber",{staticClass:"priceBox",attrs:{min:0},model:{value:e.manyFormValidate[i].vip_price,callback:function(t){e.$set(e.manyFormValidate[i],"vip_price",t)},expression:"manyFormValidate[index].vip_price"}})]}}],null,!1,277447386)}):e._e()],1):e._e()],1):e._e(),a("Col",e._b({},"Col",e.grid,!1),[a("FormItem",{attrs:{label:"积分专区："}},[a("RadioGroup",{model:{value:e.formValidate.is_hot,callback:function(t){e.$set(e.formValidate,"is_hot",t)},expression:"formValidate.is_hot"}},[a("Radio",{staticClass:"radio",attrs:{label:1}},[e._v("开启")]),a("Radio",{attrs:{label:0}},[e._v("关闭")])],1)],1)],1),a("Col",e._b({},"Col",e.grid,!1),[a("FormItem",{attrs:{label:"零钱专区："}},[a("RadioGroup",{model:{value:e.formValidate.is_new,callback:function(t){e.$set(e.formValidate,"is_new",t)},expression:"formValidate.is_new"}},[a("Radio",{staticClass:"radio",attrs:{label:1}},[e._v("开启")]),a("Radio",{attrs:{label:0}},[e._v("关闭")])],1)],1)],1),a("Col",e._b({},"Col",e.grid,!1),[a("FormItem",{attrs:{label:"卡购专区："}},[a("RadioGroup",{model:{value:e.formValidate.is_benefit,callback:function(t){e.$set(e.formValidate,"is_benefit",t)},expression:"formValidate.is_benefit"}},[a("Radio",{staticClass:"radio",attrs:{label:1}},[e._v("开启")]),a("Radio",{attrs:{label:0}},[e._v("关闭")])],1)],1)],1),a("Col",e._b({},"Col",e.grid,!1),[a("FormItem",{attrs:{label:"精品推荐："}},[a("RadioGroup",{model:{value:e.formValidate.is_best,callback:function(t){e.$set(e.formValidate,"is_best",t)},expression:"formValidate.is_best"}},[a("Radio",{staticClass:"radio",attrs:{label:1}},[e._v("开启")]),a("Radio",{attrs:{label:0}},[e._v("关闭")])],1)],1)],1),a("Col",e._b({},"Col",e.grid,!1),[a("FormItem",{attrs:{label:"优品推荐："}},[a("RadioGroup",{model:{value:e.formValidate.is_good,callback:function(t){e.$set(e.formValidate,"is_good",t)},expression:"formValidate.is_good"}},[a("Radio",{staticClass:"radio",attrs:{label:1}},[e._v("开启")]),a("Radio",{attrs:{label:0}},[e._v("关闭")])],1)],1)],1),a("Col",e._b({},"Col",e.grid,!1),[a("FormItem",{attrs:{label:"商品状态："}},[a("RadioGroup",{model:{value:e.formValidate.is_show,callback:function(t){e.$set(e.formValidate,"is_show",t)},expression:"formValidate.is_show"}},[a("Radio",{staticClass:"radio",attrs:{label:1}},[e._v("上架")]),a("Radio",{attrs:{label:0}},[e._v("下架")])],1)],1)],1),a("Col",e._b({},"Col",e.grid3,!1),[a("FormItem",{attrs:{label:"活动优先级："}},[a("div",{staticClass:"color-list acea-row row-middle"},[e._l(e.formValidate.activity,(function(t){return a("div",{directives:[{name:"dragging",rawName:"v-dragging",value:{item:t,list:e.formValidate.activity,group:"color"},expression:"{\n                    item: color,\n                    list: formValidate.activity,\n                    group: 'color',\n                  }"}],key:t,staticClass:"color-item",class:e.activity[t]},[e._v("\n                  "+e._s(t)+"\n                ")])})),a("div",{staticClass:"tip"},[e._v("可拖动按钮调整活动的优先展示顺序")])],2)])],1),a("Col",e._b({},"Col",e.grid3,!1),[a("FormItem",{attrs:{label:"赠送优惠券："}},[e.couponName.length?a("div",{staticClass:"mb20"},e._l(e.couponName,(function(t,i){return a("Tag",{key:i,attrs:{closable:""},on:{"on-close":function(a){return e.handleClose(t)}}},[e._v(e._s(t.title))])})),1):e._e(),a("Button",{attrs:{type:"primary"},on:{click:e.addCoupon}},[e._v("添加优惠券")])],1)],1),a("Col",e._b({},"Col",e.grid3,!1),[a("FormItem",{attrs:{label:"商品口令："}},[a("Input",{directives:[{name:"width",rawName:"v-width",value:"50%",expression:"'50%'"}],attrs:{placeholder:"请输入商品口令"},model:{value:e.formValidate.command_word,callback:function(t){e.$set(e.formValidate,"command_word",t)},expression:"formValidate.command_word"}})],1)],1)],1),a("FormItem",["1"!==e.currentTab?a("Button",{on:{click:e.upTab}},[e._v("上一步")]):e._e(),"3"!==e.currentTab?a("Button",{staticClass:"submission",attrs:{type:"primary"},on:{click:e.downTab}},[e._v("下一步")]):e._e(),e.$route.params.id||"3"===e.currentTab?a("Button",{staticClass:"submission",attrs:{type:"primary",disabled:e.openSubimit},on:{click:function(t){return e.handleSubmit("formValidate")}}},[e._v("保存")]):e._e()],1),e.spinShow?a("Spin",{attrs:{size:"large",fix:""}}):e._e()],1),a("Modal",{attrs:{width:"60%",scrollable:"","footer-hide":"",closable:"",title:"上传商品图","mask-closable":!1,"z-index":1},model:{value:e.modalPic,callback:function(t){e.modalPic=t},expression:"modalPic"}},[e.modalPic?a("uploadPictures",{attrs:{isChoice:e.isChoice,gridBtn:e.gridBtn,gridPic:e.gridPic},on:{getPic:e.getPic,getPicD:e.getPicD}}):e._e()],1)],1),a("freightTemplate",{ref:"templates",attrs:{template:e.template},on:{changeTemplate:e.changeTemplate}}),a("add-attr",{ref:"addattr",on:{getList:e.userSearchs}}),a("coupon-list",{ref:"couponTemplates",attrs:{couponids:e.formValidate.coupon_ids,updateIds:e.updateIds,updateName:e.updateName},on:{nameId:e.nameId}}),a("stores-list",{ref:"storesTemplates",attrs:{storesids:e.formValidate.stores_ids,updateStoreIds:e.updateStoreIds,updateStoreName:e.updateStoreName},on:{storesId:e.storesId}})],1)},r=[],o=a("a34a"),n=a.n(o),s=a("2f62"),l=a("310e"),c=a.n(l),d=a("b0e7"),m=a("5334"),u=a("e449"),p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Modal",{attrs:{title:"门店列表",width:"60%"},on:{"on-ok":e.ok,"on-cancel":e.cancel},model:{value:e.isTemplate,callback:function(t){e.isTemplate=t},expression:"isTemplate"}},[a("Form",{ref:"tableFrom",attrs:{model:e.tableFrom,"label-width":e.labelWidth,"label-position":e.labelPosition},nativeOn:{submit:function(e){e.preventDefault()}}},[a("Row",{attrs:{type:"flex",gutter:24}},[a("Col",e._b({staticClass:"mr"},"Col",e.grid,!1),[a("FormItem",{attrs:{label:"提货点搜索：","label-for":"store_name"}},[a("Input",{attrs:{search:"","enter-button":"",placeholder:"请输入提货点名称,电话"},on:{"on-search":e.userSearchs},model:{value:e.tableFrom.keywords,callback:function(t){e.$set(e.tableFrom,"keywords",t)},expression:"tableFrom.keywords"}})],1)],1)],1)],1),a("Table",{ref:"table",staticClass:"mt25",attrs:{columns:e.columns,data:e.storeLists,loading:e.loading,"highlight-row":"","no-userFrom-text":"暂无数据","no-filtered-userFrom-text":"暂无筛选结果"},on:{"on-select":e.handleSelectRow,"on-select-cancel":e.handleCancelRow,"on-select-all":e.handleSelectAll,"on-select-all-cancel":e.handleSelectAll},scopedSlots:e._u([{key:"image",fn:function(e){var t=e.row;e.index;return[a("viewer",[a("div",{staticClass:"tabBox_img"},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.image,expression:"row.image"}]})])])]}}])}),a("div",{staticClass:"acea-row row-right page"},[a("Page",{attrs:{total:e.total,"show-elevator":"","show-total":"","page-size":e.tableFrom.limit},on:{"on-change":e.receivePageChange}})],1)],1)],1)},f=[],h=(a("b7be"),a("61f7")),g=a("90e7");function v(e){return y(e)||_(e)||b()}function b(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function y(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}var w={name:"storesList",filters:{formatDate:function(e){if(0!==e){var t=new Date(1e3*e);return Object(h["a"])(t,"yyyy-MM-dd hh:mm")}}},props:{storesids:{type:Array},updateStoreIds:{type:Array},updateStoreName:{type:Array}},computed:{labelWidth:function(){return this.isMobile?void 0:85},labelPosition:function(){return this.isMobile?"top":"left"}},data:function(){return{isTemplate:!1,loading:!1,grid:{xl:10,lg:10,md:12,sm:24,xs:24},tableFrom:{page:1,limit:15,type:"0",keywords:""},total:0,ids:[],texts:[],columns:[{type:"selection",width:60,align:"center"},{title:"ID",key:"id",width:80,sortable:!0},{title:"店招",slot:"image",minWidth:100},{title:"门店名称",key:"name",minWidth:100},{title:"门店电话",key:"phone",minWidth:100},{title:"门店地址",key:"detailed_address",minWidth:100},{title:"营业时间",key:"day_time",minWidth:100}],storeLists:[],selectedIds:new Set,selectedNames:new Set}},mounted:function(){this.storeHeade(),this.tableList()},watch:{updateStoreIds:function(e){this.selectedIds=new Set(e)},updateStoreName:function(e){this.selectedNames=new Set(e)}},methods:{unique:function(e){var t=new Map;return e.filter((function(e){return!t.has(e.id)&&t.set(e.id,1)}))},handleSelectAll:function(e){var t=this;if(0===e.length){var a=this,i=a.$refs.table.data;i.forEach((function(e){if(a.selectedIds.has(e.id)){a.selectedIds.delete(e.id);var t=a.unique(Array.from(a.selectedNames));a.unique(Array.from(a.selectedNames)).forEach((function(a,i){a.id===e.id&&t.splice(i,1)})),a.selectedNames=new Set(t)}}))}else e.forEach((function(e){t.selectedIds.add(e.id),t.selectedNames.add({id:e.id,name:e.name})}));this.$nextTick((function(){t.setChecked()}))},handleSelectRow:function(e,t){var a=this;this.selectedIds.add(t.id),this.selectedNames.add({id:t.id,name:t.name}),this.$nextTick((function(){a.setChecked()}))},handleCancelRow:function(e,t){var a=this,i=this;i.selectedIds.delete(t.id);var r=Array.from(i.selectedNames);Array.from(i.selectedNames).forEach((function(e,a){e.id===t.id&&r.splice(a,1)})),i.selectedNames=new Set(r),this.$nextTick((function(){a.setChecked()}))},setChecked:function(){this.ids=v(this.selectedIds),this.texts=v(this.selectedNames);var e=this.$refs.table.objData;for(var t in e)this.selectedIds.has(e[t].id)&&(e[t]._isChecked=!0)},cancel:function(){this.isTemplate=!1},ok:function(){this.$emit("storesId",this.ids,this.texts)},storeHeade:function(){var e=this,t=this;Object(g["gb"])().then((function(e){t.headeNum=e.data.count})).catch((function(t){e.$Message.error(t.msg)}))},userSearchs:function(){this.tableFrom.page=1,this.tableList()},tableList:function(){var e=this;e.loading=!0,Object(g["F"])(e.tableFrom).then((function(t){e.loading=!1,e.storeLists=t.data.list,e.$nextTick((function(){e.setChecked()})),e.total=t.data.count,e.loading=!1})).catch((function(t){e.$Message.error(t.msg)}))},receivePageChange:function(e){this.tableFrom.page=e,this.tableList()}}},k=w,V=(a("774e"),a("2877")),x=Object(V["a"])(k,p,f,!1,null,"d5369fa8",null),F=x.exports,C=a("6fd3"),I=a("6625"),$=a.n(I),N=a("c4c8");function B(e){return O(e)||S(e)||T()}function T(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function S(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function O(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}function P(e,t,a,i,r,o,n){try{var s=e[o](n),l=s.value}catch(c){return void a(c)}s.done?t(l):Promise.resolve(l).then(i,r)}function D(e){return function(){var t=this,a=arguments;return new Promise((function(i,r){var o=e.apply(t,a);function n(e){P(o,i,r,n,s,"next",e)}function s(e){P(o,i,r,n,s,"throw",e)}n(void 0)}))}}function M(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function R(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?M(a,!0).forEach((function(t){j(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):M(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function j(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var A={name:"product_productAdd",components:{VueUeditorWrap:$.a,uploadPictures:d["a"],freightTemplate:m["a"],addAttr:C["a"],couponList:u["a"],storesList:F,draggable:c.a},data:function(){return{spinShow:!1,openSubimit:!1,grid2:{xl:10,lg:12,md:12,sm:24,xs:24},grid3:{xl:18,lg:18,md:20,sm:24,xs:24},oneFormBatch:[{pic:"",price:0,cost:0,ot_price:0,stock:0,bar_code:"",weight:0,volume:0}],formDynamic:{attrsName:"",attrsVal:""},formDynamicNameData:[],isBtn:!1,myConfig:{autoHeightEnabled:!1,initialFrameHeight:500,initialFrameWidth:"100%",UEDITOR_HOME_URL:"/admin/UEditor/",serverUrl:""},columns2:[{title:"图片",slot:"pic",align:"center",minWidth:80},{title:"售价",slot:"price",align:"center",minWidth:95},{title:"成本价",slot:"cost",align:"center",minWidth:95},{title:"原价",slot:"ot_price",align:"center",minWidth:95},{title:"库存",slot:"stock",align:"center",minWidth:95},{title:"商品编号",slot:"bar_code",align:"center",minWidth:120},{title:"重量（KG）",slot:"weight",align:"center",minWidth:95},{title:"体积(m³)",slot:"volume",align:"center",minWidth:95},{title:"操作",slot:"action",fixed:"right",align:"center",minWidth:140}],columns:[],columnsInstall:[],columnsInstal2:[],gridPic:{xl:6,lg:8,md:12,sm:12,xs:12},gridBtn:{xl:4,lg:8,md:8,sm:8,xs:8},formValidate:{store_name:"",cate_id:[],label_id:[],keyword:"",unit_name:"",store_info:"",image:"",recommend_image:"",slider_image:[],description:"",ficti:0,welfare_price:0,give_integral:0,sort:0,is_show:1,is_hot:0,is_benefit:0,is_best:0,is_new:0,is_good:0,is_postage:0,is_sub:[],id:0,spec_type:0,video_link:"",temp_id:"",attrs:[],items:[{pic:"",price:0,cost:0,ot_price:0,stock:0,bar_code:""}],activity:["默认","秒杀","砍价","拼团"],storesName:[],couponName:[],header:[],selectRule:"",coupon_ids:[],command_word:""},ruleList:[],templateList:[],createBnt:!1,showIput:!1,manyFormValidate:[],oneFormValidate:[{pic:"",price:0,cost:0,ot_price:0,stock:0,bar_code:"",weight:0,volume:0,brokerage:0,brokerage_two:0,vip_price:0}],images:[],imagesTable:"",currentTab:"1",isChoice:"",grid:{xl:8,lg:8,md:12,sm:24,xs:24},loading:!1,modalPic:!1,template:!1,uploadList:[],treeSelect:[],labelSelect:[],picTit:"",tableIndex:0,ruleValidate:{store_name:[{required:!0,message:"请输入商品名称",trigger:"blur"}],cate_id:[{required:!0,message:"请选择商品分类",trigger:"change",type:"array",min:"1"}],keyword:[{required:!0,message:"请输入商品关键字",trigger:"blur"}],unit_name:[{required:!0,message:"请输入单位",trigger:"blur"}],store_info:[{required:!0,message:"请输入商品简介",trigger:"blur"}],image:[{required:!0,message:"请上传商品图",trigger:"change"}],slider_image:[{required:!0,message:"请上传商品轮播图",type:"array",trigger:"change"}],spec_type:[{required:!0,message:"请选择商品规格",trigger:"change"}],selectRule:[{required:!0,message:"请选择商品规格属性",trigger:"change"}],temp_id:[{required:!0,message:"请选择运费模板",trigger:"change",type:"number"}],give_integral:[{type:"integer",message:"请输入整数"}]},manyBrokerage:0,manyBrokerageTwo:0,manyVipPrice:0,upload:{videoIng:!1},progress:0,videoLink:"",attrs:[],activity:{"默认":"red","秒杀":"blue","砍价":"green","拼团":"yellow"},couponName:[],updateIds:[],updateName:[],storesName:[],rakeBack:[{title:"一级返佣",slot:"brokerage",align:"center",width:95},{title:"二级返佣",slot:"brokerage_two",align:"center",width:95}],member:[{title:"会员价",slot:"vip_price",align:"center",width:95}],columnsInstalM:[],moveIndex:""}},computed:R({},Object(s["e"])("admin/layout",["isMobile"]),{labelWidth:function(){return this.isMobile?void 0:120},labelPosition:function(){return this.isMobile?"top":"right"},labelBottom:function(){return this.isMobile?void 0:15}}),created:function(){this.columns=this.columns2.slice(0,8)},mounted:function(){var e=this;"0"!==this.$route.params.id&&this.$route.params.id?this.getInfo():"0"===this.$route.params.id&&Object(N["o"])().then((function(t){var a=t.data.info;if(!Array.isArray(a)){var i=a.cate_id.map(Number),r=a.label_id.map(Number);e.attrs=a.items||[];var o=[];a.coupons&&(a.coupons.map((function(e){o.push(e.id)})),e.couponName=a.coupons),e.formValidate=a,e.formValidate.coupon_ids=o,e.updateIds=o,e.updateName=a.coupons,e.formValidate.cate_id=i,e.formValidate.label_id=r,e.oneFormValidate=a.attrs,e.formValidate.header=[],e.generate(0),e.manyFormValidate=a.attrs,e.spec_type=a.spec_type,0===a.spec_type?e.manyFormValidate=[]:(e.createBnt=!0,e.oneFormValidate=[{pic:a.image,price:0,cost:0,ot_price:0,stock:0,bar_code:"",weight:0,volume:0,brokerage:0,brokerage_two:0,vip_price:0}]),e.spinShow=!1}})).catch((function(t){e.$Message.error(t.msg)})),this.goodsCategory(),this.productGetRule(),this.productGetTemplate(),this.userLabel()},methods:{checkMove:function(e){this.moveIndex=e.draggedContext.index},end:function(){this.moveIndex=""},checkAllGroupChange:function(e){this.checkAllGroup(e)},checkAllGroup:function(e){0===this.formValidate.spec_type?(e.indexOf(0)>-1?this.columnsInstall=this.columns2.slice(0,4).concat(this.member):e.indexOf(1)>-1?this.columnsInstall=this.columns2.slice(0,4).concat(this.rakeBack):this.columnsInstall=this.columns2.slice(0,4),2===e.length&&(this.columnsInstall=this.columns2.slice(0,4).concat(this.rakeBack).concat(this.member))):(e.indexOf(0)>-1?this.columnsInstal2=this.columnsInstalM.slice(0,4).concat(this.member):e.indexOf(1)>-1?this.columnsInstal2=this.columnsInstalM.slice(0,4).concat(this.rakeBack):this.columnsInstal2=this.columnsInstalM.slice(0,4),2===e.length&&(this.columnsInstal2=this.columnsInstalM.slice(0,4).concat(this.rakeBack).concat(this.member)))},addStores:function(){this.$refs.storesTemplates.isTemplate=!0,this.$refs.storesTemplates.tableList()},storesId:function(e,t){this.formValidate.stores_ids=e,this.storesName=this.unique(t)},handleStoreClose:function(e){var t=this.storesName.indexOf(e);this.storesName.splice(t,1);var a=this.formValidate.stores_ids;a.splice(t,1),this.updateStoreIds=a,this.updateStoreName=this.storesName},addCoupon:function(){this.$refs.couponTemplates.isTemplate=!0,this.$refs.couponTemplates.tableList()},unique:function(e){var t=new Map;return e.filter((function(e){return!t.has(e.id)&&t.set(e.id,1)}))},nameId:function(e,t){this.formValidate.coupon_ids=e,this.couponName=this.unique(t)},handleClose:function(e){var t=this.couponName.indexOf(e);this.couponName.splice(t,1);var a=this.formValidate.coupon_ids;a.splice(t,1),this.updateIds=a,this.updateName=this.couponName},getList:function(){this.productGetTemplate()},addTemp:function(){this.$refs.templates.isTemplate=!0},delVideo:function(){var e=this;e.$set(e.formValidate,"video_link","")},zh_uploadFile:function(){this.videoLink?this.formValidate.video_link=this.videoLink:this.$refs.refid.click()},zh_uploadFile_change:function(e){var t=this,a=e.target.files[0].name.substr(e.target.files[0].name.indexOf("."));if(".mp4"!==a)return t.$Message.error("只能上传MP4文件");Object(N["s"])().then((function(a){t.$videoCloud.videoUpload({type:a.data.type,evfile:e,res:a,uploading:function(e,a){t.upload.videoIng=e}}).then((function(e){t.formValidate.video_link=e.url,t.$Message.success("视频上传成功")})).catch((function(e){t.$Message.error(e)}))})).catch((function(e){t.$Message.error(e.msg)}))},upTab:function(){this.currentTab=(Number(this.currentTab)-1).toString()},downTab:function(){this.currentTab=(Number(this.currentTab)+1).toString()},userSearchs:function(){this.productGetRule()},addRule:function(){this.$refs.addattr.modal=!0},brokerageSetUp:function(){var e=this;if(e.formValidate.is_sub.indexOf(1)>-1){if(e.manyBrokerage<=0||e.manyBrokerageTwo<=0)return e.$Message.error("请填写返佣金额后进行批量添加")}else if(e.formValidate.is_sub.indexOf(0)>-1&&e.manyVipPrice<=0)return e.$Message.error("请填写会员价后进行批量添加");if(2===this.formValidate.is_sub.length&&(e.manyBrokerage<=0||e.manyBrokerageTwo<=0||e.manyVipPrice<=0))return e.$Message.error("请填写完金额后进行批量添加");var t=!0,a=!1,i=void 0;try{for(var r,o=e.manyFormValidate[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var n=r.value;this.$set(n,"brokerage",e.manyBrokerage),this.$set(n,"brokerage_two",e.manyBrokerageTwo),this.$set(n,"vip_price",e.manyVipPrice)}}catch(s){a=!0,i=s}finally{try{t||null==o.return||o.return()}finally{if(a)throw i}}},vipPriceSetUp:function(){var e=this;if(e.manyVipPrice<=0)return e.$Message.error("请填写会员价在进行批量添加");var t=!0,a=!1,i=void 0;try{for(var r,o=e.manyFormValidate[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var n=r.value;this.$set(n,"vip_price",e.manyVipPrice)}}catch(s){a=!0,i=s}finally{try{t||null==o.return||o.return()}finally{if(a)throw i}}},batchDel:function(){this.oneFormBatch=[{pic:"",price:0,cost:0,ot_price:0,stock:0,bar_code:"",weight:0,volume:0}]},confirm:function(){var e=this;if(e.createBnt=!0,e.formValidate.selectRule.trim().length<=0)return e.$Message.error("请选择属性");e.ruleList.forEach((function(t,a){t.rule_name===e.formValidate.selectRule&&(e.attrs=t.rule_value)}))},productGetRule:function(){var e=this;Object(N["r"])().then((function(t){e.ruleList=t.data}))},productGetTemplate:function(){var e=this;Object(N["t"])().then((function(t){e.templateList=t.data}))},delAttrTable:function(e){var t=this,a=this.$route.params.id;a?Object(N["e"])(a).then((function(a){t.manyFormValidate.splice(e,1),t.$Message.success(a.msg)})).catch((function(e){t.$Message.error(e.msg)})):this.manyFormValidate.splice(e,1)},batchAdd:function(){var e=!0,t=!1,a=void 0;try{for(var i,r=this.manyFormValidate[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){var o=i.value;this.oneFormBatch[0].pic&&this.$set(o,"pic",this.oneFormBatch[0].pic),this.oneFormBatch[0].price>0&&this.$set(o,"price",this.oneFormBatch[0].price),this.oneFormBatch[0].cost>0&&this.$set(o,"cost",this.oneFormBatch[0].cost),this.oneFormBatch[0].ot_price>0&&this.$set(o,"ot_price",this.oneFormBatch[0].ot_price),this.oneFormBatch[0].stock>0&&this.$set(o,"stock",this.oneFormBatch[0].stock),""!==this.oneFormBatch[0].bar_code&&this.$set(o,"bar_code",this.oneFormBatch[0].bar_code),this.oneFormBatch[0].weight>0&&this.$set(o,"weight",this.oneFormBatch[0].weight),this.oneFormBatch[0].volume>0&&this.$set(o,"volume",this.oneFormBatch[0].volume)}}catch(n){t=!0,a=n}finally{try{e||null==r.return||r.return()}finally{if(t)throw a}}},addBtn:function(){this.clearAttr(),this.createBnt=!1,this.showIput=!0},generate:function(e){var t=this;Object(N["j"])({attrs:this.attrs},this.formValidate.id,e).then((function(e){var a=e.data.info,i=JSON.parse(JSON.stringify(a.header));"0"!==t.$route.params.id&&(t.manyFormValidate=a.value),t.formValidate.header=i;var r=a.header;r.pop(),t.columnsInstalM=a.header,t.checkAllGroup(t.formValidate.is_sub),t.$route.params.id||1!==t.formValidate.spec_type?t.$route.params.id&&(t.manyFormValidate.map((function(e){e.pic||(e.pic=t.formValidate.image)})),t.oneFormBatch[0].pic=t.formValidate.image):(t.manyFormValidate.map((function(e){e.pic=t.formValidate.image})),t.oneFormBatch[0].pic=t.formValidate.image)})).catch((function(e){t.$Message.error(e.msg)}))},offAttrName:function(){this.showIput=!1,this.createBnt=!0},clearAttr:function(){this.formDynamic.attrsName="",this.formDynamic.attrsVal=""},handleRemoveRole:function(e){this.attrs.splice(e,1),this.manyFormValidate.splice(e,1)},handleRemove2:function(e,t){e.splice(t,1)},createAttrName:function(){if(this.formDynamic.attrsName&&this.formDynamic.attrsVal){var e={value:this.formDynamic.attrsName,detail:[this.formDynamic.attrsVal]};this.attrs.push(e);var t={};this.attrs=this.attrs.reduce((function(e,a){return!t[a.value]&&(t[a.value]=e.push(a)),e}),[]),this.clearAttr(),this.showIput=!1,this.createBnt=!0}else this.$Message.warning("请添加完整的规格！")},createAttr:function(e,t){if(e){this.attrs[t].detail.push(e);var a={};this.attrs[t].detail=this.attrs[t].detail.reduce((function(e,t){return!a[t]&&(a[t]=e.push(t)),e}),[])}else this.$Message.warning("请添加属性")},goodsCategory:function(){var e=this;Object(N["F"])(1).then((function(t){e.treeSelect=t.data})).catch((function(t){e.$Message.error(t.msg)}))},userLabel:function(){var e=this;Object(N["m"])().then((function(t){e.labelSelect=t.data.list})).catch((function(t){e.$Message.error(t.msg)}))},changeSpec:function(){var e=this;this.formValidate.is_sub=[];var t=this.$route.params.id;t&&Object(N["e"])(t).then((function(e){})).catch((function(t){e.formValidate.spec_type=e.spec_type,e.$Message.error(t.msg)}))},getInfo:function(){var e=this,t=this;t.spinShow=!0,Object(N["u"])(t.$route.params.id).then(function(){var a=D(n.a.mark((function a(i){var r,o,s,l,c;return n.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:r=i.data.productInfo,o=r.cate_id.map(Number),s=r.label_id.map(Number),e.attrs=r.items||[],l=[],c=[],r.coupons.map((function(e){l.push(e.id)})),t.formValidate=r,t.couponName=r.coupons,t.formValidate.coupon_ids=l,t.updateIds=l,t.updateName=r.coupons,r.stores.map((function(e){c.push(e.id)})),t.storesName=r.stores,t.formValidate.stores_ids=c,t.updateStoreIds=c,t.updateStoreName=r.stores,t.formValidate.cate_id=o,t.formValidate.label_id=s,t.oneFormValidate=[r.attr],t.formValidate.header=[],t.manyFormValidate=r.attrs,t.generate(0),t.spec_type=r.spec_type,0===r.spec_type?t.manyFormValidate=[]:(t.createBnt=!0,t.oneFormValidate=[{pic:r.image,price:0,cost:0,ot_price:0,stock:0,bar_code:"",weight:0,volume:0,brokerage:0,brokerage_two:0,vip_price:0}]),e.spinShow=!1;case 26:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()).catch((function(t){e.spinShow=!1,e.$Message.error(t.msg)}))},onhangeTab:function(e){this.currentTab=e},handleRemove:function(e){this.images.splice(e,1),this.formValidate.slider_image.splice(e,1)},changeCancel:function(e){this.modalPic=!1},modalPicTap:function(e,t,a){this.modalPic=!0,this.isChoice="dan"===e?"单选":"多选",this.picTit=t,this.tableIndex=a},getPic:function(e){switch(this.picTit){case"danFrom":this.formValidate.image=e.att_dir,this.$route.params.id||(0===this.formValidate.spec_type?this.oneFormValidate[0].pic=e.att_dir:(this.manyFormValidate.map((function(t){t.pic=e.att_dir})),this.oneFormBatch[0].pic=e.att_dir));break;case"danTable":this.oneFormValidate[this.tableIndex].pic=e.att_dir;break;case"duopi":this.oneFormBatch[this.tableIndex].pic=e.att_dir;break;case"recommend_image":this.formValidate.recommend_image=e.att_dir;break;default:this.manyFormValidate[this.tableIndex].pic=e.att_dir}this.modalPic=!1},getPicD:function(e){var t=this;this.images=e,this.images.map((function(e){t.formValidate.slider_image.push(e.att_dir),t.formValidate.slider_image=t.formValidate.slider_image.splice(0,10)})),this.modalPic=!1},handleSubmit:function(e){var t=this;this.$refs[e].validate((function(e){if(e){if(0===t.formValidate.spec_type?(t.formValidate.attrs=t.oneFormValidate,t.formValidate.header=[],t.formValidate.items=[]):(t.formValidate.items=t.attrs,t.formValidate.attrs=t.manyFormValidate),1===t.formValidate.spec_type&&0===t.manyFormValidate.length)return t.$Message.warning("商品信息-请点击生成多规格");var a=t.formValidate.attrs;if(1===t.formValidate.is_sub[0]){for(var i=0;i<a.length;i++)if(null===a[i].brokerage||null===a[i].brokerage_two)return t.$Message.error("其他设置- 一二级返佣不能为空")}else for(var r=0;r<a.length;r++)if(null===a[r].vip_price)return t.$Message.error("其他设置-会员价不能为空");if(2===t.formValidate.is_sub.length)for(var o=0;o<a.length;o++)if(null===a[o].brokerage||null===a[o].brokerage_two||null===a[o].vip_price)return t.$Message.error("其他设置- 一二级返佣和会员价不能为空");t.openSubimit=!0,t.formValidate.description=t.formatRichText(t.formValidate.description),Object(N["n"])(t.formValidate).then(function(){var e=D(n.a.mark((function e(a){return n.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.openSubimit=!1,t.$Message.success(a.msg),"0"===t.$route.params.id&&Object(N["b"])().catch((function(e){t.$Message.error(e.msg)})),setTimeout((function(){t.$router.push({path:"/admin/product/product_list"})}),500);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){t.openSubimit=!1,t.$Message.error(e.msg)}))}else{if(!t.formValidate.store_name)return t.$Message.warning("商品信息-商品名称不能为空");if(!t.formValidate.cate_id.length)return t.$Message.warning("商品信息-商品分类不能为");if(!t.formValidate.keyword)return t.$Message.warning("商品信息-商品关键字不能为");if(!t.formValidate.unit_name)return t.$Message.warning("商品信息-商品单位不能为");if(!t.formValidate.store_info)return t.$Message.warning("商品信息-商品简介不能为");if(!t.formValidate.image)return t.$Message.warning("商品信息-商品封面图不能为");if(!t.formValidate.slider_image.length)return t.$Message.warning("商品信息-商品轮播图不能为");if(!t.formValidate.temp_id)return t.$Message.warning("商品信息-运费模板不能为")}}))},changeTemplate:function(e){this.template=e},validate:function(e,t,a){!1===t&&this.$Message.warning(a)},handleDragStart:function(e,t){this.dragging=t},handleDragEnd:function(e,t){this.dragging=null},handleDragOver:function(e){e.dataTransfer.dropEffect="move"},handleDragEnter:function(e,t){if(e.dataTransfer.effectAllowed="move",t!==this.dragging){var a=B(this.formValidate.slider_image),i=a.indexOf(this.dragging),r=a.indexOf(t);a.splice.apply(a,[r,0].concat(B(a.splice(i,1)))),this.formValidate.slider_image=a}},addCustomDialog:function(e){window.UE.registerUI("test-dialog",(function(e,t){var a=new window.UE.ui.Dialog({iframeUrl:"/admin/widget.images/index.html?fodder=dialog",editor:e,name:t,title:"上传图片",cssRules:"width:1200px;height:500px;padding:20px;"});this.dialog=a;var i=new window.UE.ui.Button({name:"dialog-button",title:"上传图片",cssRules:"background-image: url(https://cdn.oss.9gt.net/prov1.1/1/icons.png);background-position: -726px -77px;",onclick:function(){a.render(),a.open()}});return i}),37),window.UE.registerUI("video-dialog",(function(e,t){var a=new window.UE.ui.Dialog({iframeUrl:"/admin/widget.video/index.html?fodder=video",editor:e,name:t,title:"上传视频",cssRules:"width:1000px;height:500px;padding:20px;"});this.dialog=a;var i=new window.UE.ui.Button({name:"video-button",title:"上传视频",cssRules:"background-image: url(../../../assets/images/icons.png);background-position: -320px -20px;",onclick:function(){a.render(),a.open()}});return i}),38)},formatRichText:function(e){var t=e.replace(/<img[^>]*>/gi,(function(e,t){return e=e.replace(/style="[^"]+"/gi,"").replace(/style='[^']+'/gi,""),e=e.replace(/width="[^"]+"/gi,"").replace(/width='[^']+'/gi,""),e=e.replace(/height="[^"]+"/gi,"").replace(/height='[^']+'/gi,""),e}));return t=t.replace(/style="[^"]+"/gi,(function(e,t){return e=e.replace(/width:[^;]+;/gi,"max-width:100%;").replace(/width:[^;]+;/gi,"max-width:100%;"),e})),t=t.replace(/<br[^>]*\/>/gi,""),t=t.replace(/\<img/gi,'<img style="max-width:100%;height:auto;display:block;margin-top:0;margin-bottom:0;"'),t}}},L=A,E=(a("6c17"),Object(V["a"])(L,i,r,!1,null,"555b3c59",null));t["default"]=E.exports},cdf7:function(e,t,a){},e449:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Modal",{attrs:{title:"优惠券列表",width:"60%"},on:{"on-ok":e.ok,"on-cancel":e.cancel},model:{value:e.isTemplate,callback:function(t){e.isTemplate=t},expression:"isTemplate"}},[a("Table",{ref:"table",staticClass:"mt25",attrs:{columns:e.columns,data:e.couponList,loading:e.loading,"highlight-row":"","no-userFrom-text":"暂无数据","no-filtered-userFrom-text":"暂无筛选结果"},on:{"on-select":e.handleSelectRow,"on-select-cancel":e.handleCancelRow,"on-select-all":e.handleSelectAll,"on-select-all-cancel":e.handleSelectAll},scopedSlots:e._u([{key:"count",fn:function(t){var i=t.row;t.index;return[i.is_permanent?a("span",[e._v("不限量")]):a("div",[a("span",{staticClass:"fa"},[e._v("发布："+e._s(i.total_count))]),a("span",{staticClass:"sheng"},[e._v("剩余："+e._s(i.remain_count))])])]}},{key:"start_time",fn:function(t){var i=t.row;t.index;return[i.start_time?a("div",[e._v("\n                    "+e._s(e._f("formatDate")(i.start_time))+" - "+e._s(e._f("formatDate")(i.end_time))+"\n                ")]):a("span",[e._v("不限时")])]}},{key:"type",fn:function(t){var i=t.row;return[1===i.type?a("span",[e._v("品类券")]):2===i.type?a("span",[e._v("商品券")]):3===i.type?a("span",[e._v("会员券")]):a("span",[e._v("通用券")])]}},{key:"status",fn:function(t){var i=t.row;t.index;return[a("Tag",{directives:[{name:"show",rawName:"v-show",value:1===i.status,expression:"row.status===1"}],attrs:{color:"blue"}},[e._v("正常")]),a("Tag",{directives:[{name:"show",rawName:"v-show",value:0===i.status,expression:"row.status===0"}],attrs:{color:"gold"}},[e._v("未开启")]),a("Tag",{directives:[{name:"show",rawName:"v-show",value:-1===i.status,expression:"row.status=== -1"}],attrs:{color:"red"}},[e._v("已失效")])]}}])}),a("div",{staticClass:"acea-row row-right page"},[a("Page",{attrs:{total:e.total,"show-elevator":"","show-total":"","page-size":e.tableFrom.limit},on:{"on-change":e.receivePageChange}})],1)],1)],1)},r=[],o=a("b7be"),n=a("61f7");function s(e){return d(e)||c(e)||l()}function l(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function c(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function d(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}var m={name:"index",filters:{formatDate:function(e){if(0!==e){var t=new Date(1e3*e);return Object(n["a"])(t,"yyyy-MM-dd hh:mm")}}},props:{couponids:{type:Array},updateIds:{type:Array},updateName:{type:Array}},data:function(){return{isTemplate:!1,loading:!1,tableFrom:{receive_type:3,page:1,limit:10},total:0,ids:[],texts:[],columns:[{type:"selection",width:60,align:"center"},{title:"ID",key:"id",width:60},{title:"优惠券名称",key:"title",minWidth:150},{title:"优惠券类型",slot:"type",minWidth:80},{title:"面值",key:"coupon_price",minWidth:100},{title:"最低消费额",key:"use_min_price",minWidth:100},{title:"发布数量",slot:"count",minWidth:120},{title:"有效期限",slot:"start_time",minWidth:120},{title:"状态",slot:"status",minWidth:80}],couponList:[],selectedIds:new Set,selectedNames:new Set}},mounted:function(){},watch:{updateIds:function(e){this.selectedIds=new Set(e)},updateName:function(e){this.selectedNames=new Set(e)}},methods:{unique:function(e){var t=new Map;return e.filter((function(e){return!t.has(e.id)&&t.set(e.id,1)}))},handleSelectAll:function(e){var t=this;if(0===e.length){var a=this,i=a.$refs.table.data;i.forEach((function(e){if(a.selectedIds.has(e.id)){a.selectedIds.delete(e.id);var t=a.unique(Array.from(a.selectedNames));a.unique(Array.from(a.selectedNames)).forEach((function(a,i){a.id===e.id&&t.splice(i,1)})),a.selectedNames=new Set(t)}}))}else e.forEach((function(e){t.selectedIds.add(e.id),t.selectedNames.add({id:e.id,title:e.title})}));this.$nextTick((function(){t.setChecked()}))},handleSelectRow:function(e,t){var a=this;this.selectedIds.add(t.id),this.selectedNames.add({id:t.id,title:t.title}),this.$nextTick((function(){a.setChecked()}))},handleCancelRow:function(e,t){var a=this,i=this;i.selectedIds.delete(t.id);var r=Array.from(i.selectedNames);Array.from(i.selectedNames).forEach((function(e,a){e.id===t.id&&r.splice(a,1)})),i.selectedNames=new Set(r),this.$nextTick((function(){a.setChecked()}))},setChecked:function(){this.ids=s(this.selectedIds),this.texts=s(this.selectedNames);var e=this.$refs.table.objData;for(var t in e)this.selectedIds.has(e[t].id)&&(e[t]._isChecked=!0)},cancel:function(){this.isTemplate=!1},tableList:function(){var e=this;this.loading=!0,Object(o["P"])(this.tableFrom).then((function(t){var a=t.data;e.couponList=a.list,e.$nextTick((function(){e.setChecked()})),e.total=a.count,e.loading=!1}))},ok:function(){this.$emit("nameId",this.ids,this.texts)},receivePageChange:function(e){this.tableFrom.page=e,this.tableList()}}},u=m,p=a("2877"),f=Object(p["a"])(u,i,r,!1,null,"3d6e4f00",null);t["a"]=f.exports}}]);