(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d20f012"],{b27c:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"i-layout-page-header"},[i("PageHeader",{staticClass:"product_tabs",attrs:{title:t.$route.meta.title,"hidden-breadcrumb":""}})],1),i("Card",{staticClass:"ivu-mt",attrs:{bordered:!1,"dis-hover":""}},[i("div",{staticClass:"acea-row row-between-wrapper"},[i("Row",{attrs:{type:"flex"}},[i("Col",t._b({},"Col",t.grid,!1),[i("div",{staticClass:"button acea-row row-middle"},[i("Button",{attrs:{type:"primary",icon:"md-add"},on:{click:t.add}},[t._v("添加")])],1)])],1)],1),i("Table",{ref:"table",staticClass:"mt25",attrs:{columns:t.columns1,data:t.list,loading:t.loading,"highlight-row":"","no-userFrom-text":"暂无数据","no-filtered-userFrom-text":"暂无筛选结果"},scopedSlots:t._u([{key:"region",fn:function(e){var n=e.row;e.index;return[i("div",{staticClass:"font-blue"},[t._v("\n          "+t._s(1==n.type?"默认模板":2==n.type?"行业模板":"活动模板")+"\n        ")])]}},{key:"action",fn:function(e){var n=e.row,a=e.index;return[n.status||n.is_diy?i("a",{on:{click:function(e){return t.edit(n)}}},[t._v("编辑")]):t._e(),1!=n.id&&n.is_diy?i("div",{staticStyle:{display:"inline-block"}},[n.status||n.is_diy?i("Divider",{attrs:{type:"vertical"}}):t._e(),i("a",{on:{click:function(e){return t.del(n,a)}}},[t._v("删除")])],1):t._e(),1!=n.status?i("div",{staticStyle:{display:"inline-block"}},[n.status||n.is_diy?i("Divider",{attrs:{type:"vertical"}}):t._e(),i("a",{on:{click:function(e){return t.setStatus(n,a)}}},[t._v("设为首页")])],1):t._e(),n.is_diy?t._e():i("div",{staticStyle:{display:"inline-block"}},[i("Divider",{attrs:{type:"vertical"}}),i("a",{on:{click:function(e){return t.recovery(n,a)}}},[t._v("恢复初始设置")]),i("Divider",{attrs:{type:"vertical"}}),i("a",{on:{click:function(e){return t.del(n,a)}}},[t._v("删除")])],1)]}}])})],1)],1)},a=[],s=i("a34a"),r=i.n(s),o=i("f478");i("2f62");function c(t,e,i,n,a,s,r){try{var o=t[s](r),c=o.value}catch(d){return void i(d)}o.done?e(c):Promise.resolve(c).then(n,a)}function d(t){return function(){var e=this,i=arguments;return new Promise((function(n,a){var s=t.apply(e,i);function r(t){c(s,n,a,r,o,"next",t)}function o(t){c(s,n,a,r,o,"throw",t)}r(void 0)}))}}var l={name:"devise_list",data:function(){return{grid:{xl:7,lg:7,md:12,sm:24,xs:24},loading:!1,columns1:[{title:"页面ID",key:"id",minWidth:120},{title:"模板名称",key:"name",minWidth:120},{title:"页面类型",slot:"region",minWidth:120},{title:"添加时间",key:"add_time",minWidth:120},{title:"更新时间",key:"update_time",minWidth:120},{title:"操作",slot:"action",fixed:"right",minWidth:300}],list:[]}},created:function(){this.getList()},methods:{getList:function(){var t=this;this.loading=!0,Object(o["d"])({type:1}).then((function(e){t.loading=!1,t.list=e.data.list}))},edit:function(t){if(t.is_diy)this.$router.push({path:"/admin/setting/pages/diy",query:{id:t.id,name:t.template_name||"moren"}});else{var e=window.localStorage;e.setItem("pageName",t.template_name),this.$store.dispatch("admin/user/getPageName"),this.$router.push({path:"/admin/setting/pages/template",query:{id:t.id,name:t.template_name}})}},add:function(){this.$router.push({path:"/admin/setting/pages/diy",query:{id:0,name:"首页",type:1}})},del:function(t){var e=this,i={title:"删除",num:2e3,success:Object(o["b"])(t.id,{type:1})};this.$modalSure(i).then((function(t){e.getList()})).catch((function(t){e.$Message.error(t.msg)}))},setStatus:function(){var t=d(r.a.mark((function t(e){var i=this;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.$Modal.confirm({title:"提示",content:"<p>是否把该模板设为首页</p>",onOk:function(){Object(o["k"])(e.id,{type:1}).then((function(t){t.data.status?(i.$Message.success(t.data.msg),i.$Modal.remove(),i.getList()):setTimeout((function(t){i.$Modal.confirm({title:"提示",content:"<p>尚未安装模板，请购买安装后再试！</p>",loading:!1,okText:"点击购买",onOk:function(){window.open("http://s.crmeb.com/goods_cate","_blank")}})}),200)})).catch((function(t){i.$Modal.remove(),i.$Message.error(t.msg)}))}});case 1:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),recovery:function(t){var e=this;Object(o["j"])(t.id).then((function(t){e.$Message.success(t.msg),e.getList()}))}}},u=l,m=i("2877"),p=Object(m["a"])(u,n,a,!1,null,"d52f9a16",null);e["default"]=p.exports}}]);