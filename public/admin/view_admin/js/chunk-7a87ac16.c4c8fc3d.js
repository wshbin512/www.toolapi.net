(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7a87ac16"],{5765:function(t,e,a){"use strict";var i=a("e7f0"),r=a.n(i);r.a},"696b":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"article-manager"},[a("div",{staticClass:"i-layout-page-header"},[a("PageHeader",{staticClass:"product_tabs",attrs:{title:"商品管理","hidden-breadcrumb":""}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("Tabs",{on:{"on-click":t.onClickTab},model:{value:t.artFrom.type,callback:function(e){t.$set(t.artFrom,"type",e)},expression:"artFrom.type"}},t._l(t.headeNum,(function(t,e){return a("TabPane",{key:e,attrs:{label:t.name+"("+t.count+")",name:t.type.toString()}})})),1)],1)])],1),t.alertShow?a("Alert",{staticClass:"ivu-mt",attrs:{banner:"",closable:"",type:"warning"},on:{"on-close":t.closeAlert}},[a("router-link",{attrs:{to:"/admin/product/add_product/0"}},[t._v("您有未完成的商品添加操作，点击此处可继续添加操作？")])],1):t._e(),a("Card",{staticClass:"ivu-mt",attrs:{bordered:!1,"dis-hover":""}},[a("Form",{ref:"artFrom",attrs:{model:t.artFrom,"label-width":t.labelWidth,"label-position":t.labelPosition},nativeOn:{submit:function(t){t.preventDefault()}}},[a("Row",{attrs:{type:"flex",gutter:24}},[a("Col",t._b({},"Col",t.grid,!1),[a("FormItem",{attrs:{label:"商品分类：","label-for":"pid"}},[a("Cascader",{attrs:{data:t.data1,"change-on-select":""},on:{"on-change":t.cascaderSearchs},model:{value:t.value1,callback:function(e){t.value1=e},expression:"value1"}})],1)],1),a("Col",t._b({},"Col",t.grid,!1),[a("FormItem",{attrs:{label:"商品搜索：","label-for":"store_name"}},[a("Input",{attrs:{search:"","enter-button":"",placeholder:"请输入商品名称,关键字,ID"},on:{"on-search":t.userSearchs},model:{value:t.artFrom.store_name,callback:function(e){t.$set(t.artFrom,"store_name",e)},expression:"artFrom.store_name"}})],1)],1)],1)],1),a("div",{staticClass:"Button"},[a("router-link",{directives:[{name:"auth",rawName:"v-auth",value:["product-product-save"],expression:"['product-product-save']"}],attrs:{to:"/admin/product/add_product"}},[a("Button",{staticClass:"bnt mr15",attrs:{type:"primary",icon:"md-add"}},[t._v("添加商品")])],1),a("Button",{directives:[{name:"auth",rawName:"v-auth",value:["product-crawl-save"],expression:"['product-crawl-save']"}],staticClass:"bnt mr15",attrs:{type:"success"},on:{click:t.onCopy}},[t._v("商品采集")]),a("Tooltip",{attrs:{content:"本页至少选中一项",disabled:!!t.formSelection.length}},[a("Button",{directives:[{name:"auth",rawName:"v-auth",value:["product-product-product_show"],expression:"['product-product-product_show']"},{name:"show",rawName:"v-show",value:"1"===t.artFrom.type,expression:"artFrom.type === '1'"}],staticClass:"bnt mr15",attrs:{disabled:!t.formSelection.length},on:{click:t.onDismount}},[t._v("批量下架")])],1),a("Tooltip",{attrs:{content:"本页至少选中一项",disabled:!!t.formSelection.length}},[a("Button",{directives:[{name:"auth",rawName:"v-auth",value:["product-product-product_show"],expression:"['product-product-product_show']"},{name:"show",rawName:"v-show",value:"2"===t.artFrom.type,expression:"artFrom.type === '2'"}],staticClass:"bnt mr15",attrs:{disabled:!t.formSelection.length},on:{click:t.onShelves}},[t._v("批量上架")])],1),a("Tooltip",{attrs:{content:"本页至少选中一项",disabled:!!t.formSelection.length}},[a("Button",{directives:[{name:"auth",rawName:"v-auth",value:["export-storeProduct"],expression:"['export-storeProduct']"}],staticClass:"export",attrs:{icon:"ios-share-outline",disabled:!t.formSelection.length},on:{click:t.exports}},[t._v("导出")])],1)],1),a("Table",{ref:"table",staticClass:"ivu-mt",attrs:{columns:"1"!==t.artFrom.type&&"2"!==t.artFrom.type?t.columns2:t.columns,data:t.tableList,loading:t.loading,"highlight-row":"","no-data-text":"暂无数据","no-filtered-data-text":"暂无筛选结果"},on:{"on-selection-change":t.onSelectTab,"on-select-all":t.selectAll,"on-select-all-cancel":t.selectAll},scopedSlots:t._u([{key:"id",fn:function(e){var a=e.row;return[t._v("\n                "+t._s(a.id)+"\n            ")]}},{key:"image",fn:function(t){var e=t.row;return[a("viewer",[a("div",{staticClass:"tabBox_img"},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.image,expression:"row.image"}]})])])]}},{key:"state",fn:function(e){var i=e.row;e.index;return[a("i-switch",{attrs:{value:i.is_show,"true-value":1,"false-value":0,size:"large"},on:{"on-change":function(e){return t.changeSwitch(i)}},model:{value:i.is_show,callback:function(e){t.$set(i,"is_show",e)},expression:"row.is_show"}},[a("span",{attrs:{slot:"open"},slot:"open"},[t._v("上架")]),a("span",{attrs:{slot:"close"},slot:"close"},[t._v("下架")])])]}},{key:"action",fn:function(e){var i=e.row,r=e.index;return[a("a",{on:{click:function(e){return t.edit(i)}}},[t._v("编辑")]),a("Divider",{attrs:{type:"vertical"}}),a("router-link",{attrs:{to:{path:"/admin/product/product_reply/"+i.id}}},[a("a",[t._v("查看评论")])]),a("Divider",{attrs:{type:"vertical"}}),"6"===t.artFrom.type?a("a",{on:{click:function(e){return t.del(i,"恢复商品",r)}}},[t._v("恢复商品")]):a("a",{on:{click:function(e){return t.del(i,"移入回收站",r)}}},[t._v("移到回收站")])]}}])}),a("div",{staticClass:"acea-row row-right page"},[a("Page",{attrs:{total:t.total,current:t.artFrom.page,"show-elevator":"","show-total":"","page-size":t.artFrom.limit},on:{"on-change":t.pageChange}})],1),a("attribute",{attrs:{attrTemplate:t.attrTemplate},on:{changeTemplate:t.changeTemplate}})],1),a("Modal",{staticClass:"Box",attrs:{"z-index":100,scrollable:"","footer-hide":"",closable:"",title:"复制淘宝、天猫、京东、苏宁、1688","mask-closable":!1,width:"1200",height:"500"},model:{value:t.modals,callback:function(e){t.modals=e},expression:"modals"}},[t.modals?a("tao-bao",{ref:"taobaos",on:{"on-close":t.onClose}}):t._e()],1)],1)},r=[],o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Row",{staticClass:"expand-row"},[a("Col",{attrs:{span:"8"}},[a("span",{staticClass:"expand-key"},[t._v("商品分类：")]),a("span",{staticClass:"expand-value"},[t._v(t._s(t.row.cate_name))])]),a("Col",{attrs:{span:"8"}},[a("span",{staticClass:"expand-key"},[t._v("商品市场价格：")]),a("span",{staticClass:"expand-value"},[t._v(t._s(t.row.ot_price))])]),a("Col",{attrs:{span:"8"}},[a("span",{staticClass:"expand-key"},[t._v("成本价：")]),a("span",{staticClass:"expand-value"},[t._v(t._s(t.row.cost))])])],1),a("Row",{staticClass:"expand-row"},[a("Col",{attrs:{span:"8"}},[a("span",{staticClass:"expand-key"},[t._v("收藏：")]),a("span",{staticClass:"expand-value"},[t._v(t._s(t.row.collect))])]),a("Col",{attrs:{span:"8"}},[a("span",{staticClass:"expand-key"},[t._v("虚拟销量：")]),a("span",{staticClass:"expand-value"},[t._v(t._s(t.row.ficti))])])],1)],1)},n=[],s={props:{row:Object}},c=s,l=(a("5765"),a("2877")),u=Object(l["a"])(c,o,n,!1,null,"f10dae2c",null),d=u.exports,m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Modal",{attrs:{title:"商品属性",width:"70%"},on:{"on-cancel":t.cancel},model:{value:t.val,callback:function(e){t.val=e},expression:"val"}},[a("div",{staticClass:"Modals"},[a("Form",{ref:"form",staticClass:"form",attrs:{"label-width":t.labelWidth,"label-position":t.labelPosition}},[a("Row",{attrs:{gutter:24,type:"flex"}},[a("Col",{attrs:{xl:24,lg:24,md:24,sm:24,xs:24}},[a("FormItem",{attrs:{label:"规格：",prop:"store_name","label-for":"store_name"}},[t._l(t.specs,(function(t,e){return a("Input",{key:e,staticClass:"input",staticStyle:{width:"10%"},attrs:{placeholder:"规格",value:t}},[a("Icon",{attrs:{slot:"suffix",type:"md-close"},slot:"suffix"})],1)})),a("Input",{staticClass:"input",staticStyle:{width:"10%"},attrs:{placeholder:"请输入"},model:{value:t.specsVal,callback:function(e){t.specsVal=e},expression:"specsVal"}},[a("Icon",{attrs:{slot:"suffix",type:"md-add"},on:{click:t.confirm},slot:"suffix"})],1)],2)],1),a("Col",{attrs:{xl:24,lg:24,md:24,sm:24,xs:24}},t._l(t.attrList,(function(e,i){return a("FormItem",{key:i,attrs:{label:e.attr+":",prop:"store_name","label-for":"store_name"}},[t._l(e.attrVal,(function(e,i){return a("Tag",{key:i,attrs:{type:"border",closable:"",color:"primary"}},[t._v(t._s(e))])})),a("Input",{staticClass:"input",staticStyle:{width:"10%"},attrs:{placeholder:"请输入"},model:{value:e.inputVal,callback:function(a){t.$set(e,"inputVal",a)},expression:"item.inputVal"}},[a("Icon",{attrs:{slot:"suffix",type:"md-add"},on:{click:function(e){return t.confirmAttr(i)}},slot:"suffix"})],1)],2)})),1)],1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"})])],1)},p=[],f=a("2f62");function h(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function g(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?h(a,!0).forEach((function(e){b(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):h(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function b(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var v={name:"attribute",props:{attrTemplate:{type:Boolean}},data:function(){return{val:!1,specsVal:"",specs:[],attrVal:"",attrList:[]}},watch:{attrTemplate:function(t){this.val=t}},computed:g({},Object(f["e"])("admin/layout",["isMobile"]),{labelWidth:function(){return this.isMobile?void 0:70},labelPosition:function(){return this.isMobile?"top":"right"}}),methods:{cancel:function(){this.$emit("changeTemplate",!1)},confirm:function(){var t=this;""===this.specsVal?this.$Message.error("请填写规格名称"):(this.specs.push(this.specsVal),this.attrList.push({attr:this.specsVal,inputVal:"",attrVal:[]}),this.specsVal="",""!==this.specsVal&&this.attrList.forEach((function(e){e.attrVal.length<1&&t.$Message.error("请填写规格属性")})))},confirmAttr:function(t){var e=this.attrList[t];""===e.inputVal?this.$Message.error("请填写规格属性"):(e.attrVal.push(e.inputVal),e.inputVal)}},mounted:function(){}},_=v,w=(a("c749"),Object(l["a"])(_,m,p,!1,null,"1ac11f9b",null)),y=w.exports,x=a("4ad8"),k=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"Box"},[a("Card",[a("div",[t._v("生成的商品默认是没有上架的，请手动上架商品！\n                "),2==t.copyConfig.copy_type?a("a",{attrs:{href:"http://help.crmeb.net/crmeb-v4/1863579",target:"_blank"}},[t._v("如何配置密钥")]):a("span",[t._v("您当前剩余"+t._s(t.copyConfig.copy_num)+"条采集次数，"),a("a",{attrs:{href:"#"},on:{click:function(e){return t.mealPay("copy")}}},[t._v("增加采集次数")])])]),a("div",[t._v("商品采集设置：设置 > 系统设置 > 第三方接口设置 > 采集商品配置")])]),a("Form",{ref:"formValidate",staticClass:"formValidate mt20",attrs:{model:t.formValidate,rules:t.ruleInline,"label-width":t.labelWidth,"label-position":t.labelPosition},nativeOn:{submit:function(t){t.preventDefault()}}},[a("Row",{attrs:{gutter:24,type:"flex"}},[a("Col",{attrs:{span:"15"}},[a("FormItem",{attrs:{label:"链接地址："}},[a("Input",{staticClass:"numPut",attrs:{search:"","enter-button":"确定",placeholder:"请输入链接地址"},on:{"on-search":t.add},model:{value:t.soure_link,callback:function(e){t.soure_link=e},expression:"soure_link"}})],1)],1),a("div",[t.isData?a("div",[a("Col",{attrs:{span:"24"}},[a("FormItem",{attrs:{label:"商品名称：",prop:"store_name"}},[a("Input",{attrs:{placeholder:"请输入商品名称"},model:{value:t.formValidate.store_name,callback:function(e){t.$set(t.formValidate,"store_name",e)},expression:"formValidate.store_name"}})],1)],1),a("Col",{attrs:{span:"24"}},[a("FormItem",{attrs:{label:"商品简介：",prop:"store_info","label-for":"store_info"}},[a("Input",{attrs:{type:"textarea",rows:3,placeholder:"请输入商品简介"},model:{value:t.formValidate.store_info,callback:function(e){t.$set(t.formValidate,"store_info",e)},expression:"formValidate.store_info"}})],1)],1),a("Col",{attrs:{span:"24"}},[a("FormItem",{attrs:{label:"商品分类：",prop:"cate_id"}},[a("Select",{attrs:{multiple:""},model:{value:t.formValidate.cate_id,callback:function(e){t.$set(t.formValidate,"cate_id",e)},expression:"formValidate.cate_id"}},t._l(t.treeSelect,(function(e){return a("Option",{key:e.id,attrs:{disabled:0===e.pid,value:e.id}},[t._v(t._s(e.html+e.cate_name))])})),1)],1)],1),a("Col",t._b({},"Col",t.grid,!1),[a("FormItem",{attrs:{label:"商品关键字：",prop:"keyword","label-for":"keyword"}},[a("Input",{attrs:{placeholder:"请输入商品关键字"},model:{value:t.formValidate.keyword,callback:function(e){t.$set(t.formValidate,"keyword",e)},expression:"formValidate.keyword"}})],1)],1),a("Col",t._b({},"Col",t.grid,!1),[a("FormItem",{attrs:{label:"单位：",prop:"unit_name","label-for":"unit_name"}},[a("Input",{attrs:{placeholder:"请输入单位"},model:{value:t.formValidate.unit_name,callback:function(e){t.$set(t.formValidate,"unit_name",e)},expression:"formValidate.unit_name"}})],1)],1),a("Col",t._b({},"Col",t.grid,!1),[a("FormItem",{attrs:{label:"虚拟销量：","label-for":"ficti"}},[a("InputNumber",{directives:[{name:"width",rawName:"v-width",value:"100%",expression:"'100%'"}],attrs:{placeholder:"请输入虚拟销量"},model:{value:t.formValidate.ficti,callback:function(e){t.$set(t.formValidate,"ficti",e)},expression:"formValidate.ficti"}})],1)],1),a("Col",t._b({},"Col",t.grid,!1),[a("FormItem",{attrs:{label:"积分：","label-for":"give_integral"}},[a("InputNumber",{directives:[{name:"width",rawName:"v-width",value:"100%",expression:"'100%'"}],attrs:{placeholder:"请输入积分"},model:{value:t.formValidate.give_integral,callback:function(e){t.$set(t.formValidate,"give_integral",e)},expression:"formValidate.give_integral"}})],1)],1),a("Col",t._b({},"Col",t.grid,!1),[a("FormItem",{attrs:{label:"运费模板：",prop:"temp_id"}},[a("Select",{attrs:{clearable:""},model:{value:t.formValidate.temp_id,callback:function(e){t.$set(t.formValidate,"temp_id",e)},expression:"formValidate.temp_id"}},t._l(t.templateList,(function(e,i){return a("Option",{key:i,attrs:{value:e.id}},[t._v(t._s(e.name))])})),1)],1)],1),a("Col",{attrs:{span:"24"}},[a("FormItem",{attrs:{label:"商品图："}},[a("div",{staticClass:"pictrueBox"},[t.formValidate.image?a("div",{staticClass:"pictrue"},[a("viewer",[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.formValidate.image,expression:"formValidate.image"}]})])],1):t._e()])])],1),a("Col",{attrs:{span:"24"}},[a("FormItem",{attrs:{label:"商品轮播图："}},[a("viewer",[a("div",{staticClass:"acea-row"},t._l(t.formValidate.slider_image,(function(e,i){return a("div",{key:i,staticClass:"lunBox mr15",attrs:{draggable:"true"},on:{dragstart:function(a){return t.handleDragStart(a,e)},dragover:function(a){return a.preventDefault(),t.handleDragOver(a,e)},dragenter:function(a){return t.handleDragEnter(a,e)},dragend:function(a){return t.handleDragEnd(a,e)}}},[a("div",{staticClass:"pictrue"},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e,expression:"item"}]})]),a("ButtonGroup",{attrs:{size:"small"}},[a("Button",{nativeOn:{click:function(a){return t.checked(e,i)}}},[t._v("主图")]),a("Button",{nativeOn:{click:function(e){return t.handleRemove(i)}}},[t._v("移除")])],1)],1)})),0)])],1)],1),a("Col",{attrs:{span:"24"}},[t.formValidate.attrs?a("FormItem",{staticClass:"labeltop",attrs:{label:"批量设置："}},[a("Table",{attrs:{data:t.oneFormBatch,columns:t.columnsBatch,border:""},scopedSlots:t._u([{key:"pic",fn:function(e){e.row;var i=e.index;return[a("div",{staticClass:"acea-row row-middle row-center-wrapper",on:{click:function(e){return t.modalPicTap("dan","duopi",i)}}},[t.oneFormBatch[0].pic?a("div",{staticClass:"pictrue pictrueTab"},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.oneFormBatch[0].pic,expression:"oneFormBatch[0].pic"}]})]):a("div",{staticClass:"upLoad pictrueTab acea-row row-center-wrapper"},[a("Icon",{staticClass:"iconfont",attrs:{type:"ios-camera-outline",size:"21"}})],1)])]}},{key:"price",fn:function(e){e.row,e.index;return[a("InputNumber",{staticClass:"priceBox",attrs:{min:0},model:{value:t.oneFormBatch[0].price,callback:function(e){t.$set(t.oneFormBatch[0],"price",e)},expression:"oneFormBatch[0].price"}})]}},{key:"cost",fn:function(e){e.row,e.index;return[a("InputNumber",{staticClass:"priceBox",attrs:{min:0},model:{value:t.oneFormBatch[0].cost,callback:function(e){t.$set(t.oneFormBatch[0],"cost",e)},expression:"oneFormBatch[0].cost"}})]}},{key:"ot_price",fn:function(e){e.row,e.index;return[a("InputNumber",{staticClass:"priceBox",attrs:{min:0},model:{value:t.oneFormBatch[0].ot_price,callback:function(e){t.$set(t.oneFormBatch[0],"ot_price",e)},expression:"oneFormBatch[0].ot_price"}})]}},{key:"stock",fn:function(e){e.row,e.index;return[a("InputNumber",{staticClass:"priceBox",attrs:{min:0},model:{value:t.oneFormBatch[0].stock,callback:function(e){t.$set(t.oneFormBatch[0],"stock",e)},expression:"oneFormBatch[0].stock"}})]}},{key:"bar_code",fn:function(e){e.row,e.index;return[a("Input",{model:{value:t.oneFormBatch[0].bar_code,callback:function(e){t.$set(t.oneFormBatch[0],"bar_code",e)},expression:"oneFormBatch[0].bar_code"}})]}},{key:"weight",fn:function(e){e.row,e.index;return[a("InputNumber",{staticClass:"priceBox",attrs:{min:0},model:{value:t.oneFormBatch[0].weight,callback:function(e){t.$set(t.oneFormBatch[0],"weight",e)},expression:"oneFormBatch[0].weight"}})]}},{key:"volume",fn:function(e){e.row,e.index;return[a("InputNumber",{staticClass:"priceBox",attrs:{min:0},model:{value:t.oneFormBatch[0].volume,callback:function(e){t.$set(t.oneFormBatch[0],"volume",e)},expression:"oneFormBatch[0].volume"}})]}},{key:"action",fn:function(e){e.row,e.index;return[a("a",{on:{click:t.batchAdd}},[t._v("添加")]),a("Divider",{attrs:{type:"vertical"}}),a("a",{on:{click:t.batchDel}},[t._v("清空")])]}}],null,!1,1150642922)})],1):t._e()],1),a("Col",{attrs:{span:"24"}},[a("FormItem",{attrs:{label:"商品规格：",props:"spec_type","label-for":"spec_type"}},[a("Col",{attrs:{xl:23,lg:24,md:24,sm:24,xs:24}},[a("FormItem",[a("Table",{attrs:{data:t.items,columns:t.columns,border:""},scopedSlots:t._u([{key:"pic",fn:function(e){e.row;var i=e.index;return[a("div",{staticClass:"acea-row row-middle row-center-wrapper",on:{click:function(e){return t.modalPicTap("dan",i)}}},[t.formValidate.attrs[i].pic?a("div",{staticClass:"pictrue pictrueTab"},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.formValidate.attrs[i].pic,expression:"formValidate.attrs[index].pic"}]})]):a("div",{staticClass:"upLoad upLoadTab acea-row row-center-wrapper"},[a("Icon",{staticClass:"iconfont",attrs:{type:"ios-camera-outline",size:"26"}})],1)])]}},{key:"price",fn:function(e){e.row;var i=e.index;return[a("InputNumber",{staticClass:"priceBox",model:{value:t.formValidate.attrs[i].price,callback:function(e){t.$set(t.formValidate.attrs[i],"price",e)},expression:"formValidate.attrs[index].price"}})]}},{key:"cost",fn:function(e){e.row;var i=e.index;return[a("InputNumber",{staticClass:"priceBox",model:{value:t.formValidate.attrs[i].cost,callback:function(e){t.$set(t.formValidate.attrs[i],"cost",e)},expression:"formValidate.attrs[index].cost"}})]}},{key:"ot_price",fn:function(e){e.row;var i=e.index;return[a("InputNumber",{staticClass:"priceBox",model:{value:t.formValidate.attrs[i].ot_price,callback:function(e){t.$set(t.formValidate.attrs[i],"ot_price",e)},expression:"formValidate.attrs[index].ot_price"}})]}},{key:"vip_price",fn:function(e){e.row;var i=e.index;return[a("InputNumber",{staticClass:"priceBox",model:{value:t.formValidate.attrs[i].vip_price,callback:function(e){t.$set(t.formValidate.attrs[i],"vip_price",e)},expression:"formValidate.attrs[index].vip_price"}})]}},{key:"stock",fn:function(e){e.row;var i=e.index;return[a("InputNumber",{staticClass:"priceBox",model:{value:t.formValidate.attrs[i].stock,callback:function(e){t.$set(t.formValidate.attrs[i],"stock",e)},expression:"formValidate.attrs[index].stock"}})]}},{key:"bar_code",fn:function(e){e.row;var i=e.index;return[a("Input",{model:{value:t.formValidate.attrs[i].bar_code,callback:function(e){t.$set(t.formValidate.attrs[i],"bar_code",e)},expression:"formValidate.attrs[index].bar_code"}})]}},{key:"weight",fn:function(e){e.row;var i=e.index;return[a("InputNumber",{staticClass:"priceBox",attrs:{min:0},model:{value:t.formValidate.attrs[i].weight,callback:function(e){t.$set(t.formValidate.attrs[i],"weight",e)},expression:"formValidate.attrs[index].weight"}})]}},{key:"volume",fn:function(e){e.row;var i=e.index;return[a("InputNumber",{staticClass:"priceBox",attrs:{min:0},model:{value:t.formValidate.attrs[i].volume,callback:function(e){t.$set(t.formValidate.attrs[i],"volume",e)},expression:"formValidate.attrs[index].volume"}})]}},{key:"action",fn:function(e){e.row;var i=e.index;return[a("a",{on:{click:function(e){return t.delAttrTable(i)}}},[t._v("删除")])]}}],null,!1,3609281362)})],1)],1)],1)],1),a("Col",{attrs:{span:"24"}},[a("FormItem",{attrs:{label:"商品详情："}},[a("vue-ueditor-wrap",{staticStyle:{width:"100%"},attrs:{config:t.myConfig},on:{beforeInit:t.addCustomDialog},model:{value:t.formValidate.description,callback:function(e){t.$set(t.formValidate,"description",e)},expression:"formValidate.description"}})],1)],1),a("Col",{attrs:{span:"24"}},[a("FormItem",[a("Button",{staticClass:"submission",attrs:{type:"primary",loading:t.modal_loading},on:{click:function(e){return t.handleSubmit("formValidate")}}},[t._v("提交")])],1)],1)],1):t._e(),t.spinShow?a("Spin",{attrs:{size:"large",fix:""}}):t._e()],1)],1)],1),a("Modal",{attrs:{width:"60%",scrollable:"","footer-hide":"",closable:"",title:"上传商品图","mask-closable":!1,"z-index":99999},model:{value:t.modalPic,callback:function(e){t.modalPic=e},expression:"modalPic"}},[t.modalPic?a("uploadPictures",{attrs:{isChoice:t.isChoice,gridBtn:t.gridBtn,gridPic:t.gridPic},on:{getPic:t.getPic}}):t._e()],1)],1)},C=[],V=a("a34a"),F=a.n(V),B=a("c4c8"),O=a("90e7"),$=a("6625"),S=a.n($),I=a("b0e7");function P(t){return A(t)||D(t)||j()}function j(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function D(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function A(t){if(Array.isArray(t)){for(var e=0,a=new Array(t.length);e<t.length;e++)a[e]=t[e];return a}}function T(t,e,a,i,r,o,n){try{var s=t[o](n),c=s.value}catch(l){return void a(l)}s.done?e(c):Promise.resolve(c).then(i,r)}function M(t){return function(){var e=this,a=arguments;return new Promise((function(i,r){var o=t.apply(e,a);function n(t){T(o,i,r,n,s,"next",t)}function s(t){T(o,i,r,n,s,"throw",t)}n(void 0)}))}}function L(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function E(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?L(a,!0).forEach((function(e){N(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):L(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function N(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var W,z={name:"taoBao",data:function(){return{oneFormBatch:[{pic:"",price:0,cost:0,ot_price:0,stock:0,bar_code:"",weight:0,volume:0}],columnsBatch:[{title:"图片",slot:"pic",align:"center",minWidth:80},{title:"售价",slot:"price",align:"center",minWidth:95},{title:"成本价",slot:"cost",align:"center",minWidth:95},{title:"原价",slot:"ot_price",align:"center",minWidth:95},{title:"库存",slot:"stock",align:"center",minWidth:95},{title:"商品编号",slot:"bar_code",align:"center",minWidth:120},{title:"重量（KG）",slot:"weight",align:"center",minWidth:95},{title:"体积(m³)",slot:"volume",align:"center",minWidth:95},{title:"操作",slot:"action",align:"center",minWidth:140}],modal_loading:!1,images:"",soure_link:"",modalPic:!1,isChoice:"",spinShow:!1,gridPic:{xl:6,lg:8,md:12,sm:12,xs:12},gridBtn:{xl:4,lg:8,md:8,sm:8,xs:8},copyConfig:{copy_type:2,copy_num:0},columns:[],treeSelect:[],ruleInline:{cate_id:[{required:!0,message:"请选择商品分类",trigger:"change",type:"array",min:"1"}],temp_id:[{required:!0,message:"请选择运费模板",trigger:"change",type:"number"}]},grid:{xl:8,lg:8,md:12,sm:24,xs:24},grid2:{xl:12,lg:12,md:12,sm:24,xs:24},myConfig:{autoHeightEnabled:!1,initialFrameHeight:500,initialFrameWidth:"100%",UEDITOR_HOME_URL:"/admin/UEditor/",serverUrl:""},formValidate:{store_name:"",cate_id:[],temp_id:"",keyword:"",unit_name:"",store_info:"",image:"",slider_image:[],description:"",ficti:0,give_integral:0,is_show:0,price:0,cost:0,ot_price:0,stock:0,soure_link:"",description_images:"",postage:0,attrs:[],items:[]},items:[{pic:"",price:0,cost:0,ot_price:0,stock:0,bar_code:"",weight:0,volume:0}],templateList:[],isData:!1,artFrom:{type:"taobao",url:""},tableIndex:0}},components:{VueUeditorWrap:S.a,uploadPictures:I["a"]},computed:E({},Object(f["e"])("admin/layout",["isMobile"]),{labelWidth:function(){return this.isMobile?void 0:120},labelPosition:function(){return this.isMobile?"top":"right"}}),created:function(){this.goodsCategory()},mounted:function(){this.productGetTemplate(),this.getCopyConfig()},methods:{mealPay:function(t){var e=this;Object(O["q"])().then(function(){var a=M(F.a.mark((function a(i){var r;return F.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:r=i.data,r.status?e.$router.push({path:"/admin/setting/sms/sms_pay/index",query:{type:t}}):(e.$Message.warning("请先登录"),e.$router.push("/admin/setting/sms/sms_config/index"));case 2:case"end":return a.stop()}}),a)})));return function(t){return a.apply(this,arguments)}}()).catch((function(t){e.$Message.error(t.msg)}))},getCopyConfig:function(){var t=this;Object(B["f"])().then((function(e){t.copyConfig.copy_type=e.data.copy_type,t.copyConfig.copy_num=e.data.copy_num}))},batchDel:function(){this.oneFormBatch=[{pic:"",price:0,cost:0,ot_price:0,stock:0,bar_code:"",weight:0,volume:0}]},batchAdd:function(){var t=this.oneFormBatch[0];this.$set(this.formValidate,"attrs",this.formValidate.attrs.map((function(e){return t.pic&&(e.pic=t.pic),t.price>0&&(e.price=t.price),t.cost>0&&(e.cost=t.cost),t.ot_price>0&&(e.ot_price=t.ot_price),t.stock>0&&(e.stock=t.stock),t.bar_code&&(e.bar_code=t.bar_code),t.weight&&(e.weight=t.weight),t.volume&&(e.volume=t.volume),e})))},delAttrTable:function(t){this.items.splice(t,1)},productGetTemplate:function(){var t=this;Object(B["t"])().then((function(e){t.templateList=e.data}))},handleRemove:function(t){this.formValidate.slider_image.splice(t,1)},checked:function(t,e){this.formValidate.image=t},goodsCategory:function(){var t=this;Object(B["F"])(1).then((function(e){t.treeSelect=e.data})).catch((function(e){t.$Message.error(e.msg)}))},add:function(){var t=this;if(this.soure_link){var e=/(http|ftp|https):\/\/[\w\-_]+(\.[\w\-_]+)+([\w\-\.,@?^=%&:/~\+#]*[\w\-\@?^=%&/~\+#])?/;if(!e.test(this.soure_link))return this.$Message.warning("请输入以http开头的地址！");this.spinShow=!0,this.artFrom.url=this.soure_link,Object(B["g"])(this.artFrom).then((function(e){var a=e.data.info;t.columns=a.info.header,t.formValidate=a,t.formValidate.soure_link=t.soure_link,t.formValidate.attrs=a.info.value,t.formValidate.image&&(t.oneFormBatch[0].pic=t.formValidate.image),t.items=t.formValidate.attrs,t.isData=!0,t.spinShow=!1})).catch((function(e){t.spinShow=!1,t.$Message.error(e.msg)}))}else this.$Message.warning("请输入链接地址！")},handleSubmit:function(t){var e=this;this.$refs[t].validate((function(t){t?(e.modal_loading=!0,Object(B["h"])(e.formValidate).then((function(t){e.$Message.success("商品默认为不上架状态请手动上架商品!"),setTimeout((function(){e.modal_loading=!1}),500),setTimeout((function(){e.$emit("on-close")}),600)})).catch((function(t){e.modal_loading=!1,e.$Message.error(t.msg)}))):e.formValidate.cate_id||e.$Message.warning("请填写商品分类！")}))},modalPicTap:function(t,e){this.modalPic=!0,this.isChoice="dan"===t?"单选":"多选",this.tableIndex=e},getPic:function(t){"duopi"===this.tableIndex?this.oneFormBatch[0].pic=t.att_dir:this.formValidate.attrs[this.tableIndex].pic=t.att_dir,this.modalPic=!1},handleDragStart:function(t,e){this.dragging=e},handleDragEnd:function(t,e){this.dragging=null},handleDragOver:function(t){t.dataTransfer.dropEffect="move"},handleDragEnter:function(t,e){if(t.dataTransfer.effectAllowed="move",e!==this.dragging){var a=P(this.formValidate.slider_image),i=a.indexOf(this.dragging),r=a.indexOf(e);a.splice.apply(a,[r,0].concat(P(a.splice(i,1)))),this.formValidate.slider_image=a}},addCustomDialog:function(t){window.UE.registerUI("test-dialog",(function(t,e){var a=new window.UE.ui.Dialog({iframeUrl:"/admin/widget.images/index.html?fodder=dialog",editor:t,name:e,title:"上传图片",cssRules:"width:1200px;height:500px;padding:20px;"});this.dialog=a;var i=new window.UE.ui.Button({name:"dialog-button",title:"上传图片",cssRules:"background-image: url(../../../assets/images/icons.png);background-position: -726px -77px;",onclick:function(){a.render(),a.open()}});return i}),37)}}},R=z,H=(a("79a1"),Object(l["a"])(R,k,C,!1,null,"05cc26bc",null)),U=H.exports;function q(t){return K(t)||J(t)||G()}function G(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function J(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function K(t){if(Array.isArray(t)){for(var e=0,a=new Array(t.length);e<t.length;e++)a[e]=t[e];return a}}function Y(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function Q(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?Y(a,!0).forEach((function(e){X(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Y(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function X(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var Z={name:"product_productList",components:{expandRow:d,attribute:y,taoBao:U},computed:Q({},Object(f["e"])("admin/layout",["isMobile"]),{},Object(f["e"])("admin/userLevel",["categoryId"]),{labelWidth:function(){return this.isMobile?void 0:75},labelPosition:function(){return this.isMobile?"top":"right"}}),data:function(){var t=this;return{template:!1,modals:!1,grid:{xl:6,lg:8,md:12,sm:24,xs:24},artFrom:{page:1,limit:15,cate_id:"",type:"1",store_name:"",excel:0},list:[],tableList:[],headeNum:[],treeSelect:[],loading:!1,columns:[{type:"expand",width:50,render:function(t,e){return t(d,{props:{row:e.row}})}},{width:60,align:"center",renderHeader:function(e,a){return e("div",{class:{"select-panel":!0},on:{mouseenter:function(e){t.display="block"},mouseleave:function(e){t.display="none"}}},[e("Checkbox",{props:{value:t.checkBox},on:{"on-change":function(e){t.checkBox=e,t.$refs.table.selectAll(t.checkBox),t.isAll=e?0:-1}}}),e("div",{style:{position:"absolute",top:"100%",left:0,zIndex:2,display:t.display,width:"100px",padding:"5px 0",borderRadius:"4px",backgroundColor:"#fff",boxShadow:"0 1px 6px rgba(0, 0, 0, 0.2)",transform:"translateY(-15%)"}},[e("div",{class:{"select-item":!0,on:0===t.isAll},style:{padding:"7px 16px",cursor:"pointer"},on:{click:function(e){0===t.isAll?(t.isAll=-1,t.checkBox=!1,t.$refs.table.selectAll(t.checkBox)):(t.isAll=0,t.formSelection.length||(t.checkBox=!0,t.$refs.table.selectAll(t.checkBox))),t.display="none"}}},"选择当页"),e("div",{class:{"select-item":!0,on:1===t.isAll},style:{padding:"7px 16px",cursor:"pointer"},on:{click:function(e){1===t.isAll?(t.isAll=-1,t.checkBox=!1):(t.isAll=1,t.checkBox=!0),t.$refs.table.selectAll(t.checkBox),t.display="none"}}},"选择全部")])])},render:function(e,a){return e("Checkbox",{props:{value:a.row.checkBox},on:{"on-change":function(e){e?t.formSelection.push(a.row):(t.checkBox=!1,t.formSelection.forEach((function(e,i){e.id===a.row.id&&t.formSelection.splice(i,1)}))),t.ids=t.formSelection.map((function(t){return t.id})),t.isAll=t.formSelection.length?0:-1,a.row.checkBox=e,t.tableList[a.index].checkBox=e}},ref:"checkbox",refInFor:!0})}},{title:"商品ID",slot:"id",width:80},{title:"商品图",slot:"image",minWidth:80},{title:"商品名称",key:"store_name",minWidth:250},{title:"商品售价",key:"price",minWidth:90},{title:"销量",key:"sales",sortable:!0,minWidth:90},{title:"库存",key:"stock",minWidth:80},{title:"排序",key:"sort",minWidth:70},{title:"状态",slot:"state",width:100,filters:[{label:"上架",value:1},{label:"下架",value:0}],filterMethod:function(t,e){return e.is_show===t},filterMultiple:!1},{title:"操作",slot:"action",fixed:"right",minWidth:220}],data:[],total:0,attrTemplate:!1,ids:[],display:"none",formSelection:[],selectionCopy:[],checkBox:!1,isAll:-1,data1:[],value1:[],alertShow:!1}},watch:{$route:function(){"/admin/product/product_list?type=5"===this.$route.fullPath&&this.getPath()},formSelection:function(t){},tableList:{deep:!0,handler:function(t){var e=this;t.forEach((function(t){e.formSelection.forEach((function(e){e.id===t.id&&(t.checkBox=!0)}))}));var a=this.tableList.filter((function(t){return t.checkBox}));this.tableList.length?this.checkBox=this.tableList.length===a.length:this.checkBox=!1}}},created:function(){var t=this;Object(B["o"])().then((function(e){var a=e.data.info;Array.isArray(a)||(t.alertShow=!0)})).catch((function(e){t.$Message.error(e.msg)}))},mounted:function(){this.goodHeade(),this.goodsCategory(),"/admin/product/product_list?type=5"===this.$route.fullPath?this.getPath():this.getDataList()},methods:(W={closeAlert:function(){var t=this;Object(B["b"])().then((function(e){t.$Message.success(e.msg)})).catch((function(e){t.$Message.error(e.msg)}))},selectAll:function(t){var e=this;t.length&&(this.formSelection=t,this.selectionCopy=t),this.selectionCopy.forEach((function(t,a){t.checkBox=e.checkBox,e.$set(e.tableList,a,t)}))},getPath:function(){this.columns2=q(this.columns),"1"!==name&&"2"!==name&&this.columns2.shift({type:"selection",width:60,align:"center"}),this.artFrom.page=1,this.artFrom.type=this.$route.query.type.toString(),this.getDataList()},exports:function(){var t=this,e=this.artFrom,a={};0===this.isAll?a.ids=this.ids.join():1===this.isAll&&(a.cate_id=e.cate_id,a.type=e.type,a.store_name=e.store_name),Object(B["E"])(a).then((function(t){location.href=t.data[0]})).catch((function(e){t.$Message.error(e.msg)}))},changeTemplate:function(t){},freight:function(){this.$refs.template.isTemplate=!0},onShelves:function(){var t=this;if(0===this.ids.length)this.$Message.warning("请选择要上架的商品");else{var e={all:this.isAll};0===this.isAll?e.ids=this.ids:1===this.isAll&&(e.where={cate_id:this.artFrom.cate_id,excel:this.artFrom.excel,store_name:this.artFrom.store_name,type:this.artFrom.type}),Object(B["w"])(e).then((function(e){t.$Message.success(e.msg),t.goodHeade(),t.getDataList()})).catch((function(e){t.$Message.error(e.msg)}))}},onDismount:function(){var t=this;if(0===this.ids.length)this.$Message.warning("请选择要下架的商品");else{var e={all:this.isAll};0===this.isAll?e.ids=this.ids:1===this.isAll&&(e.where={cate_id:this.artFrom.cate_id,excel:this.artFrom.excel,store_name:this.artFrom.store_name,type:this.artFrom.type}),Object(B["x"])(e).then((function(e){t.$Message.success(e.msg),t.goodHeade(),t.getDataList()})).catch((function(e){t.$Message.error(e.msg)}))}},onSelectTab:function(t){this.formSelection=t;var e=[];t.map((function(t){e.push(t.id)})),this.ids=e},onClose:function(){this.modals=!1},onCopy:function(){this.modals=!0},onClickTab:function(t){this.artFrom.type=t,this.columns2=q(this.columns),console.log(this.columns2),"1"!==t&&"2"!==t&&this.columns2.shift({type:"selection",width:60,align:"center"}),this.checkBox=!1,this.getDataList()},handleCheckChange:function(t){var e="",a="";this.list=[],this.artFrom.cate_id=0,t.forEach((function(t,i){e+="".concat(t.id,","),a+="".concat(t.title,",")})),e=e.substring(0,e.length-1),a=a.substring(0,a.length-1),this.list.push({value:e,title:a}),this.artFrom.cate_id=e,this.getDataList()},goodHeade:function(){var t=this;Object(B["k"])().then((function(e){t.headeNum=e.data.list})).catch((function(e){t.$Message.error(e.msg)}))},goodsCategory:function(){var t=this;Object(B["c"])(1).then((function(e){t.data1=e.data})).catch((function(e){t.$Message.error(e.msg)}))},getDataList:function(){var t=this;this.loading=!0,this.artFrom.cate_id=this.artFrom.cate_id||"",Object(B["l"])(this.artFrom).then((function(e){var a=e.data;t.tableList=a.list.map((function(e){return 1===t.isAll?e.checkBox=!0:e.checkBox=!1,e})),t.total=e.data.count,t.loading=!1})).catch((function(e){t.loading=!1,t.$Message.error(e.msg)}))},pageChange:function(t){this.artFrom.page=t,this.getDataList(),this.$refs.table.clearCurrentRow()},cascaderSearchs:function(t,e){this.artFrom.cate_id=t[t.length-1],this.userSearchs()},userSearchs:function(){this.artFrom.page=1,this.formSelection=[],this.getDataList()},changeSwitch:function(t){var e=this;Object(B["a"])(t.id,t.is_show).then((function(t){e.$Message.success(t.msg),e.goodHeade(),e.getDataList()})).catch((function(t){e.$Message.error(t.msg)}))},exportData:function(){var t=["商品名称","商品简介","商品分类","价格","库存","销量","收藏人数"],e=["store_name","store_info","cate_name","price","stock","sales","collect"];this.where.page="nopage",Object(B["l"])(this.where).then((function(a){var i=a.data.map((function(t){return e.map((function(e){return t[e]}))})),r=Date.parse(new Date),o="商户数据_"+r,n="xlsx",s="商户数据";Object(x["a"])({th:t,data:i,fileName:o,fileType:n,sheetName:s})}))},attrTap:function(){this.attrTemplate=!0}},X(W,"changeTemplate",(function(t){this.attrTemplate=t})),X(W,"edit",(function(t){this.$router.push({path:"/admin/product/add_product/"+t.id})})),X(W,"del",(function(t,e,a){var i=this,r={title:e,num:a,url:"product/product/".concat(t.id),method:"DELETE",ids:""};this.$modalSure(r).then((function(t){i.$Message.success(t.msg),i.tableList.splice(a,1),i.goodHeade()})).catch((function(t){i.$Message.error(t.msg)}))})),X(W,"sortChanged",(function(t){this.artFrom[t.key]=t.order,this.getDataList()})),W)},tt=Z,et=(a("fa06"),Object(l["a"])(tt,i,r,!1,null,"738e2a2e",null));e["default"]=et.exports},"79a1":function(t,e,a){"use strict";var i=a("79aa"),r=a.n(i);r.a},"79aa":function(t,e,a){},c749:function(t,e,a){"use strict";var i=a("cc60"),r=a.n(i);r.a},cc60:function(t,e,a){},e36b:function(t,e,a){},e7f0:function(t,e,a){},fa06:function(t,e,a){"use strict";var i=a("e36b"),r=a.n(i);r.a}}]);