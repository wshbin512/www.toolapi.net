(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d9b2256"],{"1adb":function(e,t,r){"use strict";var a=r("bdd8"),o=r.n(a);o.a},"3f19":function(e,t,r){},"669a":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"i-layout-page-header"},[r("PageHeader",{staticClass:"product_tabs",attrs:{title:"提货点","hidden-breadcrumb":""}},[r("div",{attrs:{slot:"content"},slot:"content"},[r("Tabs",{on:{"on-click":e.onClickTab},model:{value:e.artFrom.type,callback:function(t){e.$set(e.artFrom,"type",t)},expression:"artFrom.type"}},[r("TabPane",{attrs:{label:e.headeNum.show.name+"("+e.headeNum.show.num+")",name:"0"}}),r("TabPane",{attrs:{label:e.headeNum.hide.name+"("+e.headeNum.hide.num+")",name:"1"}}),r("TabPane",{attrs:{label:e.headeNum.recycle.name+"("+e.headeNum.recycle.num+")",name:"2"}})],1)],1)])],1),r("Card",{staticClass:"ivu-mt",attrs:{bordered:!1,"dis-hover":""}},[r("Form",{ref:"artFrom",attrs:{model:e.artFrom,"label-width":e.labelWidth,"label-position":e.labelPosition},nativeOn:{submit:function(e){e.preventDefault()}}},[r("Row",{attrs:{type:"flex",gutter:24}},[r("Col",e._b({staticClass:"mr"},"Col",e.grid,!1),[r("FormItem",{attrs:{label:"提货点搜索：","label-for":"store_name"}},[r("Input",{attrs:{search:"","enter-button":"",placeholder:"请输入提货点名称,电话"},on:{"on-search":e.userSearchs},model:{value:e.artFrom.keywords,callback:function(t){e.$set(e.artFrom,"keywords",t)},expression:"artFrom.keywords"}})],1)],1)],1)],1),r("Row",{directives:[{name:"auth",rawName:"v-auth",value:["setting-merchant-system_store-save"],expression:"['setting-merchant-system_store-save']"}],attrs:{type:"flex"}},[r("Col",e._b({},"Col",e.grid,!1),[r("Button",{directives:[{name:"auth",rawName:"v-auth",value:["setting-merchant-system_store-save"],expression:"['setting-merchant-system_store-save']"}],attrs:{type:"primary",icon:"md-add"},on:{click:e.add}},[e._v("添加提货点")])],1)],1),r("Table",{ref:"table",staticClass:"mt25",attrs:{columns:e.columns,data:e.storeLists,loading:e.loading,"highlight-row":"","no-userFrom-text":"暂无数据","no-filtered-userFrom-text":"暂无筛选结果"},scopedSlots:e._u([{key:"image",fn:function(e){var t=e.row;e.index;return[r("viewer",[r("div",{staticClass:"tabBox_img"},[r("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.image,expression:"row.image"}]})])])]}},{key:"is_show",fn:function(t){var a=t.row;t.index;return[r("i-switch",{attrs:{value:a.is_show,"true-value":1,"false-value":0,size:"large"},on:{"on-change":function(t){return e.onchangeIsShow(a.id,a.is_show)}},model:{value:a.is_show,callback:function(t){e.$set(a,"is_show",t)},expression:"row.is_show"}},[e._v(">\n                        "),r("span",{attrs:{slot:"open"},slot:"open"},[e._v("显示")]),r("span",{attrs:{slot:"close"},slot:"close"},[e._v("隐藏")])])]}},{key:"action",fn:function(t){var a=t.row,o=t.index;return[r("a",{on:{click:function(t){return e.edit(a.id)}}},[e._v("编辑")]),r("Divider",{attrs:{type:"vertical"}}),0==a.is_del?r("a",{on:{click:function(t){return e.del(a,"删除提货点",o)}}},[e._v("删除")]):r("a",{on:{click:function(t){return e.del(a,"恢复提货点",o)}}},[e._v("恢复")])]}}])}),r("div",{staticClass:"acea-row row-right page"},[r("Page",{attrs:{total:e.total,current:e.artFrom.page,"show-elevator":"","show-total":"","page-size":e.artFrom.limit},on:{"on-change":e.pageChange}})],1)],1),r("system-store",{ref:"template"})],1)},o=[],n=r("2f62"),i=r("90e7"),s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("Modal",{attrs:{scrollable:"","footer-hide":"",closable:"",title:"添加提货点","z-index":1,width:"700"},on:{"on-cancel":e.cancel},model:{value:e.isTemplate,callback:function(t){e.isTemplate=t},expression:"isTemplate"}},[r("div",{staticClass:"article-manager"},[r("Card",{staticClass:"ivu-mt",attrs:{bordered:!1,"dis-hover":""}},[r("Form",{ref:"formItem",attrs:{model:e.formItem,"label-width":e.labelWidth,"label-position":e.labelPosition,rules:e.ruleValidate},nativeOn:{submit:function(e){e.preventDefault()}}},[r("Row",{attrs:{type:"flex",gutter:24}},[r("Col",{attrs:{span:"24"}},[r("Col",e._b({},"Col",e.grid,!1),[r("FormItem",{attrs:{label:"提货点名称：",prop:"name","label-for":"name"}},[r("Input",{attrs:{placeholder:"请输入提货点名称"},model:{value:e.formItem.name,callback:function(t){e.$set(e.formItem,"name",t)},expression:"formItem.name"}})],1)],1)],1),r("Col",{attrs:{span:"24"}},[r("Col",e._b({},"Col",e.grid,!1),[r("FormItem",{attrs:{label:"提货点简介：","label-for":"introduction"}},[r("Input",{attrs:{placeholder:"请输入提货点简介"},model:{value:e.formItem.introduction,callback:function(t){e.$set(e.formItem,"introduction",t)},expression:"formItem.introduction"}})],1)],1)],1),r("Col",{attrs:{span:"24"}},[r("Col",e._b({},"Col",e.grid,!1),[r("FormItem",{attrs:{label:"提货点手机号：","label-for":"phone",prop:"phone"}},[r("Input",{attrs:{placeholder:"请输入提货点手机号"},model:{value:e.formItem.phone,callback:function(t){e.$set(e.formItem,"phone",t)},expression:"formItem.phone"}})],1)],1)],1),r("Col",{attrs:{span:"24"}},[r("Col",e._b({},"Col",e.grid,!1),[r("FormItem",{attrs:{label:"提货点地址：","label-for":"address",prop:"address"}},[r("Cascader",{attrs:{data:e.addresData,value:e.formItem.address},on:{"on-change":e.handleChange},model:{value:e.formItem.address,callback:function(t){e.$set(e.formItem,"address",t)},expression:"formItem.address"}})],1)],1)],1),r("Col",{attrs:{span:"24"}},[r("Col",e._b({},"Col",e.grid,!1),[r("FormItem",{attrs:{label:"详细地址：","label-for":"detailed_address",prop:"detailed_address"}},[r("Input",{attrs:{placeholder:"请输入详细地址"},model:{value:e.formItem.detailed_address,callback:function(t){e.$set(e.formItem,"detailed_address",t)},expression:"formItem.detailed_address"}})],1)],1)],1),r("Col",{attrs:{span:"24"}},[r("Col",e._b({},"Col",e.grid,!1),[r("FormItem",{attrs:{label:"提货点营业：","label-for":"day_time"}},[r("TimePicker",{attrs:{type:"timerange",format:"HH:mm:ss",value:e.formItem.day_time,placement:"bottom-end",placeholder:"请选择营业时间"},on:{"on-change":e.onchangeTime},model:{value:e.formItem.day_time,callback:function(t){e.$set(e.formItem,"day_time",t)},expression:"formItem.day_time"}})],1)],1)],1),r("Col",{attrs:{span:"24"}},[r("Col",e._b({},"Col",e.grid,!1),[r("FormItem",{attrs:{label:"提货点logo：",prop:"image"}},[r("div",{staticClass:"picBox",on:{click:function(t){return e.modalPicTap("单选")}}},[e.formItem.image?r("div",{staticClass:"pictrue"},[r("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.formItem.image,expression:"formItem.image"}]})]):r("div",{staticClass:"upLoad acea-row row-center-wrapper"},[r("Icon",{staticClass:"iconfont",attrs:{type:"ios-camera-outline",size:"26"}})],1)])])],1)],1),r("Col",{attrs:{span:"24"}},[r("Col",e._b({},"Col",e.grid,!1),[r("FormItem",{attrs:{label:"经纬度：","label-for":"status2",prop:"latlng"}},[r("Tooltip",[r("Input",{staticStyle:{width:"100%"},attrs:{search:"","enter-button":"查找位置",placeholder:"请查找位置"},on:{"on-search":e.onSearch},model:{value:e.formItem.latlng,callback:function(t){e.$set(e.formItem,"latlng",t)},expression:"formItem.latlng"}}),r("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n                                            请点击查找位置选择位置\n                                        ")])],1)],1)],1)],1)],1),r("Row",{attrs:{type:"flex"}},[r("Col",e._b({},"Col",e.grid,!1),[r("Button",{staticClass:"ml20",attrs:{type:"primary"},on:{click:function(t){return e.handleSubmit("formItem")}}},[e._v(e._s(e.formItem.id?"修改":"提交"))])],1)],1),e.spinShow?r("Spin",{attrs:{size:"large",fix:""}}):e._e()],1)],1),r("Modal",{attrs:{width:"60%",scrollable:"","footer-hide":"",closable:"",title:"上传商品图","mask-closable":!1,"z-index":1},model:{value:e.modalPic,callback:function(t){e.modalPic=t},expression:"modalPic"}},[e.modalPic?r("uploadPictures",{attrs:{isChoice:e.isChoice,gridBtn:e.gridBtn,gridPic:e.gridPic},on:{getPic:e.getPic}}):e._e()],1),r("Modal",{staticClass:"mapBox",attrs:{scrollable:"","footer-hide":"",closable:"",title:"上传商品图","mask-closable":!1,"z-index":1},model:{value:e.modalMap,callback:function(t){e.modalMap=t},expression:"modalMap"}},[r("iframe",{attrs:{id:"mapPage",width:"100%",height:"100%",frameborder:"0",src:e.keyUrl}})])],1)])],1)},l=[],c=r("a34a"),m=r.n(c),d=r("2e8e"),u=r("b0e7");function f(e,t,r,a,o,n,i){try{var s=e[n](i),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(a,o)}function h(e){return function(){var t=this,r=arguments;return new Promise((function(a,o){var n=e.apply(t,r);function i(e){f(n,a,o,i,s,"next",e)}function s(e){f(n,a,o,i,s,"throw",e)}i(void 0)}))}}function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(r,!0).forEach((function(t){b(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var v={name:"systemStore",components:{uploadPictures:u["a"]},props:{},data:function(){var e=this,t=function(e,t,r){if(!t)return r(new Error("请填写手机号"));/^1[3456789]\d{9}$/.test(t)?r():r(new Error("手机号格式不正确!"))},r=function(t,r,a){e.formItem.image?a():a(new Error("请上传提货点logo"))};return{isTemplate:!1,spinShow:!1,modalMap:!1,addresData:[],formItem:{name:"",introduction:"",phone:"",address:[],address2:[],detailed_address:"",valid_time:[],day_time:[],latlng:"",id:0},ruleValidate:{name:[{required:!0,message:"请输入提货点名称",trigger:"blur"}],mail:[{required:!0,message:"Mailbox cannot be empty",trigger:"blur"},{type:"email",message:"Incorrect email format",trigger:"blur"}],address:[{required:!0,message:"请选择提货点地址",type:"array",trigger:"change"}],valid_time:[{required:!0,type:"array",message:"请选择核销时效",trigger:"change",fields:{0:{type:"date",required:!0,message:"请选择年度范围"},1:{type:"date",required:!0,message:"请选择年度范围"}}}],day_time:[{required:!0,type:"array",message:"请选择提货点营业时间",trigger:"change"}],phone:[{required:!0,validator:t,trigger:"blur"}],detailed_address:[{required:!0,message:"请输入详细地址",trigger:"blur"}],image:[{required:!0,validator:r,trigger:"change"}],latlng:[{required:!0,message:"请选择经纬度",trigger:"blur"}]},keyUrl:"",grid:{xl:20,lg:20,md:20,sm:24,xs:24},gridPic:{xl:6,lg:8,md:12,sm:12,xs:12},gridBtn:{xl:4,lg:8,md:8,sm:8,xs:8},modalPic:!1,isChoice:"单选"}},created:function(){var e=this;d["a"].map((function(e){e.value=e.label,e.children&&e.children.length&&e.children.map((function(e){e.value=e.label,e.children&&e.children.length&&e.children.map((function(e){e.value=e.label}))}))})),setTimeout((function(){e.addresData=d["a"]}),10),this.getKey()},computed:g({},Object(n["e"])("admin/layout",["isMobile"]),{labelWidth:function(){return this.isMobile?void 0:120},labelPosition:function(){return this.isMobile?"top":"right"}}),mounted:function(){window.addEventListener("message",(function(e){var t=e.data;t&&"locationPicker"===t.module&&window.parent.selectAdderss(t)}),!1),window.selectAdderss=this.selectAdderss},methods:{cancel:function(){this.$refs["formItem"].resetFields(),this.clearFrom()},clearFrom:function(){this.formItem.introduction="",this.formItem.day_time=[]},selectAdderss:function(e){this.formItem.latlng=e.latlng.lat+","+e.latlng.lng,this.modalMap=!1},getKey:function(){var e=this;Object(i["C"])().then(function(){var t=h(m.a.mark((function t(r){var a;return m.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=r.data.key,e.keyUrl="https://apis.map.qq.com/tools/locpicker?type=1&key=".concat(a,"&referer=myapp");case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.$Message.error(t.msg)}))},getInfo:function(e){var t=this;t.formItem.id=e,t.spinShow=!0,Object(i["hb"])(e).then((function(e){var r=e.data.info||null;t.formItem=r||t.formItem,t.formItem.address=r.address2,t.spinShow=!1})).catch((function(e){t.spinShow=!1,t.$Message.error(e.msg)}))},modalPicTap:function(){this.modalPic=!0},getPic:function(e){this.formItem.image=e.att_dir,this.modalPic=!1},handleChange:function(e,t){this.formItem.address=t.map((function(e){return e.label}))},onchangeDate:function(e){this.formItem.valid_time=e},onchangeTime:function(e){this.formItem.day_time=e},onSearch:function(){this.modalMap=!0},handleSubmit:function(e){var t=this;this.$refs[e].validate((function(r){if(!r)return!1;Object(i["eb"])(t.formItem).then(function(){var r=h(m.a.mark((function r(a){return m.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.$Message.success(a.msg),t.isTemplate=!1,t.$parent.getList(),t.$refs[e].resetFields(),t.clearFrom();case 5:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()).catch((function(e){t.$Message.error(e.msg)}))}))}}},y=v,w=(r("1adb"),r("2877")),I=Object(w["a"])(y,s,l,!1,null,"0d95d188",null),_=I.exports;function C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?C(r,!0).forEach((function(t){P(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function P(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var x={name:"setting_store",components:{systemStore:_},computed:k({},Object(n["e"])("admin/layout",["isMobile"]),{},Object(n["e"])("admin/userLevel",["categoryId"]),{labelWidth:function(){return this.isMobile?void 0:85},labelPosition:function(){return this.isMobile?"top":"left"}}),data:function(){return{grid:{xl:10,lg:10,md:12,sm:24,xs:24},headeNum:{show:{name:"",num:0},hide:{name:"",num:0},recycle:{name:"",num:0}},artFrom:{page:1,limit:15,type:"0",keywords:""},loading:!1,columns:[{title:"ID",key:"id",width:80,sortable:!0},{title:"提货点图片",slot:"image",minWidth:100},{title:"提货点名称",key:"name",minWidth:100},{title:"提货点电话",key:"phone",minWidth:100},{title:"地址",key:"detailed_address",minWidth:100},{title:"营业时间",key:"day_time",minWidth:100},{title:"是否显示",slot:"is_show",minWidth:100},{title:"操作",slot:"action",fixed:"right",minWidth:120}],storeLists:[],total:0}},mounted:function(){this.storeHeade(),this.getList()},methods:{storeHeade:function(){var e=this,t=this;Object(i["gb"])().then((function(e){t.headeNum=e.data.count})).catch((function(t){e.$Message.error(t.msg)}))},getList:function(){var e=this,t=this;t.loading=!0,Object(i["F"])(t.artFrom).then((function(e){t.loading=!1,t.storeLists=e.data.list,t.total=e.data.count})).catch((function(t){e.$Message.error(t.msg)}))},userSearchs:function(){this.artFrom.page=1,this.getList()},onClickTab:function(){this.artFrom.page=1,this.artFrom.keywords="",this.getList()},pageChange:function(e){this.artFrom.page=e,this.getList()},del:function(e,t,r){var a=this,o={title:t,num:r,url:"merchant/store/del/".concat(e.id),method:"DELETE",ids:""};this.$modalSure(o).then((function(e){a.$Message.success(e.msg),a.storeLists.splice(r,1),a.storeHeade()})).catch((function(e){a.$Message.error(e.msg)}))},add:function(){this.$refs.template.isTemplate=!0,this.$refs.template.formItem.id=0},onchangeIsShow:function(e,t){var r=this;Object(i["ib"])(e,t).then((function(e){r.$Message.success(e.msg),r.getList(),r.storeHeade()}))},edit:function(e){this.$refs.template.isTemplate=!0,this.$refs.template.getInfo(e)}}},O=x,F=(r("c4c2"),Object(w["a"])(O,a,o,!1,null,"b0d03f1e",null));t["default"]=F.exports},bdd8:function(e,t,r){},c4c2:function(e,t,r){"use strict";var a=r("3f19"),o=r.n(a);o.a}}]);