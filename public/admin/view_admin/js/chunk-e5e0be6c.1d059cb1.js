(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e5e0be6c","chunk-2d0bd5d4"],{"06ac":function(e,t,a){},"1448e":function(e,t,a){},"207f":function(e,t,a){"use strict";var r=a("5bd3"),s=a.n(r);s.a},"2c4a":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Modal",{attrs:{title:"任务列表",width:"1000","footer-hide":""},model:{value:e.modal,callback:function(t){e.modal=t},expression:"modal"}},[e.modal?a("Card",{staticClass:"ivu-mt",attrs:{bordered:!1,"dis-hover":""}},[a("Form",{ref:"formValidate",staticClass:"tabform",attrs:{model:e.formValidate,"label-width":e.labelWidth,"label-position":e.labelPosition},nativeOn:{submit:function(e){e.preventDefault()}}},[a("Row",{attrs:{gutter:24,type:"flex"}},[a("Col",{attrs:{span:"10"}},[a("FormItem",{attrs:{label:"操作时间："}},[a("DatePicker",{staticStyle:{width:"90%"},attrs:{editable:!1,value:e.timeVal,format:"yyyy/MM/dd",type:"datetimerange",placement:"bottom-start",placeholder:"自定义时间",options:e.options},on:{"on-change":e.onchangeTime}})],1)],1),a("Col",{attrs:{span:"7"}},[a("FormItem",{attrs:{label:"类型："}},[a("Select",{attrs:{clearable:""},on:{"on-change":e.typeSearchs},model:{value:e.formValidate.type,callback:function(t){e.$set(e.formValidate,"type",t)},expression:"formValidate.type"}},e._l(e.typeList,(function(t){return a("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])})),1)],1)],1),a("Col",{attrs:{span:"7"}},[a("FormItem",{attrs:{label:"状态："}},[a("Select",{attrs:{clearable:""},on:{"on-change":e.statusSearchs},model:{value:e.formValidate.status,callback:function(t){e.$set(e.formValidate,"status",t)},expression:"formValidate.status"}},e._l(e.statusList,(function(t){return a("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])})),1)],1)],1)],1)],1),a("Table",{staticClass:"mt25",attrs:{height:"530",columns:e.columns1,data:e.data1,loading:e.loading},scopedSlots:e._u([{key:"action",fn:function(t){var r=t.row;t.index;return[r.is_show_log?[a("a",{on:{click:function(t){return e.deliveryLook(r)}}},[e._v("查看")]),a("Divider",{attrs:{type:"vertical"}})]:e._e(),[a("Dropdown",{on:{"on-click":function(t){return e.changeMenu(r,t)}}},[a("a",[e._v("更多"),a("Icon",{attrs:{type:"ios-arrow-down"}})],1),a("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[a("DropdownItem",{attrs:{name:"1"}},[e._v("下载")]),a("DropdownItem",{attrs:{name:"2"}},[e._v("重新执行")]),r.is_stop_button?a("DropdownItem",{attrs:{name:"3"}},[e._v("停止任务")]):e._e(),r.is_error_button?a("DropdownItem",{attrs:{name:"4"}},[e._v("清除异常任务")]):e._e()],1)],1)]]}}],null,!1,169113766)}),a("div",{staticClass:"acea-row row-right page"},[a("Page",{attrs:{total:e.page1.total,current:e.page1.pageNum,"show-elevator":"","show-total":"","page-size":e.page1.pageSize,"show-sizer":""},on:{"on-change":e.pageChange,"on-page-size-change":e.limitChange}})],1)],1):e._e(),a("Modal",{attrs:{width:"900","footer-hide":""},model:{value:e.modal1,callback:function(t){e.modal1=t},expression:"modal1"}},[a("Table",{staticClass:"mt25",attrs:{height:"500",columns:e.columns4,data:e.data2,loading:e.loading2}}),a("div",{staticClass:"acea-row row-right page"},[a("Page",{attrs:{total:e.page2.total,current:e.page2.pageNum,"show-elevator":"","show-total":"","page-size":e.page2.pageSize,"show-sizer":""},on:{"on-change":e.pageChange2,"on-page-size-change":e.limitChange2}})],1)],1)],1)},s=[],n=a("a34a"),i=a.n(n),o=a("f8b7"),l=a("2f62"),c=a("2e83");function u(e,t,a,r,s,n,i){try{var o=e[n](i),l=o.value}catch(c){return void a(c)}o.done?t(l):Promise.resolve(l).then(r,s)}function d(e){return function(){var t=this,a=arguments;return new Promise((function(r,s){var n=e.apply(t,a);function i(e){u(n,r,s,i,o,"next",e)}function o(e){u(n,r,s,i,o,"throw",e)}i(void 0)}))}}function m(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function h(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?m(a,!0).forEach((function(t){f(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):m(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function f(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var p={data:function(){return{modal:!1,columns1:[{title:"ID",key:"id"},{title:"操作时间",key:"add_time"},{title:"发货单数",key:"total_num"},{title:"成功发货单数",key:"success_num"},{title:"发货类型",key:"title"},{title:"状态",key:"status_cn"},{title:"操作",slot:"action",width:150,align:"center"}],data1:[],page1:{total:0,pageNum:1,pageSize:10},formValidate:{type:"",status:"",data:""},options:{shortcuts:[{text:"今天",value:function(){var e=new Date,t=new Date;return t.setTime(new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate())),[t,e]}},{text:"昨天",value:function(){var e=new Date,t=new Date;return t.setTime(t.setTime(new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()-1))),e.setTime(e.setTime(new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()-1))),[t,e]}},{text:"最近7天",value:function(){var e=new Date,t=new Date;return t.setTime(t.setTime(new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()-6))),[t,e]}},{text:"最近30天",value:function(){var e=new Date,t=new Date;return t.setTime(t.setTime(new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()-29))),[t,e]}},{text:"本月",value:function(){var e=new Date,t=new Date;return t.setTime(t.setTime(new Date((new Date).getFullYear(),(new Date).getMonth(),1))),[t,e]}},{text:"本年",value:function(){var e=new Date,t=new Date;return t.setTime(t.setTime(new Date((new Date).getFullYear(),0,1))),[t,e]}}]},timeVal:[],typeList:[{label:"批量删除订单",value:"6"},{label:"批量手动发货",value:"7"},{label:"批量打印电子面单",value:"8"},{label:"批量配送",value:"9"},{label:"批量虚拟发货",value:"10"}],statusList:[{label:"未处理",value:"0"},{label:"处理中",value:"1"},{label:"已完成",value:"2"},{label:"处理失败",value:"3"}],columns2:[{title:"订单ID",key:"order_id"},{title:"物流公司",key:"delivery_name"},{title:"物流单号",key:"delivery_id"},{title:"处理状态",key:"status_cn"},{title:"异常原因",key:"error"}],columns3:[{title:"订单ID",key:"order_id"},{title:"备注",key:"fictitious_content"},{title:"处理状态",key:"status_cn"},{title:"异常原因",key:"error"}],columns5:[{title:"订单ID",key:"order_id"},{title:"配送员",key:"delivery_name"},{title:"配送员电话",key:"delivery_id"},{title:"处理状态",key:"status_cn"},{title:"异常原因",key:"error"}],columns4:[],data2:[],page2:{total:0,pageNum:1,pageSize:12},modal1:!1,deliveryLog:null,deliveryLogId:0,deliveryLogType:"",loading:!1,loading2:!1}},computed:h({},Object(l["e"])("admin/layout",["isMobile"]),{labelWidth:function(){return this.isMobile?void 0:75},labelPosition:function(){return this.isMobile?"top":"right"}}),created:function(){this.getQueue()},methods:{getQueue:function(){var e=this,t={page:this.page1.pageNum,limit:this.page1.pageSize};this.formValidate.status&&(t.status=this.formValidate.status),this.formValidate.type&&(t.type=this.formValidate.type),this.formValidate.data&&(t.data=this.formValidate.data),this.loading=!0,Object(o["H"])(t).then((function(t){e.loading=!1,e.data1=t.data.list,e.page1.total=t.data.count})).catch((function(t){e.loading=!1}))},pageChange:function(e){this.page1.pageNum=e,this.getQueue()},pageChange2:function(e){this.page2.pageNum=e,this.getDeliveryLog()},limitChange:function(e){this.page1.pageSize=e,this.getQueue()},limitChange2:function(e){this.page2.pageSize=e,this.getDeliveryLog()},onchangeTime:function(e){this.timeVal=e,this.formValidate.data=this.timeVal[0]?this.timeVal.join("-"):"",this.page1.pageNum=1,this.getQueue()},typeSearchs:function(){this.page1.pageNum=1,this.getQueue()},statusSearchs:function(){this.page1.pageNum=1,this.getQueue()},getDeliveryLog:function(){var e=this;this.loading2=!0,Object(o["c"])(this.deliveryLogId,this.deliveryLogType,{page:this.page2.pageNum,limit:this.page2.pageSize}).then((function(t){e.loading2=!1,e.data2=t.data.list,e.page2.total=t.data.count})).catch((function(t){e.loading2=!1}))},deliveryLook:function(e){switch(this.modal1=!0,this.deliveryLogId=e.id,this.deliveryLogType=e.cache_type,this.deliveryLog=e,e.type){case 7:case 8:this.columns4=this.columns2;break;case 9:this.columns4=this.columns5;break;case 10:this.columns4=this.columns3;break}this.getDeliveryLog()},changeMenu:function(e,t){var a=this;switch(t){case"1":this.exports(e.id,e.type,e.cache_type);break;case"2":this.queueAgain(e.id,e.type);break;case"3":this.$Modal.confirm({title:"谨慎操作",content:"<p>确认停止该任务？</p>",onOk:function(){a.stopQueue(e.id)}});break;case"4":this.queueDel(e.id,e.type);break}},exports:function(){var e=d(i.a.mark((function e(t,a,r){var s,n,o,l,u;return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=[],n=[],o=[],l="",e.next=3,this.getExcelData(t,a,r);case 3:u=e.sent,l||(l=u.filename),n.length||(n=u.filekey),s.length||(s=u.header),o=u.export,Object(c["a"])(s,n,l,o);case 9:case"end":return e.stop()}}),e,this)})));function t(t,a,r){return e.apply(this,arguments)}return t}(),getExcelData:function(e,t,a){return new Promise((function(r,s){Object(o["a"])(e,t,a).then((function(e){return r(e.data)}))}))},queueAgain:function(e,t){var a=this;Object(o["F"])(e,t).then((function(e){a.$Message.success(e.msg),a.getQueue()})).catch((function(e){a.$Message.error(e.msg)}))},queueDel:function(e,t){var a=this;Object(o["G"])(e,t).then((function(e){a.$Message.success(e.msg),a.getQueue()})).catch((function(e){a.$Message.error(e.msg)}))},stopQueue:function(e){var t=this;Object(o["M"])(e).then((function(e){t.$Message.success(e.msg),t.getQueue()})).catch((function(e){t.$Message.error(e.msg)}))}}},g=p,v=a("2877"),b=Object(v["a"])(g,r,s,!1,null,null,null);t["default"]=b.exports},"5bd3":function(e,t,a){},"5c3ac":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"i-layout-page-header"},[a("PageHeader",{staticClass:"product_tabs",attrs:{title:"订单管理","hidden-breadcrumb":""}},[a("div",{attrs:{slot:"content"},slot:"content"},[e.tablists?a("Tabs",{on:{"on-click":e.onClickTab},model:{value:e.currentTab,callback:function(t){e.currentTab=t},expression:"currentTab"}},[a("TabPane",{attrs:{label:"全部订单（"+e.tablists.all+"）",name:" "}}),a("TabPane",{attrs:{label:"普通订单（"+e.tablists.general+"）",name:"1"}}),a("TabPane",{attrs:{label:"拼团订单（"+e.tablists.pink+"）",name:"2"}}),a("TabPane",{attrs:{label:"秒杀订单（"+e.tablists.seckill+"）",name:"3"}}),a("TabPane",{attrs:{label:"砍价订单（"+e.tablists.bargain+"）",name:"4"}})],1):e._e()],1)])],1),(e.currentTab,a("productlist-details",{ref:"productlist"})),e.spinShow?a("Spin",{attrs:{size:"large",fix:""}}):e._e()],1)},s=[],n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.cardLists.length>=0?a("cards-data",{attrs:{cardLists:e.cardLists}}):e._e(),a("Card",{attrs:{bordered:!1,"dis-hover":""}},[a("table-form",{attrs:{"is-all":e.isAll,"auto-disabled":e.autoDisabled,"form-selection":e.selection},on:{getList:e.getData,"order-data":e.orderDatas}}),a("table-list",{ref:"table",attrs:{where:e.orderData,"is-all":e.isAll},on:{"on-all":e.onAll,"auto-disabled":e.onAutoDisabled,"order-data":e.onOrderData,"on-changeCards":e.getCards,changeGetTabs:e.changeGetTabs,"order-select":e.orderSelect}})],1)],1)},i=[],o=a("a584"),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"table_box"},[a("Form",{ref:"orderData",staticClass:"tabform",attrs:{model:e.orderData,"label-width":e.labelWidth,"label-position":e.labelPosition},nativeOn:{submit:function(e){e.preventDefault()}}},[a("Row",{attrs:{gutter:24,type:"flex",justify:"end"}},[a("Col",{staticClass:"ivu-text-left",attrs:{span:"24"}},[a("FormItem",{attrs:{label:"订单状态："}},[a("RadioGroup",{attrs:{type:"button"},on:{"on-change":function(t){return e.selectChange2(e.orderData.status)}},model:{value:e.orderData.status,callback:function(t){e.$set(e.orderData,"status",t)},expression:"orderData.status"}},[a("Radio",{attrs:{label:""}},[e._v("全部\n              "+e._s(e.orderChartType.statusAll))]),a("Radio",{attrs:{label:"0"}},[e._v("未支付\n              "+e._s(e.orderChartType.unpaid))]),a("Radio",{attrs:{label:"1"}},[e._v("未发货\n              "+e._s(e.orderChartType.unshipped))]),a("Radio",{attrs:{label:"2"}},[e._v("待收货\n              "+e._s(e.orderChartType.untake))]),a("Radio",{attrs:{label:"3"}},[e._v("待评价\n              "+e._s(e.orderChartType.unevaluate))]),a("Radio",{attrs:{label:"4"}},[e._v("交易完成\n              "+e._s(e.orderChartType.complete))]),a("Radio",{attrs:{label:"5"}},[e._v("待核销\n              "+e._s(e.orderChartType.write_off))]),a("Radio",{attrs:{label:"6"}},[e._v("已核销\n              "+e._s(e.orderChartType.write_offed))]),a("Radio",{attrs:{label:"-1"}},[e._v("退款中\n              "+e._s(e.orderChartType.refunding))]),a("Radio",{attrs:{label:"-2"}},[e._v("已退款\n              "+e._s(e.orderChartType.refund))]),a("Radio",{attrs:{label:"-4"}},[e._v("已删除\n              "+e._s(e.orderChartType.del))])],1)],1)],1),a("Col",{staticClass:"ivu-text-left",attrs:{span:"24"}},[a("FormItem",{attrs:{label:"支付方式："}},[a("RadioGroup",{attrs:{type:"button"},on:{"on-change":e.userSearchs},model:{value:e.orderData.pay_type,callback:function(t){e.$set(e.orderData,"pay_type",t)},expression:"orderData.pay_type"}},e._l(e.payList,(function(t){return a("Radio",{attrs:{label:t.val}},[e._v(e._s(t.label))])})),1)],1)],1),a("Col",{staticClass:"ivu-text-left",attrs:{span:"24"}},[a("FormItem",{attrs:{label:"创建时间："}},[a("DatePicker",{staticClass:"mr20",staticStyle:{width:"300px"},attrs:{editable:!1,value:e.timeVal,format:"yyyy/MM/dd HH:mm:ss",type:"datetimerange",placement:"bottom-start",placeholder:"自定义时间",options:e.options},on:{"on-change":e.onchangeTime}})],1)],1),a("Col",{attrs:{span:"24"}},[a("Col",e._b({staticClass:"mr"},"Col",e.grid,!1),[a("FormItem",{attrs:{label:"搜索：",prop:"real_name","label-for":"real_name"}},[a("Input",{attrs:{search:"","enter-button":"",placeholder:"请输入","element-id":"name"},on:{"on-search":function(t){return e.orderSearch(e.orderData.real_name)}},model:{value:e.orderData.real_name,callback:function(t){e.$set(e.orderData,"real_name",t)},expression:"orderData.real_name"}},[a("Select",{staticStyle:{width:"80px"},attrs:{slot:"prepend"},slot:"prepend",model:{value:e.orderData.field_key,callback:function(t){e.$set(e.orderData,"field_key",t)},expression:"orderData.field_key"}},[a("Option",{attrs:{value:"all"}},[e._v("全部")]),a("Option",{attrs:{value:"order_id"}},[e._v("订单号")]),a("Option",{attrs:{value:"uid"}},[e._v("UID")]),a("Option",{attrs:{value:"real_name"}},[e._v("用户姓名")]),a("Option",{attrs:{value:"user_phone"}},[e._v("用户电话")]),a("Option",{attrs:{value:"total_num"}},[e._v("订单中商品件数")]),a("Option",{attrs:{value:"title"}},[e._v("商品名称(模糊)")])],1)],1)],1)],1)],1),a("Col",{attrs:{span:"24"}},[a("div",{staticClass:"acea-row row-between ml20"},[a("div",[a("Tooltip",{directives:[{name:"auth",rawName:"v-auth",value:["order-batch-del_orders"],expression:"['order-batch-del_orders']"}],attrs:{content:"本页至少选中一项",disabled:!e.autoDisabled}},[a("Button",{staticClass:"mr10",attrs:{type:"primary",disabled:e.autoDisabled},on:{click:e.delAll}},[e._v("批量删除订单")])],1),a("Button",{directives:[{name:"auth",rawName:"v-auth",value:["order-hand-batch_delivery"],expression:"['order-hand-batch_delivery']"}],staticClass:"mr10",attrs:{type:"primary"},on:{click:function(t){e.manualModal=!0}}},[e._v("手动批量发货")]),a("Tooltip",{directives:[{name:"auth",rawName:"v-auth",value:["order-other-batch_delivery"],expression:"['order-other-batch_delivery']"}],attrs:{content:"本页至少选中一项",disabled:!e.autoDisabled}},[a("Button",{staticClass:"mr10",attrs:{type:"primary",disabled:e.autoDisabled},on:{click:e.onAuto}},[e._v("自动批量发货")])],1),a("Dropdown",{directives:[{name:"auth",rawName:"v-auth",value:["export-storeOrder"],expression:"['export-storeOrder']"}],staticClass:"mr10",on:{"on-click":e.exports}},[a("Button",{staticStyle:{width:"110px"}},[e._v("\n                "+e._s(e.exportList[e.exportListOn].label)+"\n                "),a("Icon",{attrs:{type:"ios-arrow-down"}})],1),a("DropdownMenu",{attrs:{slot:"list"},slot:"list"},e._l(e.exportList,(function(t,r){return a("DropdownItem",{key:r,staticStyle:{"font-size":"12px !important"},attrs:{name:t.name}},[e._v(e._s(t.label))])})),1)],1),a("Button",{directives:[{name:"auth",rawName:"v-auth",value:["order-write"],expression:"['order-write']"}],staticClass:"mr10 greens",attrs:{size:"default"},on:{click:e.writeOff}},[e._v("\n              订单核销\n            ")])],1),a("div",[a("Button",{directives:[{name:"auth",rawName:"v-auth",value:["queue-index"],expression:"['queue-index']"}],staticClass:"mr10",on:{click:e.queuemModal}},[e._v("批量发货记录")]),a("Button",{directives:[{name:"auth",rawName:"v-auth",value:["export-expressList"],expression:"['export-expressList']"}],staticClass:"mr10",on:{click:e.getExpressList}},[e._v("下载物流公司对照表")])],1)])])],1)],1),a("Modal",{staticClass:"paymentFooter",attrs:{title:"订单核销",scrollable:"",width:"400"},model:{value:e.modals2,callback:function(t){e.modals2=t},expression:"modals2"}},[a("Form",{ref:"writeOffFrom",staticClass:"tabform",attrs:{model:e.writeOffFrom,rules:e.writeOffRules,"label-position":e.labelPosition},nativeOn:{submit:function(e){e.preventDefault()}}},[a("FormItem",{attrs:{prop:"code","label-for":"code"}},[a("Input",{staticStyle:{width:"100%"},attrs:{search:"","enter-button":"验证",type:"text",placeholder:"请输入12位核销码",number:""},on:{"on-search":function(t){return e.search("writeOffFrom")}},model:{value:e.writeOffFrom.code,callback:function(t){e.$set(e.writeOffFrom,"code",e._n(t))},expression:"writeOffFrom.code"}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary"},on:{click:e.ok}},[e._v("立即核销")]),a("Button",{on:{click:function(t){return e.del("writeOffFrom")}}},[e._v("取消")])],1)],1),a("Modal",{attrs:{title:"手动批量发货"},on:{"on-ok":e.manualModalOk,"on-cancel":e.manualModalCancel},model:{value:e.manualModal,callback:function(t){e.manualModal=t},expression:"manualModal"}},[a("Row",{attrs:{type:"flex"}},[a("Col",{attrs:{span:"4"}},[a("div",{staticStyle:{"line-height":"32px","text-align":"right"}},[e._v("文件：")])]),a("Col",{attrs:{span:"20"}},[a("Upload",{ref:"upload",attrs:{action:e.uploadAction,headers:e.uploadHeaders,accept:".xlsx,.xls",format:["xlsx","xls"],disabled:!!e.fileList.length,"on-success":e.uploadSuccess,"on-remove":e.removeFile}},[a("Button",{attrs:{icon:"ios-cloud-upload-outline"}},[e._v("上传文件")])],1)],1)],1)],1),a("auto-send",{ref:"sends",attrs:{"is-all":e.isAll,ids:e.formSelection,where:e.orderData}}),a("queue-list",{ref:"queue"})],1)},c=[],u=a("a34a"),d=a.n(u),m=a("2f62"),h=a("f8b7"),f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Modal",{staticClass:"order_box",attrs:{scrollable:"",title:"订单发送货",closable:!1},model:{value:e.modals,callback:function(t){e.modals=t},expression:"modals"}},[a("Form",{ref:"formItem",attrs:{model:e.formItem,"label-width":100},nativeOn:{submit:function(e){e.preventDefault()}}},[a("FormItem",{attrs:{label:"选择类型："}},[a("RadioGroup",{on:{"on-change":e.changeRadio},model:{value:e.formItem.type,callback:function(t){e.$set(e.formItem,"type",t)},expression:"formItem.type"}},[a("Radio",{attrs:{label:"1"}},[e._v("打印电子面单")]),a("Radio",{attrs:{label:"2"}},[e._v("送货")]),a("Radio",{attrs:{label:"3"}},[e._v("虚拟")])],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"1"===e.formItem.type,expression:"formItem.type === '1'"}]},[a("FormItem",{attrs:{label:"快递公司："}},[a("Select",{staticStyle:{width:"80%"},attrs:{filterable:"",placeholder:"请选择快递公司"},on:{"on-change":e.expressChange},model:{value:e.formItem.delivery_name,callback:function(t){e.$set(e.formItem,"delivery_name",t)},expression:"formItem.delivery_name"}},e._l(e.express,(function(t,r){return a("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.value))])})),1)],1),"1"===e.formItem.type?[a("FormItem",{staticClass:"express_temp_id",attrs:{label:"电子面单："}},[a("Select",{staticStyle:{width:"80%"},attrs:{placeholder:"请选择电子面单"},on:{"on-change":e.expressTempChange},model:{value:e.formItem.express_temp_id,callback:function(t){e.$set(e.formItem,"express_temp_id",t)},expression:"formItem.express_temp_id"}},e._l(e.expressTemp,(function(t,r){return a("Option",{key:r,attrs:{value:t.temp_id}},[e._v(e._s(t.title))])})),1),e.formItem.express_temp_id?a("Button",{attrs:{type:"text"},on:{click:e.preview}},[e._v("预览")]):e._e()],1),a("FormItem",{attrs:{label:"寄件人姓名："}},[a("Input",{staticStyle:{width:"80%"},attrs:{placeholder:"请输入寄件人姓名"},model:{value:e.formItem.to_name,callback:function(t){e.$set(e.formItem,"to_name",t)},expression:"formItem.to_name"}})],1),a("FormItem",{attrs:{label:"寄件人电话："}},[a("Input",{staticStyle:{width:"80%"},attrs:{placeholder:"请输入寄件人电话"},model:{value:e.formItem.to_tel,callback:function(t){e.$set(e.formItem,"to_tel",t)},expression:"formItem.to_tel"}})],1),a("FormItem",{attrs:{label:"寄件人地址："}},[a("Input",{staticStyle:{width:"80%"},attrs:{placeholder:"请输入寄件人地址"},model:{value:e.formItem.to_addr,callback:function(t){e.$set(e.formItem,"to_addr",t)},expression:"formItem.to_addr"}})],1)]:e._e()],2),a("div",{directives:[{name:"show",rawName:"v-show",value:"2"===e.formItem.type,expression:"formItem.type === '2'"}]},[a("FormItem",{attrs:{label:"送货人："}},[a("Select",{staticStyle:{width:"80%"},attrs:{placeholder:"请选择送货人"},on:{"on-change":e.shDeliveryChange},model:{value:e.formItem.sh_delivery,callback:function(t){e.$set(e.formItem,"sh_delivery",t)},expression:"formItem.sh_delivery"}},e._l(e.deliveryList,(function(t,r){return a("Option",{key:r,attrs:{value:t.id}},[e._v(e._s(t.wx_name)+"（"+e._s(t.phone)+"）")])})),1)],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"3"===e.formItem.type,expression:"formItem.type === '3'"}]},[a("FormItem",{attrs:{label:"备注："}},[a("Input",{staticStyle:{width:"80%"},attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"备注"},model:{value:e.formItem.fictitious_content,callback:function(t){e.$set(e.formItem,"fictitious_content",t)},expression:"formItem.fictitious_content"}})],1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{on:{click:e.cancel}},[e._v("取消")]),a("Button",{attrs:{type:"primary"},on:{click:e.putSend}},[e._v("提交")])],1),a("div",{directives:[{name:"viewer",rawName:"v-viewer"},{name:"show",rawName:"v-show",value:e.temp,expression:"temp"}],ref:"viewer"},[a("img",{staticStyle:{display:"none"},attrs:{src:e.temp.pic}})])],1)},p=[];function g(e,t,a,r,s,n,i){try{var o=e[n](i),l=o.value}catch(c){return void a(c)}o.done?t(l):Promise.resolve(l).then(r,s)}function v(e){return function(){var t=this,a=arguments;return new Promise((function(r,s){var n=e.apply(t,a);function i(e){g(n,r,s,i,o,"next",e)}function o(e){g(n,r,s,i,o,"throw",e)}i(void 0)}))}}var b={name:"orderSend",props:{isAll:{type:Number,default:1},ids:{type:Array,default:function(){return[]}},where:{type:Object,default:function(){return{}}}},data:function(){return{formItem:{type:"1",express_record_type:"2",delivery_name:"",delivery_id:"",express_temp_id:"",to_name:"",to_tel:"",to_addr:"",sh_delivery:"",fictitious_content:""},modals:!1,express:[],expressTemp:[],deliveryList:[],temp:{},export_open:!0}},watch:{"formItem.express_temp_id":function(e){}},methods:{changeRadio:function(e){switch(this.$refs.formItem.resetFields(),e){case"1":this.formItem.delivery_name="",this.formItem.delivery_id="",this.formItem.express_temp_id="",this.formItem.express_record_type="2",this.expressTemp=[];break;case"2":this.formItem.sh_delivery="",this.formItem.express_record_type="1";break;case"3":this.formItem.fictitious_content="",this.formItem.express_record_type="1";break}},changeExpress:function(e){switch(e){case"2":this.formItem.delivery_name="",this.formItem.express_temp_id="",this.expressTemp=[];break;case"1":this.formItem.delivery_name="",this.formItem.delivery_id="";break;default:break}},reset:function(){this.formItem={type:"1",express_record_type:"2",delivery_name:"",delivery_id:"",express_temp_id:"",expressTemp:[],to_name:"",to_tel:"",to_addr:"",sh_delivery:"",fictitious_content:""}},getList:function(){var e=this;Object(h["h"])(1).then(function(){var t=v(d.a.mark((function t(a){return d.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.express=a.data,e.getSheetInfo();case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.loading=!1,e.$Message.error(t.msg)}))},putSend:function(e){var t=this,a=Object.assign(this.formItem),r=[];if(this.ids.forEach((function(e){r.push(e.id)})),1==this.isAll?(a.all=1,a.where=this.where):(a.all=0,a.ids=r),"1"===this.formItem.type){if(""===this.formItem.delivery_name)return this.$Message.error("快递公司不能为空");if(""===this.formItem.express_temp_id)return this.$Message.error("电子面单不能为空");if(""===this.formItem.to_name)return this.$Message.error("寄件人姓名不能为空");if(""===this.formItem.to_tel)return this.$Message.error("寄件人电话不能为空");if(!/^1(3|4|5|7|8|9|6)\d{9}$/i.test(this.formItem.to_tel))return this.$Message.error("请输入正确的手机号码");if(""===this.formItem.to_addr)return this.$Message.error("寄件人地址不能为空")}if("2"===this.formItem.type&&(this.formItem.express_temp_id&&(this.formItem.express_temp_id=""),""===this.formItem.sh_delivery))return this.$Message.error("送货人不能为空");Object(h["B"])(a).then(function(){var e=v(d.a.mark((function e(a){return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.modals=!1,t.$Message.success(a.msg),t.reset();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){t.$Message.error(e.msg),t.modals=!1}))},cancel:function(e){this.modals=!1,this.reset()},expressChange:function(e){var t=this,a=this.express.find((function(t){return t.value===e}));a&&(this.formItem.delivery_code=a.code,"1"===this.formItem.type&&(this.expressTemp=[],this.formItem.express_temp_id="",Object(h["s"])({com:this.formItem.delivery_code}).then((function(e){t.expressTemp=e.data,e.data.length||t.$Message.error("请配置你所选快递公司的电子面单")})).catch((function(e){t.$Message.error(e.msg)}))))},getDeliveryList:function(){var e=this;Object(h["q"])().then((function(t){e.deliveryList=t.data.list})).catch((function(t){e.$Message.error(t.msg)}))},getSheetInfo:function(){var e=this;Object(h["A"])().then((function(t){var a=t.data;for(var r in a)a.hasOwnProperty(r)&&"express_temp_id"!==r&&(e.formItem[r]=a[r]);e.export_open=void 0===a.export_open||a.export_open,e.export_open||(e.formItem.express_record_type="1"),e.formItem.to_addr=a.to_add})).catch((function(t){e.$Message.error(t.msg)}))},shDeliveryChange:function(e){var t=this.deliveryList.find((function(t){return t.id===e}));this.formItem.sh_delivery_name=t.wx_name,this.formItem.sh_delivery_id=t.phone,this.formItem.sh_delivery_uid=t.uid},expressTempChange:function(e){this.temp=this.expressTemp.find((function(t){return e===t.temp_id}))},preview:function(){this.$refs.viewer.$viewer.show()}}},_=b,w=(a("207f"),a("2877")),y=Object(w["a"])(_,f,p,!1,null,"198c7f4e",null),x=y.exports,D=a("2c4a"),k=a("d708"),O=a("c276"),I=a("2e83");function $(e,t,a,r,s,n,i){try{var o=e[n](i),l=o.value}catch(c){return void a(c)}o.done?t(l):Promise.resolve(l).then(r,s)}function T(e){return function(){var t=this,a=arguments;return new Promise((function(r,s){var n=e.apply(t,a);function i(e){$(n,r,s,i,o,"next",e)}function o(e){$(n,r,s,i,o,"throw",e)}i(void 0)}))}}function C(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function L(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?C(a,!0).forEach((function(t){S(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):C(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function S(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var M={name:"table_from",components:{autoSend:x,queueList:D["default"]},props:["formSelection","autoDisabled","isAll"],data:function(){var e=function(e,t,a){if(!t)return a(new Error("请填写核销码"));if(Number.isInteger(t)){var r=/\b\d{12}\b/;r.test(t)?a():a(new Error("请填写12位数字"))}else a(new Error("请填写12位数字"))};return{fromList:{title:"选择时间",custom:!0,fromTxt:[{text:"全部",val:""},{text:"今天",val:"today"},{text:"昨天",val:"yesterday"},{text:"最近7天",val:"lately7"},{text:"最近30天",val:"lately30"},{text:"本月",val:"month"},{text:"本年",val:"year"}]},currentTab:"",grid:{xl:8,lg:8,md:8,sm:24,xs:24},orderData:{status:"",data:"",real_name:"",field_key:"all",pay_type:""},modalTitleSs:"",statusType:"",time:"",value2:[],isDelIdList:[],writeOffRules:{code:[{validator:e,trigger:"blur",required:!0}]},writeOffFrom:{code:"",confirm:0},modals2:!1,timeVal:[],options:{shortcuts:[{text:"今天",value:function(){var e=new Date,t=new Date;return t.setTime(new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate())),[t,e]}},{text:"昨天",value:function(){var e=new Date,t=new Date;return t.setTime(t.setTime(new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()-1))),e.setTime(e.setTime(new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()-1))),[t,e]}},{text:"最近7天",value:function(){var e=new Date,t=new Date;return t.setTime(t.setTime(new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()-6))),[t,e]}},{text:"最近30天",value:function(){var e=new Date,t=new Date;return t.setTime(t.setTime(new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()-29))),[t,e]}},{text:"本月",value:function(){var e=new Date,t=new Date;return t.setTime(t.setTime(new Date((new Date).getFullYear(),(new Date).getMonth(),1))),[t,e]}},{text:"本年",value:function(){var e=new Date,t=new Date;return t.setTime(t.setTime(new Date((new Date).getFullYear(),0,1))),[t,e]}}]},payList:[{label:"全部",val:""},{label:"微信支付",val:"1"},{label:"支付宝支付",val:"4"},{label:"余额支付",val:"2"},{label:"线下支付",val:"3"}],manualModal:!1,uploadAction:"".concat(k["a"].apiBaseURL,"/file/upload/1"),uploadHeaders:{},file:"",autoModal:!1,isShow:!1,recordModal:!1,sendOutValue:"",exportList:[{name:"1",label:"导出发货单"},{name:"0",label:"导出订单"}],exportListOn:0,fileList:[]}},computed:L({},Object(m["e"])("admin/layout",["isMobile"]),{},Object(m["e"])("admin/order",["orderChartType","isDels","delIdList"]),{labelWidth:function(){return this.isMobile?void 0:80},labelPosition:function(){return this.isMobile?"top":"right"},today:function(){var e=new Date,t=new Date,a=t.getFullYear()+"/"+(t.getMonth()+1)+"/"+t.getDate(),r=e.getFullYear()+"/"+(e.getMonth()+1)+"/"+e.getDate();return[a,r]}}),watch:{$route:function(){"/admin/order/list?status=1"===this.$route.fullPath&&this.getPath()}},created:function(){"/admin/order/list?status=1"===this.$route.fullPath&&this.getPath(),this.getToken(),this.$parent.$emit("add")},methods:L({},Object(m["d"])("admin/order",["getOrderStatus","getOrderType","getOrderTime","getOrderNum","getfieldKey"]),{getPath:function(){this.orderData.status=this.$route.query.status.toString(),this.getOrderStatus(this.orderData.status),this.$emit("getList",1),this.$emit("order-data",this.orderData)},exports:function(){var e=T(d.a.mark((function e(t){var a,r,s,n,i,o,l,c;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.exportListOn=this.exportList.findIndex((function(e){return e.name===t})),a=[],r=[],s=[],n="",i=JSON.parse(JSON.stringify(this.orderData)),i.page=1,i.type=t,o=[],this.delIdList.filter((function(e){o.push(e.id)})),i.ids=o.join(","),l=0;case 9:if(!(l<i.page+1)){e.next=26;break}return e.next=12,this.getOrderData(i);case 12:if(c=e.sent,n||(n=c.filename),r.length||(r=c.filekey),a.length||(a=c.header),!c.export.length){e.next=21;break}s=s.concat(c.export),i.page++,e.next=23;break;case 21:return Object(I["a"])(a,r,n,s),e.abrupt("return");case 23:l++,e.next=9;break;case 26:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),getOrderData:function(e){return new Promise((function(t,a){Object(h["O"])(e).then((function(e){return t(e.data)}))}))},onchangeTime:function(e){this.timeVal=e,this.orderData.data=this.timeVal[0]?this.timeVal.join("-"):"",this.$store.dispatch("admin/order/getOrderTabs",{data:this.orderData.data}),this.getOrderTime(this.orderData.data),this.$emit("getList",1),this.$emit("order-data",this.orderData)},selectChange:function(e){this.$store.dispatch("admin/order/getOrderTabs",{data:e}),this.orderData.data=e,this.getOrderTime(this.orderData.data),this.timeVal=[],this.$emit("getList"),this.$emit("order-data",this.orderData)},selectChange2:function(e){this.getOrderStatus(e),this.$emit("getList",1)},userSearchs:function(e){this.getOrderType(e),this.$emit("getList",1)},timeChange:function(e){this.getOrderTime(e),this.$emit("getList")},orderSearch:function(e){this.getOrderNum(e),this.getfieldKey(this.orderData.field_key),this.$emit("getList",1)},onClickTab:function(){this.$emit("onChangeType",this.currentTab)},delAll:function(){var e=this;if(0===this.delIdList.length)this.$Message.error("请先选择删除的订单！");else if(this.isDels){this.delIdList.filter((function(t){e.isDelIdList.push(t.id)}));var t={ids:this.isDelIdList,all:this.isAll,where:this.orderData},a={title:"删除订单",url:"/order/dels",method:"post",ids:t};this.$modalSure(a).then((function(t){e.$Message.success(t.msg),e.tabList()})).catch((function(t){e.$Message.error(t.msg)}))}else{var r="错误！",s="<p>您选择的的订单存在用户未删除的订单，无法删除用户未删除的订单！</p>";this.$Modal.error({title:r,content:s})}},writeOff:function(){this.modals2=!0},search:function(e){var t=this;this.$refs[e].validate((function(e){e?(t.writeOffFrom.confirm=0,Object(h["E"])(t.writeOffFrom).then(function(){var e=T(d.a.mark((function e(a){return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:200===a.status?t.$Message.success(a.msg):t.$Message.error(a.msg);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){t.$Message.error(e.msg)}))):t.$Message.error("请填写正确的核销码")}))},ok:function(){var e=this;this.writeOffFrom.code?(this.writeOffFrom.confirm=1,Object(h["E"])(this.writeOffFrom).then(function(){var t=T(d.a.mark((function t(a){return d.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:200===a.status?(e.$Message.success(a.msg),e.modals2=!1,e.$refs[name].resetFields(),e.$emit("getList")):e.$Message.error(a.msg);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.$Message.error(t.msg)}))):this.$Message.warning("请先验证订单！")},del:function(e){this.modals2=!1,this.writeOffFrom.confirm=0,this.$refs[e].resetFields()},handleSubmit:function(){this.$emit("on-submit",this.data)},Refresh:function(){this.$emit("getList")},handleReset:function(){this.$refs.form.resetFields(),this.$emit("on-reset")},getToken:function(){this.uploadHeaders["Authori-zation"]="Bearer "+O["a"].cookies.get("token")},uploadSuccess:function(e,t,a){200===e.status?(this.$Message.success(e.msg),this.file=e.data.src,this.fileList=a):this.$Message.error(e.msg)},removeFile:function(e,t){this.file="",this.fileList=t},manualModalOk:function(){var e=this;this.$refs.upload.clearFiles(),Object(h["n"])({file:this.file}).then((function(t){e.$Message.success(t.msg),e.fileList=[]})).catch((function(t){e.$Message.error(t.msg),e.fileList=[]}))},manualModalCancel:function(){this.fileList=[],this.$refs.upload.clearFiles()},autoModalOk:function(){"全部"==this.isAll||this.formSelection.length?(this.$refs.send.modals=!0,this.$refs.send.getList(),this.$refs.send.getDeliveryList()):this.$Message.error("请选择本页订单")},autolModalCancel:function(){},submitFail:function(){Object(h["B"])()},queuemModal:function(){this.$refs.queue.modal=!0},onAuto:function(){this.$refs.sends.modals=!0,this.$refs.sends.getList(),this.$refs.sends.getDeliveryList()},getExpressList:function(){var e=T(d.a.mark((function e(){var t,a,r,s,n;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=[],a=[],r=[],s="",e.next=3,this.getExcelData();case 3:n=e.sent,s||(s=n.filename),a.length||(a=n.filekey),t.length||(t=n.header),r=n.export,Object(I["a"])(t,a,s,r);case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getExcelData:function(){return new Promise((function(e,t){Object(h["d"])().then((function(t){return e(t.data)}))}))}})},j=M,F=(a("7b46"),Object(w["a"])(j,l,c,!1,null,"fcaf58ca",null)),P=F.exports,N=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Table",{ref:"table",staticClass:"orderData mt25",attrs:{columns:e.columns,data:e.orderList,loading:e.loading,"highlight-row":"","no-data-text":"暂无数据","no-filtered-data-text":"暂无筛选结果"},on:{"on-selection-change":e.onSelectTab,"on-select-all":e.selectAll,"on-select-all-cancel":e.selectAll,"on-select-cancel":e.onSelectCancel},scopedSlots:e._u([{key:"order_id",fn:function(t){var r=t.row;t.index;return[a("span",{staticStyle:{display:"block"},domProps:{textContent:e._s(r.order_id)}}),a("span",{directives:[{name:"show",rawName:"v-show",value:1===r.is_del,expression:"row.is_del === 1"}],staticStyle:{color:"#ed4014",display:"block"}},[e._v("用户已删除")])]}},{key:"nickname",fn:function(t){var r=t.row;t.index;return[a("a",{on:{click:function(t){return e.showUserInfo(r)}}},[e._v(e._s(r.nickname))])]}},{key:"info",fn:function(t){var r=t.row;t.index;return e._l(r._info,(function(t,r){return a("div",{key:r,staticClass:"tabBox"},[a("div",{directives:[{name:"viewer",rawName:"v-viewer"}],staticClass:"tabBox_img"},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.cart_info.productInfo.attrInfo?t.cart_info.productInfo.attrInfo.image:t.cart_info.productInfo.image,expression:"\n              val.cart_info.productInfo.attrInfo\n                ? val.cart_info.productInfo.attrInfo.image\n                : val.cart_info.productInfo.image\n            "}]})]),a("span",{staticClass:"tabBox_tit"},[e._v("\n          "+e._s(t.cart_info.productInfo.store_name+" | ")+e._s(t.cart_info.productInfo.attrInfo?t.cart_info.productInfo.attrInfo.suk:"")+"\n        ")]),a("span",{staticClass:"tabBox_pice"},[e._v(e._s("￥"+t.cart_info.truePrice+" x "+t.cart_info.cart_num))])])}))}},{key:"statusName",fn:function(t){var r=t.row;t.index;return[a("div",{staticClass:"pt5",domProps:{innerHTML:e._s(r.status_name.status_name)}}),e._l(r.status_name.pics||[],(function(t,s){return r.status_name.pics?a("div",{directives:[{name:"viewer",rawName:"v-viewer"}],key:s,staticClass:"pictrue mr10"},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t,expression:"item"}],attrs:{src:t}})]):e._e()}))]}},{key:"action",fn:function(t){var r=t.row;t.index;return[1===r._status?a("a",{on:{click:function(t){return e.edit(r)}}},[e._v("编辑")]):e._e(),2!==r._status&&8!==r._status&&4!==r.status||1!==r.shipping_type||null!==r.pinkStatus&&2!==r.pinkStatus?e._e():a("a",{on:{click:function(t){return e.sendOrder(r)}}},[e._v("发送货")]),4!==r._status||r.split.length?e._e():a("a",{on:{click:function(t){return e.delivery(r)}}},[e._v("配送信息")]),2==r.shipping_type&&0==r.status&&1==r.paid&&0===r.refund_status?a("a",{on:{click:function(t){return e.bindWrite(r)}}},[e._v("立即核销")]):e._e(),8!==r._status&&4!==r.status||!r.split.length?e._e():a("Divider",{attrs:{type:"vertical"}}),r.split.length?a("a",{on:{click:function(t){return e.splitOrderDetail(r)}}},[e._v("查看子订单")]):e._e(),1===r._status||(2===r._status||r.split.length)&&(null===r.pinkStatus||2===r.pinkStatus)||4===r._status||2==r.shipping_type&&0==r.status&&1==r.paid&&0===r.refund_status?a("Divider",{attrs:{type:"vertical"}}):e._e(),[a("Dropdown",{on:{"on-click":function(t){return e.changeMenu(r,t)}}},[a("a",{attrs:{href:"javascript:void(0)"}},[e._v("\n            更多\n            "),a("Icon",{attrs:{type:"ios-arrow-down"}})],1),a("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[a("DropdownItem",{directives:[{name:"show",rawName:"v-show",value:1===r._status&&0===r.paid&&"offline"===r.pay_type,expression:"\n                row._status === 1 &&\n                row.paid === 0 &&\n                row.pay_type === 'offline'\n              "}],ref:"ones",attrs:{name:"1"}},[e._v("立即支付")]),a("DropdownItem",{attrs:{name:"2"}},[e._v("订单详情")]),a("DropdownItem",{attrs:{name:"3"}},[e._v("订单记录")]),a("DropdownItem",{directives:[{name:"show",rawName:"v-show",value:r._status>=3&&r.express_dump,expression:"row._status >= 3 && row.express_dump"}],attrs:{name:"11"}},[e._v("电子面单打印")]),a("DropdownItem",{directives:[{name:"show",rawName:"v-show",value:r._status>=2,expression:"row._status >= 2"}],attrs:{name:"10"}},[e._v("小票打印")]),a("DropdownItem",{directives:[{name:"show",rawName:"v-show",value:1!==r._status||3===r._status&&r.use_integral>0&&r.use_integral>=r.back_integral,expression:"\n                row._status !== 1 ||\n                (row._status === 3 &&\n                  row.use_integral > 0 &&\n                  row.use_integral >= row.back_integral)\n              "}],attrs:{name:"4"}},[e._v("订单备注")]),a("DropdownItem",{directives:[{name:"show",rawName:"v-show",value:3===r._status&&(parseFloat(r.pay_price)>parseFloat(r.refund_price)||0==r.pay_price&&-1!==[0,1].indexOf(r.refund_status)),expression:"\n                row._status === 3 &&\n                (parseFloat(row.pay_price) > parseFloat(row.refund_price) ||\n                  (row.pay_price == 0 &&\n                    [0, 1].indexOf(row.refund_status) !== -1))\n              "}],attrs:{name:"5"}},[e._v("立即退款")]),a("DropdownItem",{directives:[{name:"show",rawName:"v-show",value:1!==r._status&&r.use_integral>0&&r.use_integral>=r.back_integral&&!r.split.length,expression:"\n                row._status !== 1 &&\n                row.use_integral > 0 &&\n                row.use_integral >= row.back_integral &&\n                !row.split.length\n              "}],attrs:{name:"6"}},[e._v("退积分")]),a("DropdownItem",{directives:[{name:"show",rawName:"v-show",value:3===r._status&&!r.split.length,expression:"row._status === 3 && !row.split.length"}],attrs:{name:"7"}},[e._v("不退款")]),a("DropdownItem",{directives:[{name:"show",rawName:"v-show",value:4===r._status&&!r.split.length,expression:"row._status === 4 && !row.split.length"}],attrs:{name:"8"}},[e._v("已收货")]),r.split.length?e._e():a("DropdownItem",{attrs:{name:"9"}},[e._v("删除订单")])],1)],1)]]}}])}),a("div",{staticClass:"acea-row row-right page"},[a("Page",{attrs:{total:e.page.total,current:e.page.pageNum,"show-elevator":"","show-total":"","page-size":e.page.pageSize,"show-sizer":""},on:{"on-change":e.pageChange,"on-page-size-change":e.limitChange}})],1),a("edit-from",{ref:"edits",attrs:{FromData:e.FromData},on:{submitFail:e.submitFail}}),a("user-details",{ref:"userDetails"}),a("details-from",{ref:"detailss",attrs:{orderDatalist:e.orderDatalist,orderId:e.orderId}}),a("order-remark",{ref:"remarks",attrs:{orderId:e.orderId},on:{submitFail:e.submitFail}}),a("order-record",{ref:"record"}),a("order-send",{ref:"send",attrs:{orderId:e.orderId,status:e.status,pay_type:e.pay_type},on:{submitFail:e.submitFail}})],1)},B=[],A=a("a464"),R=a("31b4"),E=a("fc48"),z=a("61f8"),V=a("417c"),q=a("d616"),Y=a("a716");function W(e,t,a,r,s,n,i){try{var o=e[n](i),l=o.value}catch(c){return void a(c)}o.done?t(l):Promise.resolve(l).then(r,s)}function Q(e){return function(){var t=this,a=arguments;return new Promise((function(r,s){var n=e.apply(t,a);function i(e){W(n,r,s,i,o,"next",e)}function o(e){W(n,r,s,i,o,"throw",e)}i(void 0)}))}}function G(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function H(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?G(a,!0).forEach((function(t){K(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):G(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function K(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var J={name:"table_list",components:{expandRow:A["a"],editFrom:R["a"],detailsFrom:E["a"],orderRemark:z["a"],orderRecord:V["a"],orderSend:q["a"],userDetails:Y["a"]},props:["where","isAll"],data:function(){var e=this;return{delfromData:{},modal:!1,orderList:[],pay_type:"",orderCards:[],loading:!1,orderId:0,columns:[{type:"expand",width:30,render:function(e,t){return e(A["a"],{props:{row:t.row}})}},{width:50,align:"center",renderHeader:function(t,a){return t("div",{class:{"select-panel":!0},on:{mouseenter:function(t){e.display="block"},mouseleave:function(t){e.display="none"}}},[t("Checkbox",{props:{value:e.checkBox},on:{"on-change":function(t){e.checkBox=t,e.$refs.table.selectAll(e.checkBox),e.$emit("on-all",t?0:-1)}}}),t("div",{style:{position:"absolute",top:0,zIndex:2,display:e.display,width:"80px",height:"100%",padding:"0px 0",borderRadius:"4px",backgroundColor:"#fff",boxShadow:"0 0px 5px rgba(0, 0, 0, 0.2)",transform:"translateX(25%)"}},[t("div",{class:{"select-item":!0,on:0==e.isAll},style:{padding:"1px 6px",cursor:"pointer",height:"50%"},on:{click:function(t){0===e.isAll?(e.$emit("on-all",-1),e.checkBox=!1,e.$refs.table.selectAll(e.checkBox)):(e.$emit("on-all",0),e.formSelection.length||(e.checkBox=!0,e.$refs.table.selectAll(e.checkBox))),e.display="none"}}},"选择当页"),t("div",{class:{"select-item":!0,on:1==e.isAll},style:{padding:"1px 6px",cursor:"pointer",height:"50%"},on:{click:function(t){1===e.isAll?(e.isAll=-1,e.$emit("on-all",-1),e.checkBox=!1):(e.isAll=1,e.$emit("on-all",1),e.checkBox=!0),e.$refs.table.selectAll(e.checkBox),e.display="none"}}},"选择全部")])])},render:function(t,a){return t("Checkbox",{props:{value:a.row.checkBox},on:{"on-change":function(t){t?e.formSelection.push(a.row):(e.checkBox=!1,e.formSelection.forEach((function(t,r){t.id===a.row.id&&e.formSelection.splice(r,1)}))),e.$emit("on-all",e.formSelection.length?0:-1),a.row.checkBox=t,e.orderList[a.index].checkBox=t}},ref:"checkbox",refInFor:!0})}},{title:"订单号",align:"center",slot:"order_id",minWidth:150},{title:"订单类型",key:"pink_name",minWidth:120},{title:"用户信息",slot:"nickname",minWidth:100},{title:"商品信息",slot:"info",minWidth:330},{title:"实际支付",key:"pay_price",minWidth:70},{title:"支付时间",key:"_pay_time",minWidth:100},{title:"支付状态",key:"pay_type_name",minWidth:80},{title:"订单状态",key:"statusName",slot:"statusName",minWidth:100},{title:"操作",slot:"action",fixed:"right",minWidth:150,align:"center"}],page:{total:0,pageNum:1,pageSize:10},data:[],FromData:null,orderDatalist:null,modalTitleSs:"",isDelIdList:[],checkBox:!1,formSelection:[],selectionCopy:[],display:"none",autoDisabled:!1,status:0}},computed:H({},Object(m["e"])("admin/order",["orderPayType","orderStatus","orderTime","orderNum","fieldKey","orderType"])),mounted:function(){},created:function(){this.getList()},watch:{orderType:function(){this.page.pageNum=1,this.getList()},formSelection:function(e){this.$emit("order-select",e),e.length?this.$emit("auto-disabled",0):this.$emit("auto-disabled",1);var t=e.some((function(e){return 1===e.is_del}));this.getIsDel(t),this.getisDelIdListl(e)},orderList:{deep:!0,handler:function(e){var t=this;e.forEach((function(e){t.formSelection.forEach((function(t){t.id===e.id&&(e.checkBox=!0)}))}));var a=this.orderList.filter((function(e){return e.checkBox}));this.orderList.length?this.checkBox=this.orderList.length===a.length:this.checkBox=!1}}},methods:H({},Object(m["d"])("admin/order",["getIsDel","getisDelIdListl"]),{selectAll:function(e){var t=this;e.length&&(this.formSelection=e,this.selectionCopy=e),this.selectionCopy.forEach((function(e,a){e.checkBox=t.checkBox,t.$set(t.orderList,a,e)}))},showUserInfo:function(e){this.$refs.userDetails.modals=!0,this.$refs.userDetails.getDetails(e.uid)},changeMenu:function(e,t){var a=this;switch(this.orderId=e.id,t){case"1":this.delfromData={title:"修改立即支付",url:"/order/pay_offline/".concat(e.id),method:"post",ids:""},this.$modalSure(this.delfromData).then((function(e){a.$Message.success(e.msg),a.$emit("changeGetTabs"),a.getList()})).catch((function(e){a.$Message.error(e.msg)}));break;case"2":this.getData(e.id);break;case"3":this.$refs.record.modals=!0,this.$refs.record.getList(e.id);break;case"4":this.$refs.remarks.modals=!0;break;case"5":this.getRefundData(e.id);break;case"6":this.getRefundIntegral(e.id);break;case"7":this.getNoRefundData(e.id);break;case"8":this.delfromData={title:"修改确认收货",url:"/order/take/".concat(e.id),method:"put",ids:""},this.$modalSure(this.delfromData).then((function(e){a.$Message.success(e.msg),a.getList()})).catch((function(e){a.$Message.error(e.msg)}));break;case"10":this.delfromData={title:"立即打印订单",info:"您确认打印此订单吗?",url:"/order/print/".concat(e.id),method:"get",ids:""},this.$modalSure(this.delfromData).then((function(e){a.$Message.success(e.msg),a.$emit("changeGetTabs"),a.getList()})).catch((function(e){a.$Message.error(e.msg)}));break;case"11":this.delfromData={title:"立即打印电子面单",info:"您确认打印此电子面单吗?",url:"/order/order_dump/".concat(e.id),method:"get",ids:""},this.$modalSure(this.delfromData).then((function(e){a.$Message.success(e.msg),a.getList()})).catch((function(e){a.$Message.error(e.msg)}));break;default:this.delfromData={title:"删除订单",url:"/order/del/".concat(e.id),method:"DELETE",ids:""},this.delOrder(e,this.delfromData)}},submitModel:function(){this.getList()},pageChange:function(e){this.page.pageNum=e,this.getList()},limitChange:function(e){this.page.pageSize=e,this.getList()},getList:function(e){var t=this;this.page.pageNum=1===e?1:this.page.pageNum,this.loading=!0,Object(h["x"])({page:this.page.pageNum,limit:this.page.pageSize,status:this.orderStatus,pay_type:this.orderPayType,data:this.orderTime,real_name:this.orderNum,field_key:this.fieldKey,type:0===this.orderType?"":this.orderType}).then(function(){var e=Q(d.a.mark((function e(a){var r;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=a.data,t.orderList=r.data.map((function(e){return 1===t.isAll?e.checkBox=!0:e.checkBox=!1,e})),t.orderCards=r.stat,t.page.total=r.count,t.$emit("on-changeCards",r.stat),t.loading=!1;case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){t.loading=!1,t.$Message.error(e.msg)}))},onSelectTab:function(e){this.formSelection=e;var t=e.some((function(e){return 1===e.is_del}));this.getIsDel(t),this.getisDelIdListl(e)},edit:function(e){this.getOrderData(e.id)},splitOrderDetail:function(e){this.$router.push({path:"split_list",query:{id:e.id}})},delOrder:function(e,t){var a=this;if(1===e.is_del)this.$modalSure(t).then((function(e){a.$Message.success(e.msg),a.getList()})).catch((function(e){a.$Message.error(e.msg)}));else{var r="错误！",s="<p>您选择的的订单存在用户未删除的订单，无法删除用户未删除的订单！</p>";this.$Modal.error({title:r,content:s})}},getOrderData:function(e){var t=this;Object(h["i"])(e).then(function(){var e=Q(d.a.mark((function e(a){return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!1!==a.data.status){e.next=2;break}return e.abrupt("return",t.$authLapse(a.data));case 2:t.$authLapse(a.data),t.FromData=a.data,t.$refs.edits.modals=!0;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){t.$Message.error(e.msg)}))},getData:function(e){var t=this;Object(h["e"])(e).then(function(){var e=Q(d.a.mark((function e(a){return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.$refs.detailss.modals=!0,t.orderDatalist=a.data,t.orderDatalist.orderInfo.refund_reason_wap_img)try{t.orderDatalist.orderInfo.refund_reason_wap_img=JSON.parse(t.orderDatalist.orderInfo.refund_reason_wap_img)}catch(r){t.orderDatalist.orderInfo.refund_reason_wap_img=[]}case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){t.$Message.error(e.msg)}))},submitFail:function(){this.status=0,this.getList()},getRefundData:function(e){var t=this;this.$modalForm(Object(h["l"])(e)).then((function(){t.getList(),t.$emit("changeGetTabs")}))},getRefundIntegral:function(e){var t=this;Object(h["I"])(e).then(function(){var e=Q(d.a.mark((function e(a){return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.FromData=a.data,t.$refs.edits.modals=!0;case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){t.$Message.error(e.msg)}))},getNoRefundData:function(e){var t=this;this.$modalForm(Object(h["m"])(e)).then((function(){t.getList(),t.$emit("changeGetTabs")}))},sendOrder:function(e){var t=this;this.$refs.send.modals=!0,this.orderId=e.id,this.status=e._status,this.pay_type=e.pay_type,this.$refs.send.getList(),this.$refs.send.getDeliveryList(),this.$nextTick((function(a){t.$refs.send.getCartInfo(e._status,e.id)}))},delivery:function(e){var t=this;Object(h["f"])(e.id).then(function(){var e=Q(d.a.mark((function e(a){return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.FromData=a.data,t.$refs.edits.modals=!0;case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){t.$Message.error(e.msg)}))},change:function(e){},exportData:function(){this.$refs.table.exportCsv({filename:"商品列表"})},bindWrite:function(e){var t=this;this.$Modal.confirm({title:"提示",content:"确定要核销该订单吗？",cancelText:"取消",closable:!0,maskClosable:!0,onOk:function(){Object(h["P"])(e.order_id).then((function(e){t.$Message.success(e.msg),t.getList()}))},onCancel:function(){}})},onSelectCancel:function(e,t){}})},U=J,X=(a("5db6"),Object(w["a"])(U,N,B,!1,null,"83bd10e8",null)),Z=X.exports,ee={name:"orderlistDetails",components:{tableForm:P,tableList:Z,cardsData:o["a"]},data:function(){return{currentTab:"",cardLists:[],selection:[],orderData:{status:"",data:"",real_name:"",field_key:"all",pay_type:""},autoDisabled:!0,isAll:-1}},methods:{changeGetTabs:function(){this.$parent.getTabs()},getChangeTabs:function(e){this.$refs.table.getList()},getData:function(e){this.$refs.table&&(this.$refs.table.checkBox=!1,this.$refs.table.getList(e))},getCards:function(e){this.cardLists=e},handleResize:function(){this.$refs.ellipsis.forEach((function(e){return e.init()}))},orderSelect:function(e){this.selection=e},onOrderData:function(e){this.orderData=e},orderDatas:function(e){this.orderData=e},onAutoDisabled:function(e){this.autoDisabled=!!e},onAll:function(e){this.isAll=e}},mounted:function(){}},te=ee,ae=(a("6ecf"),Object(w["a"])(te,n,i,!1,null,"24ab922b",null)),re=ae.exports;function se(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function ne(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?se(a,!0).forEach((function(t){ie(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):se(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function ie(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var oe={name:"list",components:{productlistDetails:re},data:function(){return{spinShow:!1,currentTab:"",data:[],tablists:null}},created:function(){this.getOrderType(""),this.getOrderStatus(""),this.getOrderTime(""),this.getOrderNum(""),this.getfieldKey(""),this.onChangeTabs("")},beforeDestroy:function(){this.getOrderType(""),this.getOrderStatus(""),this.getOrderTime(""),this.getOrderNum(""),this.getfieldKey(""),this.onChangeTabs("")},mounted:function(){this.getTabs()},methods:ne({},Object(m["d"])("admin/order",["onChangeTabs","getOrderStatus","getOrderTime","getOrderNum","getfieldKey","onChangeTabs","getOrderType"]),{getTabs:function(){var e=this;this.spinShow=!0,this.$store.dispatch("admin/order/getOrderTabs",{data:""}).then((function(t){e.tablists=t.data,e.spinShow=!1})).catch((function(t){e.spinShow=!1,e.$Message.error(t.msg)}))},onClickTab:function(){this.onChangeTabs(Number(this.currentTab)),this.$store.dispatch("admin/order/getOrderTabs",{data:"",type:Number(this.currentTab)}),this.$refs.productlist.getChangeTabs(),this.$store.dispatch("admin/order/getOrderTabs",{type:this.currentTab})}})},le=oe,ce=(a("b526"),Object(w["a"])(le,r,s,!1,null,"4ce3f466",null));t["default"]=ce.exports},"5db6":function(e,t,a){"use strict";var r=a("6eb4"),s=a.n(r);s.a},"644f":function(e,t,a){},"6eb4":function(e,t,a){},"6ecf":function(e,t,a){"use strict";var r=a("06ac"),s=a.n(r);s.a},"7b46":function(e,t,a){"use strict";var r=a("644f"),s=a.n(r);s.a},a584:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Row",{staticClass:"ivu-mt",attrs:{type:"flex",align:"middle",gutter:10}},e._l(e.cardLists,(function(t,r){return a("Col",{key:r,staticClass:"ivu-mb",attrs:{xl:t.col,lg:6,md:12,sm:24,xs:24}},[a("Card",{staticClass:"card_cent",attrs:{shadow:"",padding:0}},[a("div",{staticClass:"card_box"},[a("div",{staticClass:"card_box_cir",class:{one:r%5==0,two:r%5==1,three:r%5==2,four:r%5==3,five:r%5==4}},[a("div",{staticClass:"card_box_cir1",class:{one1:r%5==0,two1:r%5==1,three1:r%5==2,four1:r%5==3,five1:r%5==4}},[a("Icon",{attrs:{type:t.className}})],1)]),a("div",{staticClass:"card_box_txt"},[a("span",{staticClass:"sp1",domProps:{textContent:e._s(t.count||0)}}),a("span",{staticClass:"sp2",domProps:{textContent:e._s(t.name)}})])])])],1)})),1)],1)},s=[],n={name:"cards",data:function(){return{}},props:{cardLists:Array},methods:{},created:function(){}},i=n,o=(a("fda6"),a("2877")),l=Object(o["a"])(i,r,s,!1,null,"55fe0a19",null);t["a"]=l.exports},b526:function(e,t,a){"use strict";var r=a("1448e"),s=a.n(r);s.a},d8a6:function(e,t,a){},fda6:function(e,t,a){"use strict";var r=a("d8a6"),s=a.n(r);s.a}}]);