(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2294ca8f","chunk-295c196b"],{"08ea":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"i-layout-page-header"},[s("PageHeader",{staticClass:"product_tabs",attrs:{title:"用户管理","hidden-breadcrumb":""}},[s("div",{attrs:{slot:"content"},slot:"content"},[s("Tabs",{on:{"on-click":e.onClickTab}},e._l(e.headeNum,(function(e,t){return s("TabPane",{key:t,attrs:{label:e.name,name:e.type}})})),1)],1)])],1),s("Card",{staticClass:"ivu-mt listbox",attrs:{bordered:!1,"dis-hover":""}},[s("Form",{ref:"userFrom",attrs:{model:e.userFrom,"label-width":e.labelWidth,"label-position":e.labelPosition},nativeOn:{submit:function(e){e.preventDefault()}}},[s("Row",{attrs:{gutter:16}},[s("Col",{attrs:{span:"18"}},[s("Col",{attrs:{span:"24"}},[s("Col",e._b({},"Col",e.grid,!1),[s("FormItem",{attrs:{label:"用户搜索：","label-for":"nickname"}},[s("Input",{attrs:{placeholder:"请输入","element-id":"nickname",clearable:""},model:{value:e.userFrom.nickname,callback:function(t){e.$set(e.userFrom,"nickname",t)},expression:"userFrom.nickname"}},[s("Select",{staticStyle:{width:"80px"},attrs:{slot:"prepend"},slot:"prepend",model:{value:e.field_key,callback:function(t){e.field_key=t},expression:"field_key"}},[s("Option",{attrs:{value:"all"}},[e._v("全部")]),s("Option",{attrs:{value:"uid"}},[e._v("UID")]),s("Option",{attrs:{value:"phone"}},[e._v("手机号")]),s("Option",{attrs:{value:"nickname"}},[e._v("用户昵称")])],1)],1)],1)],1)],1)],1),e.collapse?[s("Col",{attrs:{span:"18"}},[s("Col",e._b({},"Col",e.grid,!1),[s("FormItem",{attrs:{label:"会员等级：","label-for":"level"}},[s("Select",{attrs:{placeholder:"请选择","element-id":"level",clearable:""},model:{value:e.userFrom.level,callback:function(t){e.$set(e.userFrom,"level",t)},expression:"userFrom.level"}},[s("Option",{attrs:{value:""}},[e._v("全部")]),e._l(e.levelList,(function(t,a){return s("Option",{key:a,attrs:{value:t.id}},[e._v(e._s(t.name))])}))],2)],1)],1),s("Col",e._b({},"Col",e.grid,!1),[s("FormItem",{attrs:{label:"用户分组：","label-for":"group_id"}},[s("Select",{attrs:{placeholder:"请选择","element-id":"group_id",clearable:""},model:{value:e.userFrom.group_id,callback:function(t){e.$set(e.userFrom,"group_id",t)},expression:"userFrom.group_id"}},[s("Option",{attrs:{value:""}},[e._v("全部")]),e._l(e.groupList,(function(t,a){return s("Option",{key:a,attrs:{value:t.id}},[e._v(e._s(t.group_name))])}))],2)],1)],1),s("Col",e._b({},"Col",e.grid,!1),[s("FormItem",{attrs:{label:"用户标签：","label-for":"label_id"}},[s("Select",{attrs:{placeholder:"请选择","element-id":"label_id",clearable:""},model:{value:e.userFrom.label_id,callback:function(t){e.$set(e.userFrom,"label_id",t)},expression:"userFrom.label_id"}},[s("Option",{attrs:{value:""}},[e._v("全部")]),e._l(e.labelLists,(function(t,a){return s("Option",{key:a,attrs:{value:t.id}},[e._v(e._s(t.label_name))])}))],2)],1)],1)],1),s("Col",{attrs:{span:"18"}},[s("Col",e._b({},"Col",e.grid,!1),[s("FormItem",{attrs:{label:"付费会员：","label-for":"isMember"}},[s("Select",{attrs:{placeholder:"请选择","element-id":"isMember",clearable:""},on:{"on-change":e.changeMember},model:{value:e.userFrom.isMember,callback:function(t){e.$set(e.userFrom,"isMember",t)},expression:"userFrom.isMember"}},[s("Option",{attrs:{value:1}},[e._v("是")]),s("Option",{attrs:{value:0}},[e._v("否")])],1)],1)],1),s("Col",e._b({},"Col",e.grid,!1),[s("FormItem",{attrs:{label:"国家：","label-for":"country"}},[s("Select",{attrs:{placeholder:"请选择","element-id":"country",clearable:""},on:{"on-change":e.changeCountry},model:{value:e.userFrom.country,callback:function(t){e.$set(e.userFrom,"country",t)},expression:"userFrom.country"}},[s("Option",{attrs:{value:""}},[e._v("全部")]),s("Option",{attrs:{value:"domestic"}},[e._v("中国")]),s("Option",{attrs:{value:"abroad"}},[e._v("外国")])],1)],1)],1),"domestic"===e.userFrom.country?s("Col",e._b({},"Col",e.grid,!1),[s("FormItem",{attrs:{label:"省份："}},[s("Cascader",{attrs:{data:e.addresData,value:e.address},on:{"on-change":e.handleChange},model:{value:e.address,callback:function(t){e.address=t},expression:"address"}})],1)],1):e._e()],1),s("Col",{attrs:{span:"18"}},[s("Col",e._b({},"Col",e.grid,!1),[s("FormItem",{attrs:{label:"性别：","label-for":"sex"}},[s("RadioGroup",{attrs:{type:"button"},model:{value:e.userFrom.sex,callback:function(t){e.$set(e.userFrom,"sex",t)},expression:"userFrom.sex"}},[s("Radio",{attrs:{label:""}},[s("span",[e._v("全部")])]),s("Radio",{attrs:{label:"1"}},[s("span",[e._v("男")])]),s("Radio",{attrs:{label:"2"}},[s("span",[e._v("女")])]),s("Radio",{attrs:{label:"0"}},[s("span",[e._v("保密")])])],1)],1)],1),s("Col",e._b({},"Col",e.grid,!1),[s("FormItem",{attrs:{label:"身份：","label-for":"is_promoter"}},[s("RadioGroup",{attrs:{type:"button"},model:{value:e.userFrom.is_promoter,callback:function(t){e.$set(e.userFrom,"is_promoter",t)},expression:"userFrom.is_promoter"}},[s("Radio",{attrs:{label:""}},[s("span",[e._v("全部")])]),s("Radio",{attrs:{label:"1"}},[s("span",[e._v("推广员")])]),s("Radio",{attrs:{label:"0"}},[s("span",[e._v("普通用户")])])],1)],1)],1)],1),s("Col",{attrs:{span:"18"}},[s("Col",e._b({},"Col",e.grid,!1),[s("FormItem",{attrs:{label:"访问情况：","label-for":"user_time_type"}},[s("Select",{attrs:{placeholder:"请选择","element-id":"user_time_type",clearable:""},model:{value:e.userFrom.user_time_type,callback:function(t){e.$set(e.userFrom,"user_time_type",t)},expression:"userFrom.user_time_type"}},[s("Option",{attrs:{value:""}},[e._v("全部")]),s("Option",{attrs:{value:"visitno"}},[e._v("时间段未访问")]),s("Option",{attrs:{value:"visit"}},[e._v("时间段访问过")]),s("Option",{attrs:{value:"add_time"}},[e._v("首次访问")])],1)],1)],1),s("Col",e._b({},"Col",e.grid,!1),[s("FormItem",{attrs:{label:"下单次数：","label-for":"pay_count"}},[s("Select",{attrs:{placeholder:"请选择","element-id":"pay_count",clearable:""},model:{value:e.userFrom.pay_count,callback:function(t){e.$set(e.userFrom,"pay_count",t)},expression:"userFrom.pay_count"}},[s("Option",{attrs:{value:""}},[e._v("全部")]),s("Option",{attrs:{value:"-1"}},[e._v("0次")]),s("Option",{attrs:{value:"0"}},[e._v("1次以上")]),s("Option",{attrs:{value:"1"}},[e._v("2次以上")]),s("Option",{attrs:{value:"2"}},[e._v("3次以上")]),s("Option",{attrs:{value:"3"}},[e._v("4次以上")]),s("Option",{attrs:{value:"4"}},[e._v("5次以上")])],1)],1)],1)],1),s("Col",{attrs:{span:"18"}},[s("Col",e._b({},"Col",e.grid,!1),[s("FormItem",{attrs:{label:"选择时间：","label-for":"user_time"}},[s("DatePicker",{staticClass:"mr20",staticStyle:{width:"300px"},attrs:{editable:!1,value:e.timeVal,format:"yyyy/MM/dd",type:"daterange",placement:"bottom-start",placeholder:"自定义时间",options:e.options},on:{"on-change":e.onchangeTime}})],1)],1)],1)]:e._e(),s("Col",{staticClass:"ivu-text-right userFrom",attrs:{span:"6"}},[s("FormItem",[s("Button",{staticClass:"mr15",attrs:{type:"primary",icon:"ios-search",label:"default"},on:{click:e.userSearchs}},[e._v("搜索")]),s("Button",{staticClass:"ResetSearch",on:{click:function(t){return e.reset("userFrom")}}},[e._v("重置")]),s("a",{directives:[{name:"font",rawName:"v-font",value:14,expression:"14"}],staticClass:"ivu-ml-8",on:{click:function(t){e.collapse=!e.collapse}}},[e.collapse?[e._v(" 收起 "),s("Icon",{attrs:{type:"ios-arrow-up"}})]:[e._v("\n                展开 "),s("Icon",{attrs:{type:"ios-arrow-down"}})]],2)],1)],1)],2)],1),s("Divider",{attrs:{dashed:""}}),s("Row",{staticClass:"mt20",attrs:{type:"flex",justify:"space-between"}},[s("Col",{attrs:{span:"24"}},[s("Button",{directives:[{name:"auth",rawName:"v-auth",value:["admin-user-save"],expression:"['admin-user-save']"}],staticClass:"mr20",attrs:{type:"primary"},on:{click:e.save}},[e._v("添加用户")]),s("Tooltip",{attrs:{content:"本页至少选中一项",disabled:!!e.selectionList.length}},[s("Button",{directives:[{name:"auth",rawName:"v-auth",value:["admin-user-coupon"],expression:"['admin-user-coupon']"}],staticClass:"mr20",attrs:{type:"primary",disabled:!e.selectionList.length},on:{click:e.onSend}},[e._v("发送优惠券")])],1),"wechat"===e.userFrom.user_type?s("Button",{directives:[{name:"auth",rawName:"v-auth",value:["admin-wechat-news"],expression:"['admin-wechat-news']"}],staticClass:"greens mr20",attrs:{size:"default"},on:{click:e.onSendPic}},[s("Icon",{attrs:{type:"md-list"}}),e._v("\n          发送图文消息\n        ")],1):e._e(),s("Tooltip",{attrs:{content:"本页至少选中一项",disabled:!!e.selectionList.length}},[s("Button",{directives:[{name:"auth",rawName:"v-auth",value:["admin-user-group_set"],expression:"['admin-user-group_set']"}],staticClass:"mr20",attrs:{disabled:!e.selectionList.length},on:{click:e.setGroup}},[e._v("批量设置分组")])],1),s("Tooltip",{attrs:{content:"本页至少选中一项",disabled:!!e.selectionList.length}},[s("Button",{directives:[{name:"auth",rawName:"v-auth",value:["admin-user-set_label"],expression:"['admin-user-set_label']"}],staticClass:"mr20",attrs:{disabled:!e.selectionList.length},on:{click:e.setLabel}},[e._v("批量设置标签")])],1),s("Button",{directives:[{name:"auth",rawName:"v-auth",value:["admin-user-synchro"],expression:"['admin-user-synchro']"}],staticClass:"mr20",on:{click:e.synchro}},[e._v("同步公众号用户")])],1)],1),s("Table",{ref:"table",staticClass:"mt25",attrs:{columns:e.columns,data:e.userLists,"highlight-row":"",loading:e.loading,"no-userFrom-text":"暂无数据","no-filtered-userFrom-text":"暂无筛选结果"},on:{"on-selection-change":e.onSelectTab,"on-sort-change":e.sortChanged,"on-select-all":e.selectAll,"on-select-all-cancel":e.selectAll,"on-select-cancel":e.onSelectCancel},scopedSlots:e._u([{key:"avatars",fn:function(e){var t=e.row;e.index;return[s("viewer",[s("div",{staticClass:"tabBox_img"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.avatar,expression:"row.avatar"}]})])])]}},{key:"nickname",fn:function(t){var a=t.row;t.index;return[s("div",{staticClass:"acea-row"},[s("Icon",{directives:[{name:"show",rawName:"v-show",value:"男"===a.sex,expression:"row.sex === '男'"}],staticClass:"mr5",attrs:{type:"md-male",color:"#2db7f5",size:"15"}}),s("Icon",{directives:[{name:"show",rawName:"v-show",value:"女"===a.sex,expression:"row.sex === '女'"}],staticClass:"mr5",attrs:{type:"md-female",color:"#ed4014",size:"15"}}),s("div",{domProps:{textContent:e._s(a.nickname)}})],1)]}},{key:"isMember",fn:function(t){var a=t.row;t.index;return[s("div",[e._v(e._s(a.isMember?"是":"否"))])]}},{key:"action",fn:function(t){var a=t.row,r=t.index;return[s("a",{on:{click:function(t){return e.edit(a)}}},[e._v("编辑")]),s("Divider",{attrs:{type:"vertical"}}),[s("Dropdown",{on:{"on-click":function(t){return e.changeMenu(a,t,r)}}},[s("a",{attrs:{href:"javascript:void(0)"}},[e._v("\n              更多\n              "),s("Icon",{attrs:{type:"ios-arrow-down"}})],1),s("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[s("DropdownItem",{attrs:{name:"1"}},[e._v("账户详情")]),s("DropdownItem",{attrs:{name:"2"}},[e._v("积分余额")]),s("DropdownItem",{attrs:{name:"3"}},[e._v("赠送会员")]),s("DropdownItem",{attrs:{name:"5"}},[e._v("设置分组")]),s("DropdownItem",{attrs:{name:"6"}},[e._v("设置标签")]),s("DropdownItem",{attrs:{name:"7"}},[e._v("修改上级推广人")]),a.spread_uid?s("DropdownItem",{attrs:{name:"8"}},[e._v("清除上级推广人")]):e._e()],1)],1)]]}}])}),s("div",{staticClass:"acea-row row-right page"},[s("Page",{attrs:{total:e.total,current:e.userFrom.page,"show-elevator":"","show-total":"","page-size":e.userFrom.limit},on:{"on-change":e.pageChange}})],1)],1),s("edit-from",{ref:"edits",attrs:{FromData:e.FromData},on:{submitFail:e.submitFail}}),s("send-from",{ref:"sends",attrs:{"is-all":e.isAll,where:e.userFrom,userIds:e.user_ids}}),s("user-details",{ref:"userDetails"}),s("Modal",{staticClass:"modelBox",attrs:{scrollable:"",title:"发送消息",width:"1200",height:"800","footer-hide":""},model:{value:e.modal13,callback:function(t){e.modal13=t},expression:"modal13"}},[e.modal13?s("news-category",{attrs:{isShowSend:e.isShowSend,userIds:e.user_ids,scrollerHeight:e.scrollerHeight,contentTop:e.contentTop,contentWidth:e.contentWidth,maxCols:e.maxCols}}):e._e()],1),s("Modal",{staticClass:"order_box",attrs:{scrollable:"",title:"修改推广人",closable:!1},model:{value:e.promoterShow,callback:function(t){e.promoterShow=t},expression:"promoterShow"}},[s("Form",{ref:"formInline",attrs:{model:e.formInline,"label-width":100},nativeOn:{submit:function(e){e.preventDefault()}}},[s("FormItem",{attrs:{label:"用户头像：",prop:"image"}},[s("div",{staticClass:"picBox",on:{click:e.customer}},[e.formInline.image?s("div",{staticClass:"pictrue"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.formInline.image,expression:"formInline.image"}]})]):s("div",{staticClass:"upLoad acea-row row-center-wrapper"},[s("Icon",{attrs:{type:"ios-camera-outline",size:"26"}})],1)])])],1),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("Button",{attrs:{type:"primary"},on:{click:function(t){return e.putSend("formInline")}}},[e._v("提交")]),s("Button",{on:{click:function(t){return e.cancel("formInline")}}},[e._v("取消")])],1)],1),s("Modal",{attrs:{scrollable:"",title:"请选择商城用户",closable:!1,width:"50%"},model:{value:e.customerShow,callback:function(t){e.customerShow=t},expression:"customerShow"}},[s("customerInfo",{on:{imageObject:e.imageObject}})],1),s("Modal",{attrs:{scrollable:"",title:"请选择用户标签",closable:!1,width:"320","footer-hide":!0},model:{value:e.labelShow,callback:function(t){e.labelShow=t},expression:"labelShow"}},[s("userLabel",{attrs:{uid:e.labelActive.uid},on:{close:e.labelClose}})],1)],1)},r=[],i=s("a34a"),n=s.n(i),o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"label-wrapper"},[e._l(e.labelList,(function(t,a){return s("div",{key:a,staticClass:"label-box"},[s("div",{staticClass:"title"},[e._v(e._s(t.name))]),s("div",{staticClass:"list"},e._l(t.label,(function(t,a){return s("div",{key:a,staticClass:"label-item",class:{on:t.disabled},on:{click:function(s){return e.selectLabel(t)}}},[e._v(e._s(t.label_name))])})),0)])})),s("div",{staticClass:"footer"},[s("Button",{staticClass:"btns",attrs:{type:"primary"},on:{click:e.subBtn}},[e._v("确定")]),s("Button",{staticClass:"btns",attrs:{type:"primary",ghost:""},on:{click:e.cancel}},[e._v("取消")])],1)],2)},l=[],c=s("c24f"),u={name:"userLabel",props:{uid:{type:String|Number,default:""}},data:function(){return{labelList:[],activeIds:[]}},watch:{uid:{handler:function(e,t){e!=t&&this.getList()},deep:!0}},mounted:function(){this.getList()},methods:{getList:function(){var e=this;Object(c["h"])(this.uid).then((function(t){t.data.map((function(t){t.label.map((function(t){t.disabled&&e.activeIds.push(t.id)}))})),e.labelList=t.data}))},selectLabel:function(e){if(e.disabled){var t=this.activeIds.indexOf(e.id);this.activeIds.splice(t,1),e.disabled=!1}else this.activeIds.push(e.id),e.disabled=!0},subBtn:function(){var e=this,t=[];this.labelList.map((function(e){e.label.map((function(e){0==e.disabled&&t.push(e.id)}))})),Object(c["z"])(this.uid,{label_ids:this.activeIds,un_label_ids:t}).then((function(t){e.activeIds=[],e.labelList=[],e.$Message.success(t.msg),e.$emit("close")})).catch((function(t){e.$Message.error(t.msg)}))},cancel:function(){this.activeIds=[],this.labelList=[],this.$emit("close")}}},d=u,m=(s("f954"),s("2877")),h=Object(m["a"])(d,o,l,!1,null,"3d15168a",null),p=h.exports,f=s("2f62"),v=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("Row",{staticClass:"expand-row"},[s("Col",{attrs:{span:"6"}},[s("span",{staticClass:"expand-key"},[e._v("首次访问：")]),s("span",{staticClass:"expand-value"},[e._v(" "+e._s(e._f("formatDate")(e.row.add_time)))])]),s("Col",{attrs:{span:"6"}},[s("span",{staticClass:"expand-key"},[e._v("近次访问：")]),s("span",{staticClass:"expand-value"},[e._v(e._s(e._f("formatDate")(e.row.last_time)))])]),s("Col",{attrs:{span:"6"}},[s("span",{staticClass:"expand-key"},[e._v("身份证号：")]),s("span",{staticClass:"expand-value"},[e._v(e._s(e.row.card_id))])]),s("Col",{attrs:{span:"6"}},[s("span",{staticClass:"expand-key"},[e._v("真实姓名：")]),s("span",{staticClass:"expand-value"},[e._v(e._s(e.row.real_name))])])],1),s("Row",{staticClass:"expand-row"},[s("Col",{attrs:{span:"6"}},[s("span",{staticClass:"expand-key"},[e._v("标签：")]),s("span",{staticClass:"expand-value"},[e._v(e._s(e.row.labels))])]),s("Col",{attrs:{span:"6"}},[s("span",{staticClass:"expand-key"},[e._v("生日：")]),s("span",{staticClass:"expand-value"},[e._v(e._s(e.row.birthday))])]),s("Col",{attrs:{span:"6"}},[s("span",{staticClass:"expand-key"},[e._v("推荐人：")]),s("span",{staticClass:"expand-value"},[e._v(e._s(e.row.spread_uid_nickname))])]),s("Col",{attrs:{span:"6"}},[s("span",{staticClass:"expand-key"},[e._v("地址：")]),s("span",{staticClass:"expand-value"},[e._v(e._s(e.row.addres))])])],1),s("Row",{staticClass:"expand-row"},[s("Col",{attrs:{span:"6"}},[s("span",{staticClass:"expand-key"},[e._v("备注：")]),s("span",{staticClass:"expand-value"},[e._v(e._s(e.row.mark))])])],1)],1)},g=[],b=s("61f7"),_={name:"table-expand",filters:{formatDate:function(e){if(0!==e){var t=new Date(1e3*e);return Object(b["a"])(t,"yyyy-MM-dd hh:mm")}}},props:{row:Object}},y=_,w=(s("dc9d7"),Object(m["a"])(y,v,g,!1,null,"70215b32",null)),x=w.exports,k=s("bbbc"),C=s("31b4"),F=s("a8e0"),O=s("a716"),L=s("c42b"),D=s("2e8e"),$=s("8c03");function j(e,t,s,a,r,i,n){try{var o=e[i](n),l=o.value}catch(c){return void s(c)}o.done?t(l):Promise.resolve(l).then(a,r)}function S(e){return function(){var t=this,s=arguments;return new Promise((function(a,r){var i=e.apply(t,s);function n(e){j(i,a,r,n,o,"next",e)}function o(e){j(i,a,r,n,o,"throw",e)}n(void 0)}))}}function M(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function I(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?M(s,!0).forEach((function(t){P(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):M(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function P(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var B={name:"user_list",components:{expandRow:x,editFrom:C["a"],sendFrom:F["a"],userDetails:O["a"],newsCategory:L["a"],customerInfo:$["default"],userLabel:p},data:function(){var e=this;return{labelShow:!1,customerShow:!1,promoterShow:!1,labelActive:{uid:0},formInline:{uid:0,spread_uid:0,image:""},options:{shortcuts:[{text:"今天",value:function(){var e=new Date,t=new Date;return t.setTime(new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate())),[t,e]}},{text:"昨天",value:function(){var e=new Date,t=new Date;return t.setTime(t.setTime(new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()-1))),e.setTime(e.setTime(new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()-1))),[t,e]}},{text:"最近7天",value:function(){var e=new Date,t=new Date;return t.setTime(t.setTime(new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()-6))),[t,e]}},{text:"最近30天",value:function(){var e=new Date,t=new Date;return t.setTime(t.setTime(new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()-29))),[t,e]}},{text:"本月",value:function(){var e=new Date,t=new Date;return t.setTime(t.setTime(new Date((new Date).getFullYear(),(new Date).getMonth(),1))),[t,e]}},{text:"本年",value:function(){var e=new Date,t=new Date;return t.setTime(t.setTime(new Date((new Date).getFullYear(),0,1))),[t,e]}}]},collapse:!1,headeNum:[{type:"",name:"全部"},{type:"wechat",name:"微信公众号"},{type:"routine",name:"微信小程序"},{type:"h5",name:"H5"},{type:"pc",name:"PC"},{type:"app",name:"APP"}],address:[],addresData:D["a"],isShowSend:!0,modal13:!1,maxCols:4,scrollerHeight:"600",contentTop:"130",contentWidth:"98%",grid:{xl:8,lg:8,md:12,sm:24,xs:24},grid2:{xl:18,lg:16,md:12,sm:24,xs:24},loading:!1,total:0,userFrom:{label_id:"",user_type:"",status:"",sex:"",is_promoter:"",country:"",isMember:"",pay_count:"",user_time_type:"",user_time:"",nickname:"",province:"",city:"",page:1,limit:15,level:"",group_id:"",field_key:""},field_key:"",level:"",group_id:"",label_id:"",user_time_type:"",pay_count:"",columns:[{type:"expand",width:40,render:function(e,t){return e(x,{props:{row:t.row}})}},{width:60,align:"center",renderHeader:function(t,s){return t("div",{class:{"select-panel":!0},on:{mouseenter:function(t){e.display="block"},mouseleave:function(t){e.display="none"}}},[t("Checkbox",{props:{value:e.checkBox},on:{"on-change":function(t){e.checkBox=t,e.$refs.table.selectAll(e.checkBox),e.isAll=t?0:-1}}}),t("div",{style:{position:"absolute",top:0,zIndex:2,display:e.display,width:"80px",height:"100%",padding:"0px 0",borderRadius:"4px",backgroundColor:"#fff",boxShadow:"0 0px 5px rgba(0, 0, 0, 0.2)",transform:"translateX(25%)"}},[t("div",{class:{"select-item":!0,on:0===e.isAll},style:{padding:"1px 6px",cursor:"pointer",height:"50%"},on:{click:function(t){0===e.isAll?(e.isAll=-1,e.checkBox=!1,e.$refs.table.selectAll(e.checkBox)):(e.isAll=0,e.selectionList.length||(e.checkBox=!0,e.$refs.table.selectAll(e.checkBox))),e.display="none"}}},"选择当页"),t("div",{class:{"select-item":!0,on:1===e.isAll},style:{padding:"1px 6px",cursor:"pointer",height:"50%"},on:{click:function(t){1===e.isAll?(e.checkBox=!1,e.isAll=-1):(e.checkBox=!0,e.isAll=1),e.$refs.table.selectAll(e.checkBox),e.display="none"}}},"选择全部")])])},render:function(t,s){return t("Checkbox",{props:{value:s.row.checkBox},on:{"on-change":function(t){t?e.selectionList.push(s.row):(e.checkBox=!1,e.selectionList.forEach((function(t,a){t.id===s.row.id&&e.selectionList.splice(a,1)}))),e.isAll=e.selectionList.length?0:-1,s.row.checkBox=t,e.userLists[s.index].checkBox=t}},ref:"checkbox",refInFor:!0})}},{title:"ID",key:"uid",width:80},{title:"头像",slot:"avatars",minWidth:60},{title:"昵称",slot:"nickname",minWidth:150},{title:"付费会员",slot:"isMember",minWidth:90},{title:"用户等级",key:"level",minWidth:90},{title:"分组",key:"group_id",minWidth:100},{title:"手机号",key:"phone",minWidth:100},{title:"用户类型",key:"user_type",minWidth:100},{title:"余额",key:"now_money",sortable:"custom",minWidth:100},{title:"操作",slot:"action",fixed:"right",minWidth:120}],userLists:[],FromData:null,selectionList:[],user_ids:"",selectedData:[],timeVal:[],array_ids:[],groupList:[],levelList:[],labelFrom:{page:1,limit:""},labelLists:[],display:"none",checkBox:!1,selectionCopy:[],isAll:-1}},watch:{selectionList:function(e){var t=e.map((function(e){return e.uid}));this.array_ids=t,this.user_ids=t.join()},userLists:{deep:!0,handler:function(e){var t=this;e.forEach((function(e){t.selectionList.forEach((function(t){t.uid===e.uid&&(e.checkBox=!0)}))}));var s=this.userLists.filter((function(e){return e.checkBox}));this.userLists.length?this.checkBox=this.userLists.length===s.length:this.checkBox=!1}}},computed:I({},Object(f["e"])("admin/layout",["isMobile"]),{labelWidth:function(){return this.isMobile?void 0:100},labelPosition:function(){return this.isMobile?"top":"right"}}),created:function(){this.getList()},mounted:function(){this.userGroup(),this.levelLists(),this.groupLists()},methods:{selectAll:function(e){var t=this;e.length&&(this.selectionList=e,this.selectionCopy=e),this.selectionCopy.forEach((function(e,s){e.checkBox=t.checkBox,t.$set(t.userLists,s,e)}))},labelClose:function(){this.labelShow=!1,this.labelActive.uid=0},putSend:function(e){var t=this;this.$refs[e].validate((function(s){if(s){if(!t.formInline.spread_uid)return t.$Message.error("请上传用户");Object(k["b"])(t.formInline).then((function(s){t.promoterShow=!1,t.$Message.success(s.msg),t.getList(),t.$refs[e].resetFields()})).catch((function(e){t.$Message.error(e.msg)}))}}))},save:function(){var e=this;this.$modalForm(Object(c["i"])()).then((function(){return e.$refs.sends.getList()}))},synchro:function(){var e=this;Object(c["S"])().then((function(t){e.$Message.success(t.msg)})).catch((function(t){e.$Message.error(t.msg)}))},groupLists:function(){var e=this;this.loading=!0,Object(c["I"])(this.labelFrom).then(function(){var t=S(n.a.mark((function t(s){var a;return n.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=s.data,e.labelLists=a.list;case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.loading=!1,e.$Message.error(t.msg)}))},onClickTab:function(e){this.userFrom.page=1,this.userFrom.user_type=e,this.getList()},userGroup:function(){var e=this,t={page:1,limit:""};Object(c["F"])(t).then((function(t){e.groupList=t.data.list}))},levelLists:function(){var e=this,t={page:1,limit:"",title:"",is_show:1};Object(c["o"])(t).then((function(t){e.levelList=t.data.list}))},setGroup:function(){var e=this;if(0===this.selectionList.length)this.$Message.warning("请选择要设置分组的用户");else{var t={all:this.isAll};0===this.isAll?t.uids=this.array_ids:1===this.isAll&&(t.where=this.userFrom,t.where={city:this.userFrom.city,country:this.userFrom.country,field_key:this.userFrom.field_key,group_id:this.userFrom.group_id,isMember:this.userFrom.isMember,is_promoter:this.userFrom.is_promoter,label_id:this.userFrom.label_id,level:this.userFrom.level,nickname:this.userFrom.nickname,pay_count:this.userFrom.pay_count,province:this.userFrom.province,sex:this.userFrom.sex,status:this.userFrom.status,user_time:this.userFrom.user_time,user_time_type:this.userFrom.user_time_type,user_type:this.userFrom.user_type}),this.$modalForm(Object(c["Q"])(t)).then((function(){return e.getList()}))}},setLabel:function(){var e=this;if(0===this.selectionList.length)this.$Message.warning("请选择要设置标签的用户");else{var t={all:this.isAll};0===this.isAll?t.uids=this.array_ids:1===this.isAll&&(t.where={city:this.userFrom.city,country:this.userFrom.country,field_key:this.userFrom.field_key,group_id:this.userFrom.group_id,isMember:this.userFrom.isMember,is_promoter:this.userFrom.is_promoter,label_id:this.userFrom.label_id,level:this.userFrom.level,nickname:this.userFrom.nickname,pay_count:this.userFrom.pay_count,province:this.userFrom.province,sex:this.userFrom.sex,status:this.userFrom.status,user_time:this.userFrom.user_time,user_time_type:this.userFrom.user_time_type,user_type:this.userFrom.user_type}),this.$modalForm(Object(c["R"])(t)).then((function(){return e.getList()}))}},changeMember:function(){this.userFrom.page=1,this.getList()},changeCountry:function(){"abroad"!==this.userFrom.country&&this.userFrom.country||(this.selectedData=[],this.userFrom.province="",this.userFrom.city="",this.address=[])},handleChange:function(e,t){this.selectedData=t.map((function(e){return e.label})),this.userFrom.province=this.selectedData[0],this.userFrom.city=this.selectedData[1]},onchangeTime:function(e){this.timeVal=e,this.userFrom.user_time=this.timeVal.join("-")},changeMenu:function(e,t,s){var a=this,r=[];r.push(e.uid);var i={uids:r};switch(t){case"1":this.$refs.userDetails.modals=!0,this.$refs.userDetails.getDetails(e.uid);break;case"2":this.getOtherFrom(e.uid);break;case"3":this.giveLevelTime(e.uid);break;case"4":this.del(e,"清除 【 "+e.nickname+" 】的会员等级",s,"user");break;case"5":this.$modalForm(Object(c["Q"])(i)).then((function(){return a.$refs.sends.getList()}));break;case"6":this.openLabel(e);break;case"7":this.editS(e);break;default:this.del(e,"解除【 "+e.nickname+" 】的上级推广人",s,"tuiguang");break}},openLabel:function(e){this.labelShow=!0,this.labelActive.uid=e.uid},editS:function(e){this.promoterShow=!0,this.formInline.uid=e.uid},customer:function(){this.customerShow=!0},imageObject:function(e){this.customerShow=!1,this.formInline.spread_uid=e.uid,this.formInline.image=e.image},cancel:function(e){this.promoterShow=!1,this.$refs[e].resetFields()},giveLevel:function(e){var t=this;Object(c["j"])(e).then(function(){var e=S(n.a.mark((function e(s){return n.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!1!==s.data.status){e.next=2;break}return e.abrupt("return",t.$authLapse(s.data));case 2:t.FromData=s.data,t.$refs.edits.modals=!0;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){t.$Message.error(e.msg)}))},giveLevelTime:function(e){var t=this;Object(c["k"])(e).then(function(){var e=S(n.a.mark((function e(s){return n.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!1!==s.data.status){e.next=2;break}return e.abrupt("return",t.$authLapse(s.data));case 2:t.FromData=s.data,t.$refs.edits.modals=!0;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){t.$Message.error(e.msg)}))},del:function(e,t,s,a){var r=this,i={title:t,num:s,url:"user"===a?"user/del_level/".concat(e.uid):"agent/stair/delete_spread/".concat(e.uid),method:"user"===a?"DELETE":"PUT",ids:""};this.$modalSure(i).then((function(e){r.$Message.success(e.msg),r.getList()})).catch((function(e){r.$Message.error(e.msg)}))},submitModel:function(){this.getList()},getList:function(){var e=this;this.loading=!0,this.userFrom.user_type=this.userFrom.user_type||"",this.userFrom.status=this.userFrom.status||"",this.userFrom.sex=this.userFrom.sex||"",this.userFrom.is_promoter=this.userFrom.is_promoter||"",this.userFrom.country=this.userFrom.country||"",this.userFrom.user_time_type=this.userFrom.user_time_type||"",this.userFrom.pay_count=this.userFrom.pay_count||"",this.userFrom.label_id=this.userFrom.label_id||"",this.userFrom.field_key="all"===this.field_key?"":this.field_key,this.userFrom.level="all"===this.userFrom.level?"":this.userFrom.level,this.userFrom.group_id="all"===this.userFrom.group_id?"":this.userFrom.group_id,Object(c["L"])(this.userFrom).then(function(){var t=S(n.a.mark((function t(s){var a;return n.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=s.data,e.userLists=a.list.map((function(e){return e.checkBox=!1,e})),e.total=a.count,e.loading=!1;case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.loading=!1,e.$Message.error(t.msg)}))},pageChange:function(e){this.userFrom.page=e,this.getList()},userSearchs:function(){this.userFrom.page=1,this.selectionList=[],this.getList()},reset:function(e){this.userFrom={user_type:"",status:"",sex:"",is_promoter:"",country:"",pay_count:"",user_time_type:"",user_time:"",nickname:"",field_key:"",level:"",group_id:"",label_id:"",page:1,limit:20},this.field_key="",this.level="",this.group_id="",this.label_id="",this.user_time_type="",this.pay_count="",this.timeVal=[],this.selectionList=[],this.getList()},getUserFrom:function(e){var t=this;Object(c["g"])(e).then(function(){var e=S(n.a.mark((function e(s){return n.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!1!==s.data.status){e.next=2;break}return e.abrupt("return",t.$authLapse(s.data));case 2:t.FromData=s.data,t.$refs.edits.modals=!0;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){t.$Message.error(e.msg)}))},getOtherFrom:function(e){var t=this;Object(c["e"])(e).then(function(){var e=S(n.a.mark((function e(s){return n.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!1!==s.data.status){e.next=2;break}return e.abrupt("return",t.$authLapse(s.data));case 2:t.FromData=s.data,t.$refs.edits.modals=!0;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){t.$Message.error(e.msg)}))},onchangeIsShow:function(e){var t=this,s={id:e.uid,status:e.status};Object(c["n"])(s).then(function(){var e=S(n.a.mark((function e(s){return n.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.$Message.success(s.msg);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){t.$Message.error(e.msg)}))},onSelectTab:function(e){this.selectionList=e;var t=[];this.selectionList.map((function(e){t.push(e.uid)})),this.array_ids=t,this.user_ids=t.join(",")},onSend:function(){0===this.selectionList.length?this.$Message.warning("请选择要发送优惠券的用户"):(this.$refs.sends.modals=!0,this.$refs.sends.getList())},onSendPic:function(){0===this.selectionList.length?this.$Message.warning("请选择要发送图文消息的用户"):this.modal13=!0},edit:function(e){this.getUserFrom(e.uid)},submitFail:function(){this.getList()},sortChanged:function(e){this.userFrom[e.key]=e.order,this.getList()},onSelectCancel:function(e,t){}}},T=B,A=(s("838a"),Object(m["a"])(T,a,r,!1,null,"83b53c24",null));t["default"]=A.exports},"328c":function(e,t,s){},"5a97":function(e,t,s){},6112:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"i-layout-page-header"},[s("PageHeader",{staticClass:"product_tabs",attrs:{"hidden-breadcrumb":""}},[s("div",{attrs:{slot:"title"},slot:"title"},[s("router-link",{attrs:{to:{path:"/admin/setting/pages/devise"}}},[s("Button",{staticClass:"mr20",attrs:{icon:"ios-arrow-back",size:"small"}},[e._v("返回")])],1),s("span",{staticClass:"mr20",domProps:{textContent:e._s("页面设计")}})],1)])],1),s("Card",{staticClass:"ivu-mt",attrs:{bordered:!1,"dis-hover":""}},[s("div",{staticClass:"flex-wrapper"},[s("iframe",{ref:"iframe",staticClass:"iframe-box",attrs:{src:e.iframeUrl,frameborder:"0"}}),s("div",[s("div",{staticClass:"content"},[s("rightConfig",{attrs:{name:e.configName,pageId:e.pageId}})],1)]),s("links")],1)])],1)},r=[],i=s("f478"),n=(s("2f62"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.rCom.length?s("div",{staticClass:"right-box"},[s("div",{staticClass:"title-bar"},[e._v("模块配置")]),e.rCom.length?s("div",{staticClass:"mobile-config"},[e._l(e.rCom,(function(t,a){return s("div",{key:a},[s(t.components.name,{tag:"component",attrs:{name:t.configNme,configData:e.configData}})],1)})),e.rCom.length?s("div",{staticStyle:{"text-align":"center"}},[s("Button",{staticStyle:{width:"100%",margin:"0 auto",height:"40px"},attrs:{type:"primary"},on:{click:e.saveConfig}},[e._v("保存")])],1):e._e()],2):e._e()]):e._e()}),o=[],l=s("2542");function c(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function u(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?c(s,!0).forEach((function(t){d(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):c(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function d(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var m={name:"rightConfig",components:u({},l["a"]),props:{name:{type:null,default:""},pageId:{type:Number,default:0}},computed:{defultArr:function(){this.$store.dispatch("admin/user/getPageName");var e=this.$store.state.admin.user.pageName;return this.$store.state.admin[e].component}},watch:{name:{handler:function(e,t){this.rCom=[];var s=this.$store.state.admin.user.pageName;if(this.configData=this.$store.state.admin[s].defaultConfig[e],this.rCom=this.$store.state.admin[s].component[e].list,this.configData.selectConfig){var a=this.configData.selectConfig.type?this.configData.selectConfig.type:"";this.configData.selectConfig.list=this.categoryList,a?this.getByCategory():this.getCategory()}},deep:!0},defultArr:{handler:function(e,t){this.rCom=[];this.objToArray(e);this.rCom=e[this.name].list},deep:!0}},data:function(){return{rCom:[],configData:{},isShow:!0,categoryList:[],status:0}},mounted:function(){this.storeStatus()},methods:{storeStatus:function(){var e=this;Object(i["l"])().then((function(t){e.status=parseInt(t.data.store_status)}))},getCategory:function(){var e=this;Object(i["g"])().then((function(t){var s=[];t.data.map((function(e){s.push({title:e.title,pid:e.pid,activeValue:e.id.toString()})})),e.categoryList=s,e.bus.$emit("upData",s)}))},getByCategory:function(){var e=this;Object(i["f"])().then((function(t){var s=[];t.data.map((function(e){s.push({title:e.cate_name,pid:e.pid,activeValue:e.id.toString()})})),e.categoryList=s,e.bus.$emit("upData",s)}))},saveConfig:function(){var e=this,t=this.$store.state.admin.user.pageName,s=this.$store.state.admin[t].defaultConfig,a=this.$store.state.admin[t].periphery;if("tabBar"==this.name){if(!a||!this.status)for(var r=s.tabBar.tabBarList.list,n=0;n<r.length;n++)if("/pages/storeList/index"==r[n].link||"pages/storeList/index"==r[n].link)return this.$Message.error("请先开启您的周边功能(/pages/storeList/index)");if(s.tabBar.tabBarList.list.length<2)return this.$Message.error("您最少应添加2个导航")}Object(i["e"])(this.pageId,{value:s}).then((function(t){e.$Message.success("保存成功")}))},objToArray:function(e){var t=[];for(var s in e)t.push(e[s]);return t}}},h=m,p=(s("c545"),s("2877")),f=Object(p["a"])(h,n,o,!1,null,"6b70dc86",null),v=f.exports,g=s("2250"),b={name:"index",components:{rightConfig:v,links:g["default"]},data:function(){return{configName:"",iframeUrl:"",setConfig:"",updataConfig:"",pageId:0}},created:function(){var e=this,t=this.$route.query.id,s=this.$route.query.name,a=this.$store.state[s].defaultConfig;this.setConfig="admin/"+s+"/setConfig",this.updataConfig="admin/"+s+"/updataConfig",this.pageId=parseInt(t),this.iframeUrl="".concat(location.origin,"?type=iframeMakkMinkkJuan"),Object(i["c"])(parseInt(t)).then((function(s){var r=s.data.info.value;r?e.upData(r):Object(i["e"])(parseInt(t),{value:a}).then((function(e){}))}))},mounted:function(){window.addEventListener("message",this.handleMessage,!1)},methods:{handleMessage:function(e){e.data.name&&(this.configName=e.data.name,this.add(e.data.name))},add:function(e){this.$store.commit(this.setConfig,e)},upData:function(e){this.$store.commit(this.updataConfig,e)}}},_=b,y=(s("9a48"),Object(p["a"])(_,a,r,!1,null,"3b84f684",null));t["default"]=y.exports},"61f7":function(e,t,s){"use strict";function a(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function r(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?a(s,!0).forEach((function(t){i(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):a(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function i(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function n(e,t){/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));var s={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds()};for(var a in s)if(new RegExp("(".concat(a,")")).test(t)){var r=s[a]+"";t=t.replace(RegExp.$1,1===RegExp.$1.length?r:o(r))}return t}function o(e){return("00"+e).substr(e.length)}s.d(t,"a",(function(){return n})),s.d(t,"c",(function(){return u})),s.d(t,"b",(function(){return d}));var l={min:"%s最小长度为:min",max:"%s最大长度为:max",length:"%s长度必须为:length",range:"%s长度为:range",pattern:"$s格式错误"};var c=function(e,t){e.message=function(e){return t.replace("%s",e||"")}};function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r({required:!0,message:e,type:"string"},t)}function d(e){return m.pattern(/(^[1-9]([0-9]+)?(\.[0-9]{1,2})?$)|(^(0){1}$)|(^[0-9]\.[0-9]([0-9])?$)/,e)}c(u,"请输入%s"),c(d,"%s格式不正确");var m=Object.keys(l).reduce((function(e,t){return e[t]=function(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n="range"===t?{min:e[0],max:e[1]}:i({},t,e);return r({message:s.replace(":".concat(t),"range"===t?"".concat(e[0],"-").concat(e[1]):e),type:"string"},n,{},a)},c(e[t],l[t]),e}),{})},"69a5":function(e,t,s){"use strict";var a=s("328c"),r=s.n(a);r.a},"6c07":function(e,t,s){},8260:function(e,t,s){},"838a":function(e,t,s){"use strict";var a=s("5a97"),r=s.n(a);r.a},"8c03":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("Form",{ref:"formValidate",attrs:{model:e.formValidate,"label-width":100},nativeOn:{submit:function(e){e.preventDefault()}}},[s("Row",{attrs:{gutter:24,type:"flex"}},[s("Col",{staticClass:"ivu-text-left",attrs:{span:"24"}},[s("FormItem",{attrs:{label:"搜索日期："}},[s("RadioGroup",{staticClass:"mr",attrs:{type:"button"},on:{"on-change":function(t){return e.selectChange(e.formValidate.data)}},model:{value:e.formValidate.data,callback:function(t){e.$set(e.formValidate,"data",t)},expression:"formValidate.data"}},e._l(e.fromList.fromTxt,(function(t,a){return s("Radio",{key:a,attrs:{label:t.val}},[e._v(e._s(t.text))])})),1),s("DatePicker",{staticStyle:{width:"200px"},attrs:{editable:!1,value:e.timeVal,format:"yyyy/MM/dd",type:"daterange",placement:"bottom-end",placeholder:"自定义时间"},on:{"on-change":e.onchangeTime}})],1)],1),s("Col",{staticClass:"ivu-text-left",attrs:{span:"12"}},[s("FormItem",{attrs:{label:"用户名称："}},[s("Input",{staticStyle:{width:"90%"},attrs:{search:"","enter-button":"",placeholder:"请输入用户名称"},on:{"on-search":e.userSearchs},model:{value:e.formValidate.nickname,callback:function(t){e.$set(e.formValidate,"nickname",t)},expression:"formValidate.nickname"}})],1)],1)],1)],1),s("Table",{ref:"selection",attrs:{loading:e.loading2,"highlight-row":"","no-userFrom-text":"暂无数据","no-filtered-userFrom-text":"暂无筛选结果",columns:e.columns4,data:e.tableList2},scopedSlots:e._u([{key:"headimgurl",fn:function(e){var t=e.row;e.index;return[s("viewer",[s("div",{staticClass:"tabBox_img"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.headimgurl,expression:"row.headimgurl"}]})])])]}},{key:"user_type",fn:function(t){var a=t.row;t.index;return["wechat"===a.user_type?s("span",[e._v("公众号")]):e._e(),"routine"===a.user_type?s("span",[e._v("小程序")]):e._e(),"h5"===a.user_type?s("span",[e._v("H5")]):e._e(),"pc"===a.user_type?s("span",[e._v("PC")]):e._e()]}},{key:"sex",fn:function(t){var a=t.row;t.index;return[s("span",{directives:[{name:"show",rawName:"v-show",value:1===a.sex,expression:"row.sex ===1"}]},[e._v("男")]),s("span",{directives:[{name:"show",rawName:"v-show",value:2===a.sex,expression:"row.sex ===2"}]},[e._v("女")]),s("span",{directives:[{name:"show",rawName:"v-show",value:0===a.sex,expression:"row.sex ===0"}]},[e._v("保密")])]}},{key:"country",fn:function(t){var a=t.row;t.index;return[s("span",[e._v(e._s(a.country+a.province+a.city))])]}},{key:"subscribe",fn:function(t){var a=t.row;t.index;return[s("span",{domProps:{textContent:e._s(1===a.subscribe?"关注":"未关注")}})]}}])}),s("div",{staticClass:"acea-row row-right page"},[s("Page",{attrs:{total:e.total2,"show-elevator":"","show-total":"","page-size":e.formValidate.limit},on:{"on-change":e.pageChange2}})],1)],1)},r=[],i=s("a34a"),n=s.n(i),o=s("90e7"),l=s("6112");function c(e,t,s,a,r,i,n){try{var o=e[i](n),l=o.value}catch(c){return void s(c)}o.done?t(l):Promise.resolve(l).then(a,r)}function u(e){return function(){var t=this,s=arguments;return new Promise((function(a,r){var i=e.apply(t,s);function n(e){c(i,a,r,n,o,"next",e)}function o(e){c(i,a,r,n,o,"throw",e)}n(void 0)}))}}var d={components:{template:l["default"]},name:"index",data:function(){var e=this;return{formValidate:{page:1,limit:15,data:"",nickname:""},tableList2:[],timeVal:[],fromList:{title:"选择时间",custom:!0,fromTxt:[{text:"全部",val:""},{text:"今天",val:"today"},{text:"昨天",val:"yesterday"},{text:"最近7天",val:"lately7"},{text:"最近30天",val:"lately30"},{text:"本月",val:"month"},{text:"本年",val:"year"}]},currentid:0,productRow:{},columns4:[{title:"选择",key:"chose",width:60,align:"center",render:function(t,s){var a=s.row.uid,r=!1;r=e.currentid===a;var i=e;return t("div",[t("Radio",{props:{value:r},on:{"on-change":function(){if(i.currentid=a,e.productRow=s.row,e.productRow.uid)if("image"===e.$route.query.fodder){var t={image:e.productRow.headimgurl,uid:e.productRow.uid};form_create_helper.set("image",t),form_create_helper.close("image")}else e.$emit("imageObject",{image:e.productRow.headimgurl,uid:e.productRow.uid});else e.$Message.warning("请先选择商品")}}})])}},{title:"ID",key:"uid",width:80},{title:"微信用户名称",key:"nickname",minWidth:180},{title:"客服头像",slot:"headimgurl",minWidth:60},{title:"用户类型",slot:"user_type",minWidth:100},{title:"性别",slot:"sex",minWidth:60},{title:"地区",slot:"country",minWidth:120},{title:"是否关注公众号",slot:"subscribe",minWidth:120}],loading2:!1,total2:0}},created:function(){},mounted:function(){this.getListService()},methods:{onchangeTime:function(e){this.timeVal=e,this.formValidate.data=this.timeVal.join("-"),this.getListService()},selectChange:function(e){this.formValidate.data=e,this.timeVal=[],this.getListService()},getListService:function(){var e=this;this.loading2=!0,Object(o["A"])(this.formValidate).then(function(){var t=u(n.a.mark((function t(s){var a;return n.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=s.data,e.tableList2=a.list,e.total2=a.count,e.tableList2.map((function(e){e._isChecked=!1})),e.loading2=!1;case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.loading2=!1,e.$Message.error(t.msg)}))},pageChange2:function(e){this.formValidate.page=e,this.getListService()},userSearchs:function(){this.formValidate.page=1,this.getListService()}}},m=d,h=(s("a882"),s("2877")),p=Object(h["a"])(m,a,r,!1,null,"9cd3fe30",null);t["default"]=p.exports},"8d17c":function(e,t,s){},"9a48":function(e,t,s){"use strict";var a=s("8260"),r=s.n(a);r.a},a882:function(e,t,s){"use strict";var a=s("8d17c"),r=s.n(a);r.a},a8e0:function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("Modal",{attrs:{"z-index":100,scrollable:"","footer-hide":"",closable:"",title:"发送优惠券","mask-closable":!1,width:"900"},model:{value:e.modals,callback:function(t){e.modals=t},expression:"modals"}},[s("div",{staticClass:"acea-row"},[s("span",{staticClass:"sp"},[e._v("优惠券名称：")]),s("Input",{staticStyle:{width:"60%"},attrs:{search:"","enter-button":"",placeholder:"请输入优惠券名称"},on:{"on-search":e.userSearchs},model:{value:e.page.coupon_title,callback:function(t){e.$set(e.page,"coupon_title",t)},expression:"page.coupon_title"}})],1),s("Table",{ref:"table",staticClass:"mt25",attrs:{columns:e.columns,data:e.couponList,loading:e.loading,"highlight-row":"","no-userFrom-text":"暂无数据","no-filtered-userFrom-text":"暂无筛选结果"},scopedSlots:e._u([{key:"action",fn:function(t){var a=t.row,r=t.index;return[s("a",{on:{click:function(t){return e.sendGrant(a,"发送优惠券",r)}}},[e._v("发送")])]}}])}),s("div",{staticClass:"acea-row row-right page"},[s("Page",{attrs:{total:e.total,"show-elevator":"","show-total":"","page-size":e.page.limit},on:{"on-change":e.pageChange}})],1)],1)],1)},r=[],i=s("a34a"),n=s.n(i),o=s("c24f");function l(e,t,s,a,r,i,n){try{var o=e[i](n),l=o.value}catch(c){return void s(c)}o.done?t(l):Promise.resolve(l).then(a,r)}function c(e){return function(){var t=this,s=arguments;return new Promise((function(a,r){var i=e.apply(t,s);function n(e){l(i,a,r,n,o,"next",e)}function o(e){l(i,a,r,n,o,"throw",e)}n(void 0)}))}}var u={name:"send",props:{userIds:{type:String,default:""},isAll:{type:Number,default:0},where:{type:Object,default:function(){return{}}}},created:function(){},data:function(){return{modals:!1,loading:!1,couponList:[],columns:[{title:"优惠券名称",key:"title",align:"center",minWidth:100},{title:"优惠券面值",key:"coupon_price",align:"center",minWidth:80},{title:"优惠券最低消费",key:"use_min_price",align:"center",minWidth:150},{title:"优惠券有效期限",key:"coupon_time",align:"center",minWidth:120},{title:"操作",slot:"action",align:"center",width:120}],page:{page:1,limit:15,coupon_title:"",type:"send"},total:0}},methods:{getList:function(e){var t=this;this.loading=!0,Object(o["a"])(this.page).then(function(){var e=c(n.a.mark((function e(s){var a;return n.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:200===s.status?(a=s.data,t.couponList=a.list,t.total=a.count,t.loading=!1):(t.loading=!1,t.$Message.error(s.msg));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){t.loading=!1,t.$Message.error(e.msg)}))},userSearchs:function(){this.getList()},pageChange:function(e){this.page.page=e,this.getList()},sendGrant:function(e,t,s){var a=this,r={title:t,num:s,url:"marketing/coupon/user/grant",method:"post",ids:{id:e.id,all:this.isAll}};0===this.isAll?r.ids.uid=this.userIds:1===this.isAll&&(r.ids.where={city:this.where.city,country:this.where.country,field_key:this.where.field_key,group_id:this.where.group_id,isMember:this.where.isMember,is_promoter:this.where.is_promoter,label_id:this.where.label_id,level:this.where.level,nickname:this.where.nickname,pay_count:this.where.pay_count,province:this.where.province,sex:this.where.sex,status:this.where.status,user_time:this.where.user_time,user_time_type:this.where.user_time_type,user_type:this.where.user_type}),this.$modalSure(r).then((function(e){a.$Message.success(e.msg)})).catch((function(e){a.$Message.error(e.msg)}))}}},d=u,m=(s("69a5"),s("2877")),h=Object(m["a"])(d,a,r,!1,null,"d07b5cd8",null);t["a"]=h.exports},bbbc:function(e,t,s){"use strict";s.d(t,"a",(function(){return r})),s.d(t,"g",(function(){return i})),s.d(t,"f",(function(){return n})),s.d(t,"c",(function(){return o})),s.d(t,"e",(function(){return l})),s.d(t,"d",(function(){return c})),s.d(t,"h",(function(){return u})),s.d(t,"b",(function(){return d}));var a=s("b6bd");function r(e){return Object(a["a"])({url:"agent/index",method:"get",params:e})}function i(e){return Object(a["a"])({url:"agent/statistics",method:"get",params:e})}function n(e,t){return Object(a["a"])({url:e,method:"get",params:t})}function o(e){return Object(a["a"])({url:"agent/look_code",method:"get",params:e})}function l(e){return Object(a["a"])({url:"agent/look_xcx_code",method:"get",params:e})}function c(e){return Object(a["a"])({url:"agent/look_h5_code",method:"get",params:e})}function u(e){return Object(a["a"])({url:"export/userAgent",method:"get",params:e})}function d(e){return Object(a["a"])({url:"agent/spread",method:"PUT",data:e})}},bbcb:function(e,t,s){},c545:function(e,t,s){"use strict";var a=s("6c07"),r=s.n(a);r.a},cdef:function(e,t,s){},dc9d7:function(e,t,s){"use strict";var a=s("bbcb"),r=s.n(a);r.a},f954:function(e,t,s){"use strict";var a=s("cdef"),r=s.n(a);r.a}}]);